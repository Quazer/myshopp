
var globalImgServer='http://style.alibaba.com';if(location.protocol==="https:"){globalImgServer='https://ipaystyle.alibaba.com';};

YAHOO.util.Connect={_msxml_progid:["Microsoft.XMLHTTP","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP"],_http_headers:{},_has_http_headers:false,_use_default_post_header:true,_default_post_header:"application/x-www-form-urlencoded; charset=UTF-8",_default_form_header:"application/x-www-form-urlencoded",_use_default_xhr_header:true,_default_xhr_header:"XMLHttpRequest",_has_default_headers:true,_default_headers:{},_isFormSubmit:false,_isFileUpload:false,_formNode:null,_sFormData:null,_poll:{},_timeOut:{},_polling_interval:50,_transaction_id:0,_submitElementValue:null,_hasSubmitListener:(function(){if(YAHOO.util.Event){YAHOO.util.Event.addListener(document,"click",function(B){var A=YAHOO.util.Event.getTarget(B);if(A.nodeName.toLowerCase()=="input"&&(A.type&&A.type.toLowerCase()=="submit")){YAHOO.util.Connect._submitElementValue=encodeURIComponent(A.name)+"="+encodeURIComponent(A.value);}});return true;}return false;})(),startEvent:new YAHOO.util.CustomEvent("start"),completeEvent:new YAHOO.util.CustomEvent("complete"),successEvent:new YAHOO.util.CustomEvent("success"),failureEvent:new YAHOO.util.CustomEvent("failure"),uploadEvent:new YAHOO.util.CustomEvent("upload"),abortEvent:new YAHOO.util.CustomEvent("abort"),_customEvents:{onStart:["startEvent","start"],onComplete:["completeEvent","complete"],onSuccess:["successEvent","success"],onFailure:["failureEvent","failure"],onUpload:["uploadEvent","upload"],onAbort:["abortEvent","abort"]},setProgId:function(A){this._msxml_progid.unshift(A);},setDefaultPostHeader:function(A){if(typeof A=="string"){this._default_post_header=A;}else{if(typeof A=="boolean"){this._use_default_post_header=A;}}},setDefaultXhrHeader:function(A){if(typeof A=="string"){this._default_xhr_header=A;}else{this._use_default_xhr_header=A;}},setPollingInterval:function(A){if(typeof A=="number"&&isFinite(A)){this._polling_interval=A;}},createXhrObject:function(F){var E,A;try{A=new XMLHttpRequest();E={conn:A,tId:F};}catch(D){for(var B=0;B<this._msxml_progid.length;++B){try{A=new ActiveXObject(this._msxml_progid[B]);E={conn:A,tId:F};break;}catch(C){}}}finally{return E;}},getConnectionObject:function(A){var C;var D=this._transaction_id;try{if(!A){C=this.createXhrObject(D);}else{C={};C.tId=D;C.isUpload=true;}if(C){this._transaction_id++;}}catch(B){}finally{return C;}},asyncRequest:function(F,C,E,A){var D=(this._isFileUpload)?this.getConnectionObject(true):this.getConnectionObject();var B=(E&&E.argument)?E.argument:null;if(!D){return null;}else{if(E&&E.customevents){this.initCustomEvents(D,E);}if(this._isFormSubmit){if(this._isFileUpload){this.uploadFile(D,E,C,A);return D;}if(F.toUpperCase()=="GET"){if(this._sFormData.length!==0){C+=((C.indexOf("?")==-1)?"?":"&")+this._sFormData;}}else{if(F.toUpperCase()=="POST"){A=A?this._sFormData+"&"+A:this._sFormData;}}}if(F.toUpperCase()=="GET"&&(E&&E.cache===false)){C+=((C.indexOf("?")==-1)?"?":"&")+"rnd="+new Date().valueOf().toString();}D.conn.open(F,C,true);if(this._use_default_xhr_header){if(!this._default_headers["X-Requested-With"]){this.initHeader("X-Requested-With",this._default_xhr_header,true);}}if((F.toUpperCase()==="POST"&&this._use_default_post_header)&&this._isFormSubmit===false){this.initHeader("Content-Type",this._default_post_header);}if(this._has_default_headers||this._has_http_headers){this.setHeader(D);}this.handleReadyState(D,E);D.conn.send(A||"");if(this._isFormSubmit===true){this.resetFormState();}this.startEvent.fire(D,B);if(D.startEvent){D.startEvent.fire(D,B);}return D;}},initCustomEvents:function(A,C){var B;for(B in C.customevents){if(this._customEvents[B][0]){A[this._customEvents[B][0]]=new YAHOO.util.CustomEvent(this._customEvents[B][1],(C.scope)?C.scope:null);A[this._customEvents[B][0]].subscribe(C.customevents[B]);}}},handleReadyState:function(C,D){var B=this;var A=(D&&D.argument)?D.argument:null;if(D&&D.timeout){this._timeOut[C.tId]=window.setTimeout(function(){B.abort(C,D,true);},D.timeout);}this._poll[C.tId]=window.setInterval(function(){if(C.conn&&C.conn.readyState===4){window.clearInterval(B._poll[C.tId]);delete B._poll[C.tId];if(D&&D.timeout){window.clearTimeout(B._timeOut[C.tId]);delete B._timeOut[C.tId];}B.completeEvent.fire(C,A);if(C.completeEvent){C.completeEvent.fire(C,A);}B.handleTransactionResponse(C,D);}},this._polling_interval);},handleTransactionResponse:function(F,G,A){var D,C;var B=(G&&G.argument)?G.argument:null;try{if(F.conn.status!==undefined&&F.conn.status!==0){D=F.conn.status;}else{D=13030;}}catch(E){D=13030;}if(D>=200&&D<300||D===1223){C=this.createResponseObject(F,B);if(G&&G.success){if(!G.scope){G.success(C);}else{G.success.apply(G.scope,[C]);}}this.successEvent.fire(C);if(F.successEvent){F.successEvent.fire(C);}}else{switch(D){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:C=this.createExceptionObject(F.tId,B,(A?A:false));if(G&&G.failure){if(!G.scope){G.failure(C);}else{G.failure.apply(G.scope,[C]);}}break;default:C=this.createResponseObject(F,B);if(G&&G.failure){if(!G.scope){G.failure(C);}else{G.failure.apply(G.scope,[C]);}}}this.failureEvent.fire(C);if(F.failureEvent){F.failureEvent.fire(C);}}this.releaseObject(F);C=null;},createResponseObject:function(A,G){var D={};var I={};try{var C=A.conn.getAllResponseHeaders();var F=C.split("\n");for(var E=0;E<F.length;E++){var B=F[E].indexOf(":");if(B!=-1){I[F[E].substring(0,B)]=F[E].substring(B+2);}}}catch(H){}D.tId=A.tId;D.status=(A.conn.status==1223)?204:A.conn.status;D.statusText=(A.conn.status==1223)?"No Content":A.conn.statusText;D.getResponseHeader=I;D.getAllResponseHeaders=C;D.responseText=A.conn.responseText;D.responseXML=A.conn.responseXML;if(G){D.argument=G;}return D;},createExceptionObject:function(H,D,A){var F=0;var G="communication failure";var C=-1;var B="transaction aborted";var E={};E.tId=H;if(A){E.status=C;E.statusText=B;}else{E.status=F;E.statusText=G;}if(D){E.argument=D;}return E;},initHeader:function(A,D,C){var B=(C)?this._default_headers:this._http_headers;B[A]=D;if(C){this._has_default_headers=true;}else{this._has_http_headers=true;}},setHeader:function(A){var B;if(this._has_default_headers){for(B in this._default_headers){if(YAHOO.lang.hasOwnProperty(this._default_headers,B)){A.conn.setRequestHeader(B,this._default_headers[B]);}}}if(this._has_http_headers){for(B in this._http_headers){if(YAHOO.lang.hasOwnProperty(this._http_headers,B)){A.conn.setRequestHeader(B,this._http_headers[B]);}}delete this._http_headers;this._http_headers={};this._has_http_headers=false;}},resetDefaultHeaders:function(){delete this._default_headers;this._default_headers={};this._has_default_headers=false;},setForm:function(M,H,C){var L,B,K,I,P,J=false,F=[],O=0,E,G,D,N,A;this.resetFormState();if(typeof M=="string"){L=(document.getElementById(M)||document.forms[M]);}else{if(typeof M=="object"){L=M;}else{return;}}if(H){this.createFrame(C?C:null);this._isFormSubmit=true;this._isFileUpload=true;this._formNode=L;return;}for(E=0,G=L.elements.length;E<G;++E){B=L.elements[E];P=B.disabled;K=B.name;if(!P&&K){K=encodeURIComponent(K)+"=";I=encodeURIComponent(B.value);switch(B.type){case"select-one":if(B.selectedIndex>-1){A=B.options[B.selectedIndex];F[O++]=K+encodeURIComponent((A.attributes.value&&A.attributes.value.specified)?A.value:A.text);}break;case"select-multiple":if(B.selectedIndex>-1){for(D=B.selectedIndex,N=B.options.length;D<N;++D){A=B.options[D];if(A.selected){F[O++]=K+encodeURIComponent((A.attributes.value&&A.attributes.value.specified)?A.value:A.text);}}}break;case"radio":case"checkbox":if(B.checked){F[O++]=K+I;}break;case"file":case undefined:case"reset":case"button":break;case"submit":if(J===false){if(this._hasSubmitListener&&this._submitElementValue){F[O++]=this._submitElementValue;}else{F[O++]=K+I;}J=true;}break;default:F[O++]=K+I;}}}this._isFormSubmit=true;this._sFormData=F.join("&");this.initHeader("Content-Type",this._default_form_header);return this._sFormData;},resetFormState:function(){this._isFormSubmit=false;this._isFileUpload=false;this._formNode=null;this._sFormData="";},createFrame:function(A){var B="yuiIO"+this._transaction_id;var C;if(YAHOO.env.ua.ie){C=document.createElement('<iframe id="'+B+'" name="'+B+'" />');if(typeof A=="boolean"){C.src="javascript:false";}}else{C=document.createElement("iframe");C.id=B;C.name=B;}C.style.position="absolute";C.style.top="-1000px";C.style.left="-1000px";document.body.appendChild(C);},appendPostData:function(A){var D=[],B=A.split("&"),C,E;for(C=0;C<B.length;C++){E=B[C].indexOf("=");if(E!=-1){D[C]=document.createElement("input");D[C].type="hidden";D[C].name=decodeURIComponent(B[C].substring(0,E));D[C].value=decodeURIComponent(B[C].substring(E+1));this._formNode.appendChild(D[C]);}}return D;},uploadFile:function(D,N,E,C){var I="yuiIO"+D.tId,J="multipart/form-data",L=document.getElementById(I),O=this,K=(N&&N.argument)?N.argument:null,M,H,B,G;var A={action:this._formNode.getAttribute("action"),method:this._formNode.getAttribute("method"),target:this._formNode.getAttribute("target")};this._formNode.setAttribute("action",E);this._formNode.setAttribute("method","POST");this._formNode.setAttribute("target",I);if(YAHOO.env.ua.ie){this._formNode.setAttribute("encoding",J);}else{this._formNode.setAttribute("enctype",J);}if(C){M=this.appendPostData(C);}this._formNode.submit();this.startEvent.fire(D,K);if(D.startEvent){D.startEvent.fire(D,K);}if(N&&N.timeout){this._timeOut[D.tId]=window.setTimeout(function(){O.abort(D,N,true);},N.timeout);}if(M&&M.length>0){for(H=0;H<M.length;H++){this._formNode.removeChild(M[H]);}}for(B in A){if(YAHOO.lang.hasOwnProperty(A,B)){if(A[B]){this._formNode.setAttribute(B,A[B]);}else{this._formNode.removeAttribute(B);}}}this.resetFormState();var F=function(){if(N&&N.timeout){window.clearTimeout(O._timeOut[D.tId]);delete O._timeOut[D.tId];}O.completeEvent.fire(D,K);if(D.completeEvent){D.completeEvent.fire(D,K);}G={tId:D.tId,argument:N.argument};try{G.responseText=L.contentWindow.document.body?L.contentWindow.document.body.innerHTML:L.contentWindow.document.documentElement.textContent;G.responseXML=L.contentWindow.document.XMLDocument?L.contentWindow.document.XMLDocument:L.contentWindow.document;}catch(P){}if(N&&N.upload){if(!N.scope){N.upload(G);}else{N.upload.apply(N.scope,[G]);}}O.uploadEvent.fire(G);if(D.uploadEvent){D.uploadEvent.fire(G);}YAHOO.util.Event.removeListener(L,"load",F);setTimeout(function(){document.body.removeChild(L);O.releaseObject(D);},100);};YAHOO.util.Event.addListener(L,"load",F);},abort:function(E,G,A){var D;var B=(G&&G.argument)?G.argument:null;if(E&&E.conn){if(this.isCallInProgress(E)){E.conn.abort();window.clearInterval(this._poll[E.tId]);delete this._poll[E.tId];if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{if(E&&E.isUpload===true){var C="yuiIO"+E.tId;var F=document.getElementById(C);if(F){YAHOO.util.Event.removeListener(F,"load");document.body.removeChild(F);if(A){window.clearTimeout(this._timeOut[E.tId]);delete this._timeOut[E.tId];}D=true;}}else{D=false;}}if(D===true){this.abortEvent.fire(E,B);if(E.abortEvent){E.abortEvent.fire(E,B);}this.handleTransactionResponse(E,G,true);}return D;},isCallInProgress:function(B){if(B&&B.conn){return B.conn.readyState!==4&&B.conn.readyState!==0;}else{if(B&&B.isUpload===true){var A="yuiIO"+B.tId;return document.getElementById(A)?true:false;}else{return false;}}},releaseObject:function(A){if(A&&A.conn){A.conn=null;A=null;}}};YAHOO.register("connection",YAHOO.util.Connect,{version:"2.6.0",build:"1321"});;

YAHOO.lang.JSON=(function(){var l=YAHOO.lang,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_INVALID=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==='object'){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k];}else{value[k]=v;}}}}
return reviver.call(o,key,value);};return typeof reviver==='function'?walk({'':data},''):data;}
function _char(c){if(!_CHARS[c]){_CHARS[c]='\\u'+('0000'+(+(c.charCodeAt(0))).toString(16)).slice(-4);}
return _CHARS[c];}
function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char);}
function _isValid(str){return l.isString(str)&&_INVALID.test(str.replace(_ESCAPES,'@').replace(_VALUES,']').replace(_BRACKETS,''));}
function _string(s){return'"'+s.replace(_SPECIAL_CHARS,_char)+'"';}
function _stringify(h,key,d,w,pstack){var o=typeof w==='function'?w.call(h,key,h[key]):h[key],i,len,j,k,v,isArray,a;if(o instanceof Date){o=l.JSON.dateToString(o);}else if(o instanceof String||o instanceof Boolean||o instanceof Number){o=o.valueOf();}
switch(typeof o){case'string':return _string(o);case'number':return isFinite(o)?String(o):'null';case'boolean':return String(o);case'object':if(o===null){return'null';}
for(i=pstack.length-1;i>=0;--i){if(pstack[i]===o){return'null';}}
pstack[pstack.length]=o;a=[];isArray=l.isArray(o);if(d>0){if(isArray){for(i=o.length-1;i>=0;--i){a[i]=_stringify(o,i,d-1,w,pstack)||'null';}}else{j=0;if(l.isArray(w)){for(i=0,len=w.length;i<len;++i){k=w[i];v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+':'+v;}}}else{for(k in o){if(typeof k==='string'&&l.hasOwnProperty(o,k)){v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+':'+v;}}}}
a.sort();}}
pstack.pop();return isArray?'['+a.join(',')+']':'{'+a.join(',')+'}';}
return undefined;}
return{isValid:function(s){return _isValid(_prepare(s));},parse:function(s,reviver){s=_prepare(s);if(_isValid(s)){return _revive(eval('('+s+')'),reviver);}
throw new SyntaxError('parseJSON');},stringify:function(o,w,d){if(o!==undefined){if(l.isArray(w)){w=(function(a){var uniq=[],map={},v,i,j,len;for(i=0,j=0,len=a.length;i<len;++i){v=a[i];if(typeof v==='string'&&map[v]===undefined){uniq[(map[v]=j++)]=v;}}
return uniq;})(w);}
d=d>=0?d:1/0;return _stringify({'':o},'',d,w,[]);}
return undefined;},dateToString:function(d){function _zeroPad(v){return v<10?'0'+v:v;}
return d.getUTCFullYear()+'-'+
_zeroPad(d.getUTCMonth()+1)+'-'+
_zeroPad(d.getUTCDate())+'T'+
_zeroPad(d.getUTCHours())+':'+
_zeroPad(d.getUTCMinutes())+':'+
_zeroPad(d.getUTCSeconds())+'Z';},stringToDate:function(str){if(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})Z$/.test(str)){var d=new Date();d.setUTCFullYear(RegExp.$1,(RegExp.$2|0)-1,RegExp.$3);d.setUTCHours(RegExp.$4,RegExp.$5,RegExp.$6);return d;}
return str;}};})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.6.0",build:"1321"});;
;(function(){function AjaxProxy(){this.config={proxy:globalImgServer+"/static/ajax_proxy.html?iframe_delete=true",domain:"alibaba.com"};this.temp={ajaxForm:null};this.setForm=function(ajaxForm){this.temp.ajaxForm=ajaxForm;};this.asyncRequest=function(type,url,callBack,postBody,iConfig){var _self=this;_self.config=YL.merge(_self.config,iConfig||{});var config=_self.config;try{document.domain=config.domain;}catch(e){}
var iframe=document.createElement("iframe");YUE.on(iframe,"load",function(){var tempCallBack=callBack.success;callBack.success=function(o){tempCallBack(o);};if(_self.temp.ajaxForm){this.contentWindow.setForm(_self.temp.ajaxForm);}
this.contentWindow.sendRequest(type,url,callBack,postBody);});var iframeDeleteQuery="";if(config.proxy.indexOf("iframe_delete=true")==-1){var prefixStr="&";if(config.proxy.indexOf("?")==-1){prefixStr="?";}
iframeDeleteQuery=prefixStr+"iframe_delete=true";}
iframe.src=config.proxy+iframeDeleteQuery;iframe.style.display="none";setTimeout(function(){document.body.appendChild(iframe);},0);};}
AE.namespace('run').ajaxProxy=AjaxProxy;}());;

AE.namespace('AE.app');if(!AE.app.countdown){AE.app.countdown=function(){this.config={wrapId:document.body,pieceClasses:null,nowTime:new Date(),desTime:null,formatHour:false,timeoutAction:null};this.temp={thread:null,hourLabel:null,minuteLabel:null,secondLabel:null};};AE.app.countdown.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this;var config=_self.config;var temp=_self.temp;var remaining=_self.getRemainingTime({_self:_self});var hour=_self.getHour(remaining);var minute=_self.getMinute(remaining);var second=_self.getSecond(remaining);var wrap=get(config.wrapId);var hourLabel=YUD.getElementsByClassName(config.pieceClasses.hour,'*',wrap)[0];var minuteLabel=YUD.getElementsByClassName(config.pieceClasses.minute,'*',wrap)[0];var secondLabel=YUD.getElementsByClassName(config.pieceClasses.second,'*',wrap)[0];temp.hourLabel=hourLabel;temp.minuteLabel=minuteLabel;temp.secondLabel=secondLabel;_self.run({hour:hour,minute:minute,second:second,_self:_self});},setTime:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var hour=args.hour;var minute=args.minute;var second=args.second;if(config.formatHour){temp.hourLabel.innerHTML=_self.formatValue(hour);}else{temp.hourLabel.innerHTML=hour;}
temp.minuteLabel.innerHTML=_self.formatValue(minute);temp.secondLabel.innerHTML=_self.formatValue(second);},getRemainingTime:function(args){var _self=args._self;var config=_self.config;var remaining=config.desTime.getTime()-config.nowTime.getTime();return parseInt(remaining/1000);},getSecond:function(time){return time%60;},getMinute:function(time,second){return parseInt(time/60)%60;},getHour:function(time){return parseInt(time/(60*60));},formatValue:function(value){if(parseInt(value)<10){return'0'+value;}
return value;},run:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var thread=temp.thread;var hour=parseInt(args.hour,10);var minute=parseInt(args.minute,10);var second=parseInt(args.second,10);_self.setTime({hour:hour,minute:minute,second:second,_self:_self});if(hour<=0&&minute<=0&&second<=0){if(thread){clearTimeout(thread);var timeoutAction=config.timeoutAction;if(timeoutAction){config.timeoutAction();}}
return false;}
second-=1;if(parseInt(second,10)<0){second=59;minute-=1;if(parseInt(minute,10)<0){minute=59;hour-=1;if(parseInt(hour,10)<0){hour=0;}}}
thread=setTimeout(function(){_self.run({hour:hour,minute:minute,second:second,_self:_self})},1000);temp.thread=thread;}};};

AE.namespace('AE.app');if(!AE.app.clickStat){AE.app.clickStat=(function(){var statMethod={'buttonClick':function(paramsObj){var projectId=paramsObj.projectId||'',pageType=paramsObj.pageType||'',pageArea=paramsObj.pageArea||'',buttonType=paramsObj.buttonType||'',objectType=paramsObj.objectType||'',objectValue=paramsObj.objectValue||'',clickBehavior=paramsObj.clickBehavior||'';var cookieId=AE.bom.getCookie('ali_apache_id')||'';var memberId=AE.app.cookieInfo.memberSeq||'';var userId='';var isMember=false;if(memberId!=''){isMember=true;userId=memberId;}else{userId=cookieId;}
var params={ae_project_id:projectId,ae_page_type:pageType,ae_page_area:pageArea,ae_button_type:buttonType,ae_object_type:objectType,ae_object_value:objectValue,ae_ismember:isMember,ae_user_id:userId,ae_click_behavior:clickBehavior};if(typeof dmtrack!='undefined'){dmtrack.clickstat('http://stat.alibaba.com/ae/aliexpress_button_click.html',params);}},'ctr':function(paramsObj){var projectId=paramsObj.projectId||'',expPage=paramsObj.expPage||'',expPageArea=paramsObj.expPageArea||'',expType=paramsObj.expType||'',expCondition=paramsObj.expCondition||'',expProduct=paramsObj.expProduct||'',expAttribute=paramsObj.expAttribute||'',expResultCnt=paramsObj.expResultCnt||'',pageSize=paramsObj.pageSize||'',pageNo=paramsObj.pageNo||'',refer=paramsObj.refer||'';var params={project_id:projectId,exp_page:expPage,exp_page_area:expPageArea,exp_type:expType,exp_condition:expCondition,exp_product:expProduct,exp_attribute:expAttribute,exp_result_cnt:expResultCnt,Page_size:pageSize,Page_no:pageNo,refer:refer};if(typeof dmtrack!='undefined'){dmtrack.clickstat('http://stat.alibaba.com/ctr/aliexpress_ctr.html',params);}}};return statMethod;})();};

AE.namespace("AE.app.falls");AE.app.falls=function(){this.config={selector:get("selector"),selectorTitleClass:"title",selectorOverClass:"over",fromFirstChar:true,content:get("selector-content"),contentItemOverClass:"over",contentIgnoreItemClass:"ignore",contentItemOddClass:"odd",contentItemEvenClass:"even",contentItemCurrentClass:"current",itemHiddenClass:"hidden",isKillTheSame:false,indexInputLength:3,indexInputTime:80,excursion:[0,20]};this.temp={selectorTitle:null,selectorTitleText:null,contentItems:[],contentValidItems:[],itemsCharMapArray:[],itemsCharMap:null,keyListenerInput:null,lastInputChar:null,sameCharLastIndex:1,lastSelectIndex:0};afterSelect=null;return this;};AE.app.falls.prototype={contentItemMouseOver:function(o){var _self=this,config=this.config,temp=this.temp;YUD.addClass(o.item,config.contentItemOverClass);YUD.removeClass(temp.contentValidItems[temp.lastSelectIndex],config.contentItemCurrentClass);temp.lastSelectIndex=null;},contentItemMouseOut:function(o){var _self=this,config=this.config,temp=this.temp;YUD.removeClass(o.item,config.contentItemOverClass);},selectorMouseOver:function(){var _self=this,config=this.config,temp=this.temp;YUD.addClass(config.selector,config.selectorOverClass);},selectorMouseOut:function(){var _self=this,config=this.config,temp=this.temp;YUD.removeClass(config.selector,config.selectorOverClass);},oddEvenColor:function(){var _self=this,config=this.config,temp=this.temp;for(var i=0;i<temp.contentValidItems.length;i++){var item=temp.contentValidItems[i];if(i%2==0){YUD.addClass(item,config.contentItemOddClass);}else{YUD.addClass(item,config.contentItemEvenClass);}}},focusTheKeyListener:function(){var _self=this,config=this.config,temp=this.temp;if(typeof(temp.keyListenerInput.selectionStart)=="number"){temp.keyListenerInput.focus();}else{var oRange=temp.keyListenerInput.createTextRange();oRange.move('character',temp.keyListenerInput.value.length);oRange.select();}},killTheSame:function(){var _self=this,config=this.config,temp=this.temp;for(var i=0;i<temp.contentValidItems.length;i++){var item=temp.contentValidItems[i];itemText=_self.getInnerText(item);if(itemText==temp.selectorTitleText){YUD.addClass(item,config.itemHiddenClass);}else{YUD.removeClass(item,config.itemHiddenClass);}}},contentItemsClick:function(o){var _self=this,config=this.config,temp=this.temp;temp.selectorTitle.innerHTML=o.item.innerHTML;temp.contentClickShow.hiddenDirectly(null,true);_self.afterSelect.fire("afterSelect",{item:o.item});},createKeyListener:function(){var _self=this,config=this.config,temp=this.temp;var keyListenerInput=document.createElement("input");keyListenerInput.style.position="absolute";keyListenerInput.style.left="-50000px";keyListenerInput.maxLength=config.indexInputLength;keyListenerInput.style.imeMode="disabled";config.selector.parentNode.appendChild(keyListenerInput);return keyListenerInput;},getPreviousValidItemIndex:function(index){var _self=this,config=this.config,temp=this.temp;if(YUD.getElementsByClassName(config.contentItemCurrentClass,"*",config.content).length==0){var preIndex=0;}else{var preIndex=index-1;if(preIndex<0){preIndex=temp.contentValidItems.length-1;}
if(YUD.hasClass(temp.contentValidItems[preIndex],config.itemHiddenClass)){if(_self.getPreviousValidItemIndex(preIndex-1)<=0){return _self.getPreviousValidItemIndex(temp.contentValidItems.length-1);}else{return _self.getPreviousValidItemIndex(preIndex-1)+1;}}}
return preIndex;},getNextValidItemIndex:function(index){var _self=this,config=this.config,temp=this.temp;if(YUD.getElementsByClassName(config.contentItemCurrentClass,"*",config.content).length==0){var nextIndex=0;}else{var nextIndex=index+1;if(nextIndex>temp.contentValidItems.length-1){nextIndex=0;}
if(YUD.hasClass(temp.contentValidItems[nextIndex],config.itemHiddenClass)){if(_self.getNextValidItemIndex(nextIndex+1)>temp.contentValidItems.length){return _self.getNextValidItemIndex(0);}else{return _self.getNextValidItemIndex(nextIndex+1)-1;}}}
return nextIndex;},keyListenerPress:function(o){var _self=this,config=this.config,temp=this.temp;var keyCode=o.keyCode;if(o.charIndex=="")return;if(config.fromFirstChar){var re=new RegExp("{{"+o.charIndex+"[^}]*?#-#.*?}}","gi");}else{var re=new RegExp("{{[^{]*?"+o.charIndex+"[^}]*?#-#.*?}}","gi");}
var matchCharArray=temp.itemsCharMap.match(re);if(!matchCharArray)return;if(o.charIndex==temp.lastInputChar){temp.sameCharLastIndex++;if(temp.sameCharLastIndex>matchCharArray.length){temp.sameCharLastIndex=1;}}else{temp.sameCharLastIndex=1;}
var charPart=matchCharArray[temp.sameCharLastIndex-1].replace("{{","").replace("}}","");var itemIndex=charPart.split("#-#")[1];_self.hightLightItem({index:itemIndex});temp.lastInputChar=o.charIndex;},arrowTabKayPress:function(o){var _self=this,config=this.config,temp=this.temp;var keyCode=o.keyCode;if("|37|38|".indexOf(keyCode)>0){itemIndex=_self.getPreviousValidItemIndex(temp.lastSelectIndex);}
if("|40|39|9|".indexOf(keyCode)>0){itemIndex=_self.getNextValidItemIndex(temp.lastSelectIndex);}
if("|13|".indexOf(keyCode)>0){temp.selectorTitle.innerHTML=_self.getInnerText(temp.contentValidItems[temp.lastSelectIndex]);config.content.style.display="none";temp.contentClickShow.hiddenDirectly();config.content.scrollTop=0;_self.afterSelect.fire("afterSelect",{item:temp.contentValidItems[temp.lastSelectIndex]});}
_self.hightLightItem({index:itemIndex});},hightLightItem:function(o){var _self=this,config=this.config,temp=this.temp;YUD.removeClass(temp.contentValidItems[temp.lastSelectIndex],config.contentItemCurrentClass);var itemIndex=o.index;YUD.addClass(temp.contentValidItems[itemIndex],config.contentItemCurrentClass);if(config.content.scrollHeight>config.content.offsetHeight){var scrollAnim=new YAHOO.util.Scroll(config.content,{scroll:{to:[0,((YUD.getY(temp.contentValidItems[itemIndex])+config.content.scrollTop)-YUD.getY(config.content)-3)]}},0.2);scrollAnim.animate();}
temp.lastSelectIndex=itemIndex;},defineTemps:function(){var _self=this,config=this.config,temp=this.temp;temp.selectorTitle=YUD.getElementsByClassName(config.selectorTitleClass,"*",config.selector)[0];temp.selectorTitleText=_self.getInnerText(temp.selectorTitle);temp.contentItems=YUD.getChildren(config.content);for(var i=0;i<temp.contentItems.length;i++){var item=temp.contentItems[i];if(!YUD.hasClass(item,config.contentIgnoreItemClass)){temp.contentValidItems.push(item);temp.itemsCharMapArray.push(_self.getInnerText(item)+"#-#"+(temp.contentValidItems.length-1));}};temp.itemsCharMap="{{"+temp.itemsCharMapArray.join("}},{{")+"}}";temp.keyListenerInput=_self.createKeyListener();},defineEvents:function(){var _self=this,config=this.config,temp=this.temp;YUE.on(config.selector,"mouseover",function(){_self.selectorMouseOver();});YUE.on(config.selector,"mouseout",function(){_self.selectorMouseOut();});if(!_self.isMobileDevice){YUE.on(config.selector,"click",function(){_self.focusTheKeyListener();});}
YUE.on([config.selector,config.content],"keydown",function(){_self.focusTheKeyListener();});if(AE.bom.isIE){YUE.on(config.content,"scroll",function(){_self.focusTheKeyListener();})}
YUE.on(temp.keyListenerInput,"keydown",function(e){if(temp.keyListenerIV){clearTimeout(temp.keyListenerIV);}
var eventKeyCode=e.keyCode;if("|13|9|37|38|39|40|".indexOf(eventKeyCode)>0){_self.arrowTabKayPress({keyCode:eventKeyCode});if(AE.bom.isIE){e.returnValue=false;}else{e.preventDefault();}
return;}
temp.keyListenerIV=setTimeout(function(){_self.keyListenerPress({charIndex:temp.keyListenerInput.value,keyCode:eventKeyCode});temp.keyListenerInput.value="";},config.indexInputLength*config.indexInputTime);});YUE.on(config.content,"keydown",function(){return false;});YUE.on(temp.contentValidItems,"mouseover",function(){_self.contentItemMouseOver({item:this});});YUE.on(temp.contentValidItems,"mouseout",function(){_self.contentItemMouseOut({item:this});});YUE.on(temp.contentValidItems,"click",function(){_self.contentItemsClick({item:this});});temp.contentClickShow=new AE.widget.clickShow();temp.contentClickShow.init({targetId:config.selector,contentId:config.content,needMask:true,showOrHidden:true,excursion:config.excursion,onShow:function(){YUD.removeClass(temp.contentValidItems[temp.lastSelectIndex],config.contentItemCurrentClass);temp.selectorTitleText=_self.getInnerText(temp.selectorTitle);if(config.isKillTheSame){_self.killTheSame();}}});_self.afterSelect=new YAHOO.util.CustomEvent("afterSelect",_self);},run:function(){var _self=this,config=this.config,temp=this.temp;_self.oddEvenColor();},init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config,temp=this.temp;_self.isMobileDevice=navigator.userAgent.toLowerCase().match(/ipad|iphone/i);_self.defineTemps();_self.defineEvents();_self.run();if(AE.bom.isIE){CollectGarbage();}
return _self;},getInnerText:function(dom){return trim(dom.innerText?dom.innerText:dom.textContent);}};;
;(function(){function ClickShow(){var _self=this;var defConfig={targetId:"clickShowTargetId",switchId:"",contentId:"clickShowContentId",bodyClickClose:true,showOrHidden:true,needMask:false,needXY:true,excursion:[0,0],closeBtnsClassName:"",maskIframeClassName:"maskIframe",iframeMaskSrc:globalImgServer+"/js/blank.html",hide:false,onInit:function(){},unInit:function(){},onShow:function(){},unShow:function(){},onHidden:function(){},unHidden:function(){}};var config;var isInited=false;var dTarget,dContent,dSwitch,iframeMask,dCloseBtns;var canClose=true;_self.init=function(oConfig){if(isInited){return false;}
config=oConfig||{};_self.config=config;YAHOO.lang.augmentObject(oConfig,defConfig);config.onInit.apply(_self);dTarget=get(config.targetId);dContent=get(config.contentId);dSwitch=(config.switchId==""?dTarget:get(config.switchId));dCloseBtns=(config.closeBtnsClassName==""?[]:YUD.getElementsByClassName(config.closeBtnsClassName,"*",dContent));if(!dSwitch)return;YUE.on(dTarget,"click",_self.showDirectly);if(config.bodyClickClose){YUE.on(document.body,"click",_self.hiddenDirectly);}
if(dCloseBtns){YUE.on(dCloseBtns,"click",_self.dCloseBtnsClick=function(){_self.hiddenDirectly(null,true);});}
YUE.on(dSwitch,"mouseover",_self.dSwitchMouseover=function(){canClose=false;});YUE.on(dContent,"mouseover",_self.dContentMouseover=function(){canClose=false;});YUE.on(dSwitch,"mouseout",_self.dSwitchMouseout=function(){canClose=true;});YUE.on(dContent,"mouseout",_self.dContentMouseout=function(){canClose=true;});if(config.needMask){iframeMask=document.createElement("iframe");iframeMask.className=config.maskIframeClassName;iframeMask.style.display="none";var targetIndex=0;if(!isNaN(YUD.getStyle(dContent,'zIndex'))){targetIndex=YUD.getStyle(dContent,'zIndex');}
iframeMask.style.zIndex=targetIndex-1;iframeMask.style.top="0px";iframeMask.style.left="0px";if(YAHOO.env.ua.ie===6&&location.protocol=="https:"){iframeMask.src=config.iframeMaskSrc;}
iframeMask.frameBorder=0;dContent.parentNode.appendChild(iframeMask);}
config.unInit.apply(_self);_self.afterHidden=new YAHOO.util.CustomEvent("afterHidden",_self);return _self;};_self.dispose=function(){YUE.removeListener(document.body,"click",_self.hiddenDirectly);YUE.removeListener(dTarget,"click",_self.showDirectly);YUE.removeListener(dCloseBtns,"click",_self.dCloseBtnsClick);YUE.removeListener(dSwitch,"mouseover",_self.dSwitchMouseover);YUE.removeListener(dContent,"mouseover",_self.dContentMouseover);YUE.removeListener(dSwitch,"mouseout",_self.dSwitchMouseout);YUE.removeListener(dContent,"mouseout",_self.dContentMouseout);if(config.needMask){dContent.parentNode.removeChild(iframeMask);}};_self.showDirectly=function(){if(config.hide){return false;}
config.onShow.apply(_self);if(config.showOrHidden&&dContent.style.display!="none"&&YUD.getStyle(dContent,"visibility")!="hidden"){canClose=false;_self.hiddenDirectly(null,true);return;}
var xy=[];if(config.needXY){xy=YUD.getXY(dTarget);dContent.style.visibility='hidden';dContent.style.display="";parsePos(config.excursion);xy[0]+=config.excursion[0];xy[1]+=config.excursion[1];dContent.style.visibility='visible';YUD.setXY(dContent,xy);}else{dContent.style.display="";}
if(config.needMask){iframeMask.style.display="";iframeMask.style.width=dContent.offsetWidth+"px";iframeMask.style.height=dContent.offsetHeight+"px";if(config.needXY){YUD.setXY(iframeMask,xy);}
iframeMask.style.visibility="visible";}
config.unShow.apply(_self);};_self.hiddenDirectly=function(ev,force){if(dContent.style.display=="none")return;config.onHidden.apply(_self);if(canClose||force){if(_self.afterHidden){_self.afterHidden.fire();}
dContent.style.display="none";if(config.needMask){iframeMask.style.display="none";}
config.unHidden.apply(_self);}};_self.getConfig=function(){return config;};var parsePos=function(aPos){if(typeof(aPos[0])=="string"){switch(aPos[0]){case'center':aPos[0]=parseInt(dTarget.offsetWidth/2,10);break;case'right':aPos[0]=(dSwitch.offsetWidth-dContent.offsetWidth);break;default:aPos[0]=0;}}
if(typeof(aPos[1])=="string"){switch(aPos[1]){case'center':aPos[1]=paseInt(dTarget.offsetHeight/2);break;case'bottom':aPos[1]=dTarget.offsetHeight;break;default:aPos[1]=0;}}
return aPos;};}
AE.namespace('widget').clickShow=ClickShow;}());;
;(function(){function OverShow(){var _self=this;var defConfig={targetId:"overShowTargetId",targetEl:null,positionId:false,contentId:"overShowContentId",showDelayTime:200,hiddenDelayTime:200,excursion:[0,0],needMask:false,needXY:true,closeBtnClass:"close-button",maskIframeClassName:"maskIframe",iframeMaskSrc:globalImgServer+"/js/blank.html"};var config;var isInited=false;var dTarget,dPosition,dContent,iframeMask;var delayTimer=false;var canClose=true,contentShowed=false,holded=false;_self.hold=function(){holded=true;};_self.setFree=function(){holded=false;};_self.afterShow=new YAHOO.util.CustomEvent("afterShow",_self);_self.afterShowDelay=new YAHOO.util.CustomEvent("afterShowDelay",_self);_self.afterHidden=new YAHOO.util.CustomEvent("afterHidden",_self);_self.afterHiddenDelay=new YAHOO.util.CustomEvent("afterHiddenDelay",_self);_self.init=function(oConfig){if(isInited)return false;config=YL.merge(defConfig,oConfig);_self.config=config;if(!config.targetEl){dTarget=get(config.targetId);}else{dTarget=config.targetEl;}
dPosition=config.positionId?get(config.positionId):false;dContent=get(config.contentId);YUE.on(dTarget,"mouseover",_self.showDelay);YUE.on(dTarget,"mouseout",_self.hiddenDelay);YUE.on(dContent,"mouseout",_self.hiddenDelay);YUE.on(dTarget,"mouseover",function(){canClose=false;});YUE.on(dContent,"mouseover",function(){canClose=false;});YUE.on(dTarget,"mouseout",function(){canClose=true;});YUE.on(dContent,"mouseout",function(){canClose=true;});if(config.needMask){iframeMask=document.createElement("iframe");iframeMask.className=config.maskIframeClassName;iframeMask.style.display="none";if(YAHOO.env.ua.ie===6&&location.protocol=="https:"){iframeMask.src=config.iframeMaskSrc;}
iframeMask.style.zIndex=YUD.getStyle(dContent,'zIndex')-1;iframeMask.style.top="0px";iframeMask.style.left="0px";iframeMask.frameBorder=0;dContent.parentNode.appendChild(iframeMask);}
var closeBtns=config.closeBtnClass&&YUD.getElementsByClassName(config.closeBtnClass,"*",dContent);if(closeBtns){YUE.on(closeBtns,"click",function(){canClose=true;_self.hiddenDirectly();});}
return _self;};_self._onDContentMouseOver=function(e){if(!dTarget||dTarget==undefined){return;}
_self.afterShowDelay.fire(dTarget);if(delayTimer){clearTimeout(delayTimer);}
delayTimer=setTimeout(function(){_self.showDirectly();},config.showDelayTime);};_self.showDelay=function(e){YUE.on(dContent,"mouseover",_self._onDContentMouseOver);if(dTarget!=this){canClose=true;_self.hiddenDirectly();}
dTarget=this;_self.afterShowDelay.fire(dTarget);if(delayTimer){clearTimeout(delayTimer);}
delayTimer=setTimeout(function(){_self.showDirectly();},config.showDelayTime);};_self.showDirectly=function(){if(contentShowed||holded){return;}
dContent.style.visibility='hidden';dContent.style.display="";if(config.needXY){var xy=YUD.getXY(dPosition||dTarget);parsePos(dTarget,config.excursion);xy[0]+=config.excursion[0];xy[1]+=config.excursion[1];}
dContent.style.visibility='visible';dContent.style.display='';if(config.needXY){YUD.setXY(dContent,xy);}
_self.afterShow.fire(dTarget);contentShowed=true;if(config.needMask){iframeMask.style.display="";iframeMask.style.width=dContent.offsetWidth+"px";iframeMask.style.height=dContent.offsetHeight+"px";if(config.needXY){YUD.setXY(iframeMask,xy);}
iframeMask.style.visibility="visible";}};_self.hiddenDelay=function(e){_self.afterHiddenDelay.fire();if(holded==true){return;}
if(delayTimer){clearTimeout(delayTimer);}
delayTimer=setTimeout(_self.hiddenDirectly,config.hiddenDelayTime);};_self.hiddenDirectly=function(){contentShowed=false;if(dContent.style.display=="none")return;YUE.removeListener(dContent,'mouseover',_self._onDContentMouseOver);if(!canClose){return false;}
_self.afterHidden.fire();if(dContent){dContent.style.display="none";}
if(config.needMask){iframeMask.style.display="none";}};_self.getContent=function(){return dContent||null;};var parsePos=function(dTarget,aPos){if(typeof(aPos[0])=='string'){if(aPos[0]=='auto'){(isContentOverflow())?aPos[0]='right':aPos[0]='left';}
switch(aPos[0]){case'center':aPos[0]=parseInt(dPosition?(dPosition.offsetWidth-dContent.offsetWidth)/2:(dTarget.offsetWidth-dContent.offsetWidth)/2);break;case'right':aPos[0]=((dPosition?dPosition.offsetWidth:dTarget.offsetWidth)-dContent.offsetWidth);break;default:aPos[0]=0;}}
if(typeof(aPos[1])=='string'){switch(aPos[1]){case'center':aPos[1]=parseInt(dPosition?(dPosition.offsetHeight-dContent.offsetHeight)/2:(dTarget.offsetHeight-dContent.offsetHeight)/2);break;case'bottom':aPos[1]=dPosition?dPosition.offsetHeight:dTarget.offsetHeight;break;default:aPos[1]=0;}}
return aPos;};var isContentOverflow=function(){return document.body.offsetWidth<(YUD.getX(dPosition||dTarget)+dContent.offsetWidth);};}
AE.namespace('widget').overShow=OverShow;}());;
;(function(){var LocalStorage=AE.namespace('app').LocalStorage={_get:function(){},_set:function(){},_remove:function(){},_initUserData:function(){if(!this._elUserData){this._elUserData=document.createElement('style');this._elUserData.style.display='none';this._elUserData.style.behavior='url("#default#userData")';this._elUserData.id='AeAppLocalStorageUserDataWrapper';this._elHead.appendChild(this._elUserData);this._elUserData.expires=new Date(2019,0,1,7,59,59).toUTCString();this._elUserData.load('oXMLBranch');}},_detect:function(){if(window.localStorage){this._useLocalStorage();}else if(window.globalStorage){this._useGlobalStorage();}else if(window.ActiveXObject){this._elHead=document.getElementsByTagName('head')[0];this._elHead.id='htmlheadtag';YUE.onAvailable('htmlheadtag',function(){this._initUserData();this._setUserData('_test','test');if(this._getUserData('_test','test')==='test'){this._removeUserData('_test','test');this._useUserData();}else{this._elUserData=null;this._useCookie();}},null,this,true);}else{this._useCookie();}},_setLocalStorage:function(name,value){window.localStorage.setItem(name,value);},_getLocalStorage:function(name){return window.localStorage.getItem(name);},_removeLocalStorage:function(name){window.localStorage.removeItem(name);},_setGlobalStorage:function(name,value){window.globalStorage[document.domain][name]=value;},_getGlobalStorage:function(name){var res=window.globalStorage[document.domain][name].value;if(isNaN(res)){return null;}else{return res;}},_removeGlobalStorage:function(name){window.globalStorage[document.domain][name]=null;},_setUserData:function(name,value){this._elUserData.setAttribute(name,value);this._elUserData.save('oXMLBranch');},_getUserData:function(name){return this._elUserData.getAttribute(name);},_removeUserData:function(name){this._elUserData.removeAttribute(name);this._elUserData.save('oXMLBranch');},_setCookie:function(name,value){var str,obj,YLJ=YAHOO.lang.JSON;str=AE.util.getCookie('localstorage');obj=YLJ.parse(str||'{}');obj[name]=value;str=YLJ.stringify(obj);AE.util.setCookie('localstorage',str,1);},_getCookie:function(name){var str,obj,value,YLJ=YAHOO.lang.JSON,lang=YAHOO.lang;str=AE.util.getCookie('localstorage');obj=YLJ.parse(str||'{}');value=obj[name];if(lang.isUndefined(value)){value=null;}
return value;},_removeCookie:function(name){var str,obj,YLJ=YAHOO.lang.JSON;str=AE.util.getCookie('localstorage');obj=YLJ.parse(str||'{}');delete obj[name];str=YLJ.stringify(obj);if(str==='{}'){AE.util.removeCookie('localstorage');}else{AE.util.setCookie('localstorage',str,1);}},_useLocalStorage:function(){this._support='localStorage';this._set=this._setLocalStorage;this._get=this._getLocalStorage;this._remove=this._removeLocalStorage;},_useGlobalStorage:function(){this._support='globalStorage';this._set=this._setGlobalStorage;this._get=this._getGlobalStorage;this._remove=this._removeGlobalStorage;},_useUserData:function(){this._support='userData';this._set=this._setUserData;this._get=this._getUserData;this._remove=this._removeUserData;},_useCookie:function(){this._support='cookie';if(!YAHOO.lang.JSON){this._importJSON();}
this._set=this._setCookie;this._get=this._getCookie;this._remove=this._removeCookie;},_switch:function(type){switch(type){case'localStorage':this._useLocalStorage();break;case'globalStorage':this._useGlobalStorage();break;case'userData':if(this._elUserData){this._useUserData();}else{YUE.onAvailable('htmlheadtag',function(){this._initUserData();this._useUserData();},null,this,true);}
break;case'cookie':this._useCookie();break;}},_importJSON:function(){(function(){var l=YAHOO.lang,isFunction=l.isFunction,isObject=l.isObject,isArray=l.isArray,_toStr=Object.prototype.toString,Native=(YAHOO.env.ua.caja?window:this).JSON,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_UNSAFE=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},UNDEFINED="undefined",OBJECT="object",NULL="null",STRING="string",NUMBER="number",BOOLEAN="boolean",DATE="date",_allowable={"undefined":UNDEFINED,"string":STRING,"[object String]":STRING,"number":NUMBER,"[object Number]":NUMBER,"boolean":BOOLEAN,"[object Boolean]":BOOLEAN,"[object Date]":DATE,"[object RegExp]":OBJECT},EMPTY="",OPEN_O="{",CLOSE_O="}",OPEN_A="[",CLOSE_A="]",COMMA=",",COMMA_CR=",\n",CR="\n",COLON=":",COLON_SP=": ",QUOTE='"';Native=_toStr.call(Native)==="[object JSON]"&&Native;function _char(c){if(!_CHARS[c]){_CHARS[c]="\\u"+("0000"+(+(c.charCodeAt(0))).toString(16)).slice(-4);}return _CHARS[c];}function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==="object"){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k];}else{value[k]=v;}}}}return reviver.call(o,key,value);};return typeof reviver==="function"?walk({"":data},""):data;}function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char);}function _isSafe(str){return l.isString(str)&&_UNSAFE.test(str.replace(_ESCAPES,"@").replace(_VALUES,"]").replace(_BRACKETS,""));}function _parse(s,reviver){s=_prepare(s);if(_isSafe(s)){return _revive(eval("("+s+")"),reviver);}throw new SyntaxError("JSON.parse");}function _type(o){var t=typeof o;return _allowable[t]||_allowable[_toStr.call(o)]||(t===OBJECT?(o?OBJECT:NULL):UNDEFINED);}function _string(s){return QUOTE+s.replace(_SPECIAL_CHARS,_char)+QUOTE;}function _indent(s,space){return s.replace(/^/gm,space);}function _stringify(o,w,space){if(o===undefined){return undefined;}var replacer=isFunction(w)?w:null,format=_toStr.call(space).match(/String|Number/)||[],_date=YAHOO.lang.JSON.dateToString,stack=[],tmp,i,len;if(replacer||!isArray(w)){w=undefined;}if(w){tmp={};for(i=0,len=w.length;i<len;++i){tmp[w[i]]=true;}w=tmp;}space=format[0]==="Number"?new Array(Math.min(Math.max(0,space),10)+1).join(" "):(space||EMPTY).slice(0,10);function _serialize(h,key){var value=h[key],t=_type(value),a=[],colon=space?COLON_SP:COLON,arr,i,keys,k,v;if(isObject(value)&&isFunction(value.toJSON)){value=value.toJSON(key);}else{if(t===DATE){value=_date(value);}}if(isFunction(replacer)){value=replacer.call(h,key,value);}if(value!==h[key]){t=_type(value);}switch(t){case DATE:case OBJECT:break;case STRING:return _string(value);case NUMBER:return isFinite(value)?value+EMPTY:NULL;case BOOLEAN:return value+EMPTY;case NULL:return NULL;default:return undefined;}for(i=stack.length-1;i>=0;--i){if(stack[i]===value){throw new Error("JSON.stringify. Cyclical reference");}}arr=isArray(value);stack.push(value);if(arr){for(i=value.length-1;i>=0;--i){a[i]=_serialize(value,i)||NULL;}}else{keys=w||value;i=0;for(k in keys){if(keys.hasOwnProperty(k)){v=_serialize(value,k);if(v){a[i++]=_string(k)+colon+v;}}}}stack.pop();if(space&&a.length){return arr?OPEN_A+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_A:OPEN_O+CR+_indent(a.join(COMMA_CR),space)+CR+CLOSE_O;}else{return arr?OPEN_A+a.join(COMMA)+CLOSE_A:OPEN_O+a.join(COMMA)+CLOSE_O;}}return _serialize({"":o},"");}YAHOO.lang.JSON={useNativeParse:!!Native,useNativeStringify:!!Native,isSafe:function(s){return _isSafe(_prepare(s));},parse:function(s,reviver){return Native&&YAHOO.lang.JSON.useNativeParse?Native.parse(s,reviver):_parse(s,reviver);},stringify:function(o,w,space){return Native&&YAHOO.lang.JSON.useNativeStringify?Native.stringify(o,w,space):_stringify(o,w,space);},dateToString:function(d){function _zeroPad(v){return v<10?"0"+v:v;}return d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+COLON+_zeroPad(d.getUTCMinutes())+COLON+_zeroPad(d.getUTCSeconds())+"Z";},stringToDate:function(str){var m=str.match(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{3}))?Z$/);if(m){var d=new Date();d.setUTCFullYear(m[1],m[2]-1,m[3]);d.setUTCHours(m[4],m[5],m[6],(m[7]||0));return d;}return str;}};YAHOO.lang.JSON.isValid=YAHOO.lang.JSON.isSafe;})();YAHOO.register("json",YAHOO.lang.JSON,{version:"2.8.2r1",build:"7"});},_init:function(){this._detect();},get:function(name,options){var converter,data,lang=YAHOO.lang;;if(lang.isFunction(options)){converter=options;options={};}else if(lang.isObject(options)){converter=options.converter;}else{options={};}
if(!lang.isString(name)||name===''){throw new TypeError('Cookie.get(): Cookie name must be a non-empty string.');}
data=this._get(name);if(!lang.isFunction(converter)){return data;}else{return converter(data);}},set:function(name,value){var lang=YAHOO.lang;if(!lang.isString(name)){throw new TypeError('name must be a string.');}
if(lang.isUndefined(value)){throw new TypeError('Value cannot be undefined.');}
this._set(name,value);},remove:function(name,options){if(!YL.isString(name)||name===''){throw new TypeError('name must be a non-empty string.');}
this._remove(name);},getSupport:function(){return this._support;}};LocalStorage._init();}());;

AE.namespace('AE.app');if(!AE.app.dialog){AE.app.dialog=function(){this.config={tempContentId:'',closeClassName:'',contentClassName:'',contentTop:null,fixed:false,maskColor:'#666',maskDivId:'ae-mask',zIndex:1024,title:'title',contentHTML:'',callback:null,isEscUsed:true};this.cache={isIE6:false,contentEl:null};};AE.app.dialog.prototype={init:function(customConfig){var config=YL.merge(this.config,customConfig||{});var _self=this;_self.config=config;var contentEl;if(AE.bom.isIE6){this.cache.isIE6=true;}
contentEl=_self._addContentDom();this.cache.contentEl=contentEl;_self._appendTitle(contentEl);_self._appendContent(contentEl);_self._run({contentEl:contentEl});_self._bindActions({contentEl:contentEl});},_appendTitle:function(contentEl){if(this.config.title){var titleEl=document.createElement('h3');var titleTextEl=document.createTextNode(this.config.title);titleEl.appendChild(titleTextEl);contentEl.appendChild(titleEl);}},_appendContent:function(contentEl){var contentTempEl=document.createElement('div');contentTempEl.innerHTML=this.config.contentHTML;contentEl.appendChild(contentTempEl);},_bindActions:function(args){var _self=this;var config=_self.config;var contentEl=args.contentEl;YUE.on(window,'resize',_self._onResize,{_self:_self,contentEl:contentEl});var closeEl=YUD.getElementsByClassName(config.closeClassName,'a',contentEl)[0];YUE.on(closeEl,'click',_self._close,{_self:_self});YUE.on(document,'keyup',_self._onKeyup,{_self:_self,config:config,contentEl:contentEl});YUE.on(document,'keydown',_self._onKeydown,{_self:_self,config:config,contentEl:contentEl});if(_self.cache.isIE6&&_self.config.fixed){YUE.on(window,'scroll',_self._scroll,{_self:_self,config:config,contentEl:contentEl});}},_onKeydown:function(ev,args){var _self=args._self;var config=_self.config;var contentEl=args.contentEl;},_onKeyup:function(ev,args){var _self=args._self;var config=_self.config;var contentEl=args.contentEl;if(ev.keyCode==27&&config.isEscUsed){_self.close();}},_addContentDom:function(){var _self=this;var config=_self.config;var tempContentEl=YUD.get(config.tempContentId);tempContentEl.style.zIndex=(config.zIndex+1);tempContentEl.style.display='block';return tempContentEl;},_scroll:function(ev,args){var _self=args._self;var config=args.config;var contentEl=args.contentEl;var top=_self._computeStyleTop({contentEl:args.contentEl});contentEl.style.top=top+'px';},_close:function(ev,args){var _self=args._self;var config=_self.config;var maskEl=YUD.get(config.maskDivId);if(maskEl){maskEl.parentNode.removeChild(maskEl);var contentEl;var oSrcElement=ev.target||ev.srcElement;YUE.removeListener(oSrcElement,'click',_self._close);contentEl=oSrcElement.parentNode;contentEl.style.display='none';contentEl.innerHTML='<a href="#" class="'+_self.config.closeClassName+'"></a>';YUE.removeListener(document,'keyup',_self._onKeyup);}
YUE.removeListener(window,'resize',_self._onResize);if(_self.config.callback){_self.config.callback();}
YUE.stopEvent(ev);},_computeStyleTop:function(args){var _self=this;var contentEl=args.contentEl,styleTop=null;if(!!_self.config.contentTop){styleTop=_self.config.contentTop+'px';}else{styleTop=(document.documentElement.clientHeight-contentEl.offsetHeight)/2;if(_self.cache.isIE6){styleTop=styleTop+YUD.getDocumentScrollTop();}}
return parseInt(styleTop,10);},_adjustPosition:function(args){var _self=args._self;var config=args.config;var contentEl=args.contentEl;var maskElWidth=parseFloat(_self._getComputedStyle(contentEl,'width'));if(!isNaN(maskElWidth)){contentEl.style.left=parseInt((document.body.clientWidth-maskElWidth)/2,10)+'px';}
var top=_self._computeStyleTop({contentEl:args.contentEl});contentEl.style.top=top+'px';},_run:function(args){var _self=this;var config=_self.config;var maskEl;maskEl=document.createElement('div');maskEl.id=config.maskDivId;maskEl.style.opacity=0.5;maskEl.style.width=YUD.getDocumentWidth()+'px';maskEl.style.height=document.documentElement.clientHeight+'px';maskEl.style.filter='alpha(opacity = 50)';maskEl.style.zIndex=config.zIndex;if(_self.cache.isIE6){maskEl.style.height=YUD.getDocumentHeight()+'px';var iframe=document.createElement('iframe');iframe.style.position='absolute';iframe.style.top=0;iframe.style.left=0;iframe.style.opacity=0.5;iframe.src='https://ipaystyle.alibaba.com/js/5v/util/blank.html';iframe.style.width=YUD.getDocumentWidth()+'px';iframe.style.height=YUD.getDocumentHeight()+'px';iframe.style.backgroundColor=config.maskColor;iframe.style.filter='alpha(opacity = 50)';iframe.style.zIndex=config.zIndex;maskEl.appendChild(iframe);}
document.body.appendChild(maskEl);_self._adjustPosition({_self:_self,config:config,contentEl:args.contentEl});YUD.getElementsByClassName(config.closeClassName,'a',args.contentEl)[0].focus();},_onResize:function(ev,args){var _self=args._self;var config=_self.config;var maskEl=YUD.get(config.maskDivId);var contentEl=args.contentEl;if(contentEl&&maskEl){maskEl.style.width='0';_self._adjustPosition({_self:_self,config:config,contentEl:args.contentEl});maskEl.style.width=document.documentElement.scrollWidth+'px';if(_self.cache.isIE6){maskEl.style.height=YUD.getDocumentHeight()+'px';}
else{maskEl.style.height=document.documentElement.clientHeight+'px';}}},_getComputedStyle:function(el,style){var result='';if(window.getComputedStyle){result=window.getComputedStyle(el,null)[style];}
else{result=el.currentStyle[style];}
return result;},close:function(){var config=this.config;var closeEl=YUD.getElementsByClassName(config.closeClassName,'a',this.cache.contentEl)[0];if(document.createEvent){var evt=document.createEvent('MouseEvents');evt.initEvent('click',true,true);closeEl.dispatchEvent(evt);}
else{closeEl.click();}}};};

(function(){function insertAfter(node,referenceNode){referenceNode.parentNode.insertBefore(node,referenceNode.nextSibling);}
function formatPrice(num,prec){if(prec>=0){num=parseFloat(num).toFixed(prec);}
var str=num.toString();var dotIndex=str.indexOf('.');var prefix=str.substring(0,dotIndex);var suffix=str.substring(dotIndex,str.length);return formatInteger(prefix)+suffix;}
function formatInteger(num){num=num+'';var re=/(-?\d+)(\d{3})/;while(re.test(num)){num=num.replace(re,"$1,$2");}
return num;}
function restorePrice(str){var parts=str.split(',');if(parts){return parts.join('');}
return str;}
function getParamsByRel(rel){var obj=null;eval('obj = {'+rel.replace(/;$/,'').replace(/;/ig,',')+'}');return obj;}
function getValueOfRadio(name){var radios=document.getElementsByName(name);for(var i=0;i<radios.length;i++){var radio=radios[i];if(radio.checked){return radio.value;}}}
function setRadioByValue(name,value){var radios=document.getElementsByName(name);for(var i=0;i<radios.length;i++){var radio=radios[i];if(radio.value==value){radio.checked=true;break;}}}
function getScrollbarPos(){var offset={x:0,y:0};var scrollX1,scrollX2,scrollY1,scrollY2;if(document.documentElement){scrollX1=document.documentElement.scrollLeft||0;scrollY1=document.documentElement.scrollTop||0;}
if(document.body){scrollX2=document.body.scrollLeft||0;scrollY2=document.body.scrollTop||0;}
var scrollX3=window.scrollX||0;var scrollY3=window.scrollY||0;offset.x=Math.max(scrollX1,Math.max(scrollX2,scrollX3));offset.y=Math.max(scrollY1,Math.max(scrollY2,scrollY3));return offset;}
function getCumulativeOffset(element){var offset={left:0,top:0};do{offset.left+=element.offsetLeft||0;offset.top+=element.offsetTop||0;element=element.offsetParent;}
while(element);return offset;}
function loadFreight(productId,freightUrl,proxyDomain,countryCode,quantity,userType,onReady,onError,args,productStandard){var url=runParams.countryServer+'/cross-domain/freight/index.html?f=d&productid='+productId+'&country='+countryCode+'&count='+quantity+'&userType='+userType;if(productStandard&&productStandard!==''){url+='&productStandard='+productStandard;}
if(window.location.search){var P4PStatus='';P4PStatus=window.location.search.replace(/\?/,'');url+='&'+P4PStatus;}
YAHOO.util.Connect.asyncRequest("GET",url,{cache:false,timeout:5000,failure:function(){if(onError){onError(args);}},success:function(data){xmlDoc=data.responseXML;onReady(xmlDoc,args);}});}
function showQuantityNumberAlert(element){element.innerHTML='<div class="msg-box board alertB">The quantity must be a number.</div><div class="msg-arrow"></div>';}
function showQuantityMinOrderAlert(element,minQuantity,unit){unit=unit.trim();if(parseInt(minQuantity,10)!==1){unit+='s';}
element.innerHTML='<div class="msg-box board alertB">The minimum order for this product is '+minQuantity+' '+unit.toLowerCase()+'</div><div class="msg-arrow"></div>';}
function showNoDeliverAlert(element){element.innerHTML='<div class="msg-box board alertB">This Supplier/Shipping Company does not deliver to your selected Country/Region.</div>';}
function showLoadFreightError(element){element.innerHTML='<div class="msg-box board errorB">Server Error!</div>';}
function getFullCompanyName(companyName){switch(companyName){case"CPAM":companyName="China Post Air Mail";break;case"CPAP":companyName="China Post Air Parcel";break;case"HKPAM":companyName="Hongkong Post Air Mail";break;case"HKPAP":companyName="Hongkong Post Air Parcel";break;case"UPS":companyName="UPS Express Saver";break;case"UPSE":companyName="UPS Expedited";break;case"GELS_EXPEDITED":companyName="China Warehouse";break;case"GELS_SAVER":companyName="China Warehouse";break;case"GELS_STANDARD":companyName="China Warehouse";break;case"EMS_SH_ZX_US":companyName="DHL Global Mail";break;case"EMS_ZX_ZX_US":companyName="ePacket";break;}
return companyName;}
function getLogoMap(imageDir){var logoMap={EMS_SH_ZX_US:getLogoElement('DHL Global Mail','',''),EMS_ZX_ZX_US:getLogoElement('ePacket','',''),EMS:getLogoElement('EMS','icon-ems.jpg',imageDir),DHL:getLogoElement('DHL','icon-dhl.jpg',imageDir),UPS:getLogoElement('UPS Express Saver&#8482;','icon-ups-s.gif',imageDir),UPSE:getLogoElement('UPS Expedited&#8482;','icon-ups-e.gif',imageDir),FEDEX:getLogoElement('FEDEX','icon-fedex.jpg',imageDir),TNT:getLogoElement('TNT','icon-tnt.jpg',imageDir),SF:getLogoElement('SF','icon-express.jpg',imageDir),CPAM:getLogoElement('China Post Air Mail','china-post-air-mail.jpg',imageDir),CPAP:getLogoElement('China Post Air Parcel','china-post-air-parcel.jpg',imageDir),HKPAM:getLogoElement('Hongkong Post Air Mail','hk-air-mail.jpg',imageDir),HKPAP:getLogoElement('Hongkong Post Air Parcel','hk-air-pracel.jpg',imageDir)};return logoMap;}
function getLogoElement(name,image,imageDir){if(image&&imageDir){return'<img src="'+imageDir+'/wimg/buyer/single/'+image+'" alt="'+name+'" title="'+name+'"/>';}
else{return name;}}
function getPaymentConfig(){var oSlideEl=get('payment-slide');if(oSlideEl&&typeof window['INF']['PAYMENT_TAB_CONFIG']=='undefined'){var aPaymentConfig=[0,0,0,0,0,0,0,0,0,0,0,0];var oPaymentLiEl=oSlideEl.getElementsByTagName('li');var oPaymentLiLength=oPaymentLiEl.length;for(var i=0;i<oPaymentLiLength;i++){var oLiEl=oPaymentLiEl[i];switch(oLiEl.className){case'pm-type-visa-s':aPaymentConfig[0]=1;break;case'pm-type-mastercard-s':aPaymentConfig[1]=1;break;case'pm-type-paypal-s':aPaymentConfig[2]=1;break;case'pm-type-moneybookers-s':aPaymentConfig[3]=1;break;case'pm-type-maestro-s':aPaymentConfig[4]=1;break;case'pm-type-solo-s':aPaymentConfig[5]=1;break;case'pm-type-cartebleue-s':aPaymentConfig[6]=1;break;case'pm-type-4b-s':aPaymentConfig[7]=1;break;case'pm-type-euro6000-s':aPaymentConfig[8]=1;break;case'pm-type-cartasi-s':aPaymentConfig[9]=1;break;case'pm-type-postepay-s':aPaymentConfig[10]=1;break;case'pm-type-banktransfer-s':aPaymentConfig[11]=1;break;case'pm-type-westernUnion-s':aPaymentConfig[12]=1;break;}
window['INF']['PAYMENT_TAB_CONFIG']=aPaymentConfig;}}else{window['INF']['PAYMENT_TAB_CONFIG']=[1,1,0,1,1,1,1,1,1,1,1,1,1];}
return window['INF']['PAYMENT_TAB_CONFIG'];}
window['UTIL']={};window['UTIL']['insertAfter']=insertAfter;window['UTIL']['formatPrice']=formatPrice;window['UTIL']['restorePrice']=restorePrice;window['UTIL']['getParamsByRel']=getParamsByRel;window['UTIL']['getValueOfRadio']=getValueOfRadio;window['UTIL']['setRadioByValue']=setRadioByValue;window['UTIL']['getCumulativeOffset']=getCumulativeOffset;window['UTIL']['loadFreight']=loadFreight;window['UTIL']['showQuantityNumberAlert']=showQuantityNumberAlert;window['UTIL']['showQuantityMinOrderAlert']=showQuantityMinOrderAlert;window['UTIL']['showNoDeliverAlert']=showNoDeliverAlert;window['UTIL']['showLoadFreightError']=showLoadFreightError;window['UTIL']['getFullCompanyName']=getFullCompanyName;window['UTIL']['getLogoMap']=getLogoMap;window['UTIL']['getPaymentConfig']=getPaymentConfig;window['UTIL']['WS_EXPEDITED_NAME']='GELS_EXPEDITED';window['UTIL']['WS_STANDARD_NAME']='GELS_STANDARD';window['UTIL']['WS_SAVER_NAME']='GELS_SAVER';})();(function(){var PRODUCT_ID=null,FREIGHT_URL=null,PROXY_DOMAIN=null,SHIPPING_COMPANY_NAME=null,SHIPPING_DIALOG_MASK=null;var varCountryCode,varUserType;var frmBuyNow,selStandard,txtQuantity,msgQuantity,lblUnit,pnlShippingCost,lnkShipping,dlgShipping,pnlTotalPrice,btnBuyNow,pnlProductColor,pnlProductSize,msgProductColor,msgProductSize,msgStockpile;var fakeSelCountry,fakeSelCountryStructure;var pnlPriceDetailClassName;var hidCountryCode,hidShippingCompany,hidProductColor,hidProductSize,hidProductStockpile;var shippingSelectErrorId='';var directFreightWrapper;var confirmDirectFreightWrapper;var minDSInput;var checkedDSInput;var loadTransporterTime=0;var dialogShippingCountryName='';var dialogShippingCountryCode='';function init(args){PRODUCT_ID=args.productId;FREIGHT_URL=args.freightUrl;PROXY_DOMAIN=args.proxyDomain;SHIPPING_COMPANY_NAME=args.shippingCompanyName;frmBuyNow=get(args.frmBuyNowId);selStandard=get(args.selStandardId);hidProductStockpile=args.hidProductStockpile;msgStockpile=get(args.msgStockpileId);txtQuantity=get(args.txtQuantityId);msgQuantity=get(args.msgQuantityId);bntQuantityCalculate=get(args.bntQuantityCalculateId);lblUnit=get(args.lblUnitId);pnlShippingCost=get(args.pnlShippingCostId);lnkShipping=get(args.lnkShippingId);dlgShippingId=args.dlgShippingId;dlgShippingCompanyId=args.dlgShippingCompanyId;pnlTotalPrice=get(args.pnlTotalPriceId);btnBuyNow=get(args.btnBuyNow);pnlProductColor=get(args.pnlProductColor);pnlProductSize=get(args.pnlProductSize);hidProductColor=get(args.hidProductColor);hidProductSize=get(args.hidProductSize);msgProductColor=get(args.msgProductColor);msgProductSize=get(args.msgProductSize);fakeSelCountry=window['UTIL']['countryContainer'];fakeSelCountryStructure={title:fakeSelCountryTitle,options:fakeSelCountry.getElementsByTagName('a')};var hiddenCountryCode=args.countryCode;if(hiddenCountryCode.toLowerCase()=='cn'||hiddenCountryCode=='unknowCountry'){hiddenCountryCode='us';}
hiddenCountryCode=hiddenCountryCode.toLowerCase();var fakeSelCountryTitle=document.createElement('div');fakeSelCountryTitle.className='list-title';fakeSelCountryTitle.innerHTML='<span class="css_flag css_'+hiddenCountryCode+'">'+getCountryNameByCode(fakeSelCountryStructure,hiddenCountryCode)+'</span>';fakeSelCountryStructure.title=fakeSelCountryTitle;shippingSelectErrorId=args.shippingSelectErrorId;varCountryCode=getInitCountryCode(fakeSelCountryStructure,args.countryCode);varUserType=args.userType;pnlPriceDetailClassName=args.pnlPriceDetailClassName;hidCountryCode=get(args.hidCountryCodeId);hidShippingCompany=get(args.hidShippingCompanyId);run();YUE.onDOMReady(function(){insertLoginWrapper();});}
function run(){if(txtQuantity){setStandardIndex(0);setQuantity(getMinQuantity());var quantity=getQuantity();var countryCode=getCountryCode(fakeSelCountryStructure);var userType=getUserType();var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,changeShipping,null,{onLoaded:onShippingLoaded},productStandard);}
if(hidProductColor){hidProductColor.value='';if(pnlProductColor){var colorItems=pnlProductColor.getElementsByTagName('a');if(colorItems.length>0){YUE.on(colorItems,'click',function(ev){YUE.stopEvent(ev);YUD.removeClass(colorItems,'actived');msgProductColor.style.display='none';hidProductColor.value=this.rel;this.className='actived';this.blur();});}}}
if(hidProductSize){hidProductSize.value='';if(pnlProductSize){var sizeItems=pnlProductSize.getElementsByTagName('a');if(sizeItems.length>0){YUE.on(sizeItems,'click',function(ev){YUE.stopEvent(ev);YUD.removeClass(sizeItems,'actived');msgProductSize.style.display='none';hidProductSize.value=this.rel;this.className='actived';this.blur();});}}}}
function insertLoginWrapper(){if(!get('ws-xman-temp-mask-content')){var loginHTML=document.createElement('div');var loginClose=document.createElement('a');var body=document.getElementsByTagName('body')[0];loginHTML.setAttribute('id','ws-xman-temp-mask-content');YUD.addClass(loginHTML,'ws-xman-mask-content');YUD.setStyle(loginHTML,'display','none');loginHTML.appendChild(loginClose);YUD.addClass(loginClose,'mask-close');loginClose.setAttribute('href','#');body.appendChild(loginHTML);}}
function showSafeTip(){var beforeNode=get('inf-add-to-cart').parentNode.parentNode.parentNode;var cont='<div id="safe-tip-wrapper" class="clearfix"><div class="tip-cont"><p>Save on shipping when you buy more than one item!</p></div><a href="javascript:;" title="close" class="safe-tip-close">close</a></div>';var insNode=document.createElement('div');insNode.innerHTML=cont;YUD.insertAfter(insNode,beforeNode);var contWrapper=get('safe-tip-wrapper');var btnTipsClose=YUD.getElementsByClassName('safe-tip-close','*',contWrapper)[0];YUE.on(btnTipsClose,'click',function(){YUD.setStyle(contWrapper,'display','none');window.localStorage['hideSafeTips']='YES';});}
function isShowParcelTips(countryCode){var angryCountry='AR-BR-CL-CO-CZ-DE-FR-FX-GB-IE-IN-IT-KZ-MX-MY-NG-NL-RU-SA-UK-VE-BY-EG-GR';var cc=countryCode||hidCountryCode.value;var countryStr=angryCountry.toLowerCase();cc=cc.toLowerCase();var part=new RegExp(cc);var isShow=part.test(countryStr);if(!isShow){YUD.getElementsByClassName('shipping-parcel-tips','p','shipping-parcel-box',function(){YUD.setStyle(this,'display','none');});}
isShow=false;return isShow;}
function onShippingLoaded(){setStandardIndex(0);YUE.on(selStandard,'change',changeStandard);setQuantity(getMinQuantity());YUE.on(txtQuantity,'keydown',entryQuantity);YUE.on(txtQuantity,'paste',entryQuantity);YUE.on(txtQuantity,'blur',changeQuantity);YUE.on(btnBuyNow,'click',submitForm);if(!get(dlgShippingId)){var shippingDialogEl=document.createElement('div');shippingDialogEl.id=dlgShippingId;shippingDialogEl.className='mask-content';shippingDialogEl.style.display='none';shippingDialogEl.innerHTML='<a href="javascript:void(0);" class="close"></a>';document.body.appendChild(shippingDialogEl);}
if(!get(dlgShippingCompanyId)){var shippingCompanyDialogEl=document.createElement('div');shippingCompanyDialogEl.id=dlgShippingCompanyId;shippingCompanyDialogEl.className='mask-content';shippingCompanyDialogEl.style.display='none';shippingCompanyDialogEl.innerHTML='<a href="javascript:void(0);" class="close"></a>';document.body.appendChild(shippingCompanyDialogEl);}
YUE.on(lnkShipping,'click',showShippingDialog);}
function getValueOfTran(name){if(YUD.getStyle(get('direct-shipping-wrapper'),'display')=='block'){var radios=document.getElementsByName(name);for(var i=0;i<radios.length;i++){var radio=radios[i];if(radio.checked){return radio.value;}}}else if(YUD.getStyle(get('warehouse-shipping-wrapper'),'display')=='block'){return'TAO';}}
function _onWSInputClick(ev,args){var reg=new RegExp('ss-title-checked','g');if(this.checked){var dsTitleEl=get('ds-input').parentNode;this.parentNode.className+=' ss-title-checked';dsTitleEl.className=dsTitleEl.className.replace(reg,'');get('warehouse-shipping-wrapper').style.display='';get('direct-shipping-wrapper').style.display='none';}
else{this.parentNode.className=this.parentNode.className.replace(reg,'');}
var inputElArr=directFreightWrapper.getElementsByTagName('input');var inputElArr2=get('shipping-parcel-bd').getElementsByTagName('input');for(var i=inputElArr.length;i--;){var inputEl=inputElArr[i];inputEl.checked=false;}
for(var j=inputElArr2.length;j--;){var inputEl=inputElArr2[j];inputEl.checked=false;}}
var choiseVal;function getCurrChoise(){var inputWrapper=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));for(var i=0;i<inputWrapper.length;i++){(function(currInput){if(currInput.checked){choiseVal=currInput;}})(inputWrapper[i].getElementsByTagName('input')[0]);}}
function _onDSInputClick(args){var reg=new RegExp('ss-title-checked','g');if(this.checked){var wsTitleEl=get('ws-input').parentNode;this.parentNode.className+=' ss-title-checked';wsTitleEl.className=wsTitleEl.className.replace(reg,'');get('warehouse-shipping-wrapper').style.display='none';get('direct-shipping-wrapper').style.display='';}
else{this.parentNode.className=this.parentNode.className.replace(reg,'');}
var inputElArr=directFreightWrapper.getElementsByTagName('input');for(var i=inputElArr.length;i--;){var inputEl=inputElArr[i];inputEl.disabled='';}
if(!updateShipMethod&&minDSInput){minDSInput.checked=true;}else{if(hidShippingCompany.value!='undefined'){for(var i=0,j=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));i<j.length;i++){var inputValue=j[i].getElementsByTagName('input')[0];if(hidShippingCompany.value==inputValue.value){inputValue.checked=true;switch(inputValue.value){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':if(!isShowParcelTips()){break;}
YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',inputValue.parentNode.parentNode)[0],'display','block');break;default:YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');break;}}}}}
if(typeof choiseVal!='undefined'){choiseVal.checked=true;}
getCurrChoise();}
var tempCountryCode='';function showShippingDialog(){var oShippingDialog=new AE.app.dialog();var html='<div class="inner">'+'<div class="content">'+'<div class="caption caption-selector">Ship my order(s) to </div>'+'<div id="inf-fake-sel-country" class="link-fake-selector" >'+'<div class="list-title">'+'<span class="css_flag css_us">United States</span>'+'</div>'+'</div>'+'<div id="country-container" class="list-container">'+
fakeSelCountry.innerHTML+'</div>'+'<div style="clear:both;"></div>'+'<div class="shipping-service clearfix">'+'<div class="caption" id="choose-shipping-method">Choose Shipping Method</div>'+'<div id="shipping-hd" class="clearfix" style="display:none;">'+'<div class="ss-title" id="ds-title">'+'<input id="ds-input" class="ss-select" name="ss-select" type="radio" /><label for="ds-input">Direct Shipping</label>'+'</div>'+'<div class="ss-title" id="ws-title">'+'<input id="ws-input" class="ss-select" name="ss-select" type="radio" /><label for="ws-input">Fulfillment by AliExpress</label>'+'</div>'+'</div>'+'<div id="shipping-bd" style="display:none;">'+'<div id="direct-shipping-wrapper" style="display:none;">'+'<div id="shipping-info">'+'<ul>'+'<li>Shipping Company:</li>'+'<li>Estimated Delivery Time:</li>'+'<li>Shipping Cost:</li>'+'</ul>'+'</div>'+'<div id="company-item">'+'<ul class="company-item-wrapper"></ul>'+'</div>'+'<div class="ds-intro"></div>'+'<div id="shipping-parcel" style="display:none;">'+'<div id="shipping-or">Or You can use</div>'+'<div id="shipping-parcel-box" class="clearfix">'+'<div id="shipping-parcel-hd"></div>'+'<div id="shipping-parcel-bd"><ul>'+'</ul></div>'+'<p class="shipping-parcel-tips">Air Mail deliveries can\t be tracked and might be delayed</p>'+'</div>'+'</div>'+'</div>'+'<div id="warehouse-shipping-wrapper" style="display:none;">'+'<div class="ws-intro"></div>'+'<div class="caption">Shipping Cost from Warehouse to Your Destination</div>'+'<div id="ws-abroad-price-wrapper">'+'<table id="ws-abroad-price-list">'+'<thead>'+'<tr>'+'<th>Shipping Service</th>'+'<td class="tao-shipping"><strong>Estimated Shipping Cost</strong><br /><span class="tao-shipping-tip">(The actual shipping cost you have to pay may be different.)</span></td>'+'<td>Estimated Delivery Time</td>'+'</tr>'+'</thead>'+'<tbody>'+'<tr>'+'<th>Saver</th>'+'<td><span class="ws-price"></span>(estimated)</td>'+'<td><span class="ws-price-day"></span>Days</td>'+'</tr>'+'<tr>'+'<th>Standard</th>'+'<td><span class="ws-price"></span>(estimated)</td>'+'<td><span class="ws-price-day"></span>Days</td>'+'</tr>'+'<tr>'+'<th>Expedited</th>'+'<td><span class="ws-price"></span>(estimated)</td>'+'<td><span class="ws-price-day"></span>Days</td>'+'</tr>'+'</tbody>'+'</table>'+'</div>'+'</div>'+'</div>'+'</div>'+'<div id="'+shippingSelectErrorId+'" style="display:none;"></div>'+'<div class="action" style="display:none;">'+'<a rel="nofollow" id="inf-btn-shipping-ok"><img src="http://img.alibaba.com/images/eng/wholesale/icon/ok.gif" alt="OK" /></a>'+'</div>'+'</div>'+'<div id="ss-loading"><img alt="loading" title="loading" src="http://img.alibaba.com/images/eng/wholesale/icon/loading-middle.gif" width="32px" height="32px" /></div>'+'</div>';var tempCountryName=get('inf-hid-shipping-company').value;var quantity=getQuantity();var transporter=getTransporter();var userType=getUserType();var countryCode=getCountryCode();oShippingDialog.init({tempContentId:dlgShippingId,closeClassName:'close',contentTop:70,maskColor:'#666',maskDivId:'ae-mask',zIndex:1024,title:'',contentHTML:html,callback:function(){loadTransporterTime=0;tempCountryCode=dialogShippingCountryCode;get('inf-hid-shipping-company').value=tempCountryName;}});YUE.on(get('ws-input'),'click',_onWSInputClick,{});YUE.on(get('ds-input'),'click',_onDSInputClick,{});YUE.on(get('inf-btn-shipping-ok'),'click',updateShipping,{show:oShippingDialog});directFreightWrapper=YUD.getElementsByClassName('company-item-wrapper','ul',get('direct-shipping-wrapper'))[0];var countrySelector=(new AE.app.falls()).init({selector:get('inf-fake-sel-country'),selectorTitleClass:'list-title',fromFirstChar:true,contentIgnoreItemClass:'ignore',content:get('country-container'),contentItemCurrentClass:'current',isKillTheSame:false});countrySelector.afterSelect.subscribe(function(e,args){var countryCode=args[1].item.firstChild.className.replace('css_flag css_','').toUpperCase();dialogShippingCountryName=args[1].item.firstChild.innerHTML;dialogShippingCountryCode=countryCode;var quantity=getQuantity();var userType=getUserType();if(countryCode=="BR"){YUD.setStyle(get("country-attention-msg"),"display","block");}else{YUD.setStyle(get("country-attention-msg"),"display","none");}
hideWrapper();showLoadingImg();hidShippingCompany.value='undefined';var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,loadTransporter,null,{defaultTransporter:undefined,countryCode:countryCode},productStandard);});fakeSelCountryStructure={title:YUD.getElementsByClassName('list-title','*',get('inf-fake-sel-country'))[0],options:fakeSelCountry.getElementsByTagName('a')};var hiddenCountryCode=get('inf-hid-country-code').value;if(hiddenCountryCode.toLowerCase()=='cn'||hiddenCountryCode=='unknowCountry'){hiddenCountryCode='us';}
hiddenCountryCode=hiddenCountryCode.toLowerCase();fakeSelCountryStructure.title.getElementsByTagName('span')[0].className='css_flag css_'+hiddenCountryCode;fakeSelCountryStructure.title.getElementsByTagName('span')[0].innerHTML=getCountryNameByCode(fakeSelCountryStructure,hiddenCountryCode);var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,loadTransporter,null,{defaultTransporter:transporter},productStandard);}
function shippingCompanyDialog(){var oShippingCompany=new AE.app.dialog();var html='<div class="inner">'+'<div class="content">'+'<div class="caption caption-selector">Please Confirm Your Shipping Method:</div>'+'<div style="clear:both;"></div>'+'<div class="shipping-service clearfix">'+'<div id="shipping-bd">'+'<div id="direct-shipping-wrapper" style="display:none;">'+'<div id="shipping-info">'+'<ul>'+'<li>Shipping Company:</li>'+'<li>Estimated Delivery Time:</li>'+'<li>Shipping Cost:</li>'+'</ul>'+'</div>'+'<div id="company-item">'+'<ul class="company-item-wrapper"></ul>'+'</div>'+'<div class="ds-intro"></div>'+'<div id="shipping-parcel" style="display:none;">'+'<div id="shipping-or">Or You can use</div>'+'<div id="shipping-parcel-box" class="clearfix">'+'<div id="shipping-parcel-hd"></div>'+'<div id="shipping-parcel-bd"><ul>'+'</ul></div>'+'<p class="shipping-parcel-tips">Air Mail deliveries can\t be tracked and might be delayed</p>'+'</div>'+'</div>'+'</div>'+'</div>'+'<div class="action-wrapper">'+'<div class="comfirm-title">Total Price:</div>'+'<div id="inf-dlg-shipping-company-total-price"></div>'+'<input type="submit" value="Buy Now!" class="btn-comfirm" id="inf-btn-comfirm" />'+'</div>'+'</div>'+'<div id="'+shippingSelectErrorId+'" style="display:none;"></div>'+'</div>'+'<div id="ss-loading"><img alt="loading" title="loading" src="http://img.alibaba.com/images/eng/wholesale/icon/loading-middle.gif" width="32px" height="32px" /></div>'+'</div>';var quantity=getQuantity();var transporter=getTransporter();var userType=getUserType();var countryCode=getCountryCode();oShippingCompany.init({tempContentId:dlgShippingCompanyId,closeClassName:'close',contentTop:70,maskColor:'#666',maskDivId:'ae-mask',zIndex:1024,title:'',contentHTML:html,callback:function(){}});directFreightWrapper=YUD.getElementsByClassName('company-item-wrapper','ul',get('direct-shipping-wrapper'))[0];if(selStandard.tagName.toLowerCase()=='select'){var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,loadTransporterConfirm,null,{defaultTransporter:transporter,countryCode:countryCode},productStandard);}else{UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,loadTransporterConfirm,null,{defaultTransporter:transporter,countryCode:countryCode},productStandard);}}
function submitForm(ev){YUE.stopEvent(ev);if(get('skuAttr')){var skuAttrs=YUD.getElementsByClassName("sku-attr","ul",get('buy-now-form'));var tempNode='',liNode='',tempLiNode='',isSelected=true;for(var i=0;tempNode=skuAttrs[i];i++){liNode=tempNode.getElementsByTagName('li');isSelected=false;for(var j=0;tempLiNode=liNode[j];j++){if(YUD.hasClass(tempLiNode,"active")){isSelected=true;}}
if(!isSelected){YUD.setStyle(YUD.getNextSibling(tempNode),"display","block");break;}else{YUD.setStyle(YUD.getNextSibling(tempNode),"display","none");}}
if(!isSelected){return;}}else{if(!checkQuantity()){return;}}
if(pnlProductColor){var colorItems=pnlProductColor.getElementsByTagName('a');if(colorItems.length>0&&hidProductColor&&!hidProductColor.value){msgProductColor.style.display='block';return;}}
if(pnlProductSize){var sizeItems=pnlProductSize.getElementsByTagName('a');if(sizeItems.length>0&&hidProductSize&&!hidProductSize.value){msgProductSize.style.display='block';return;}}
buyNowClickStat(PRODUCT_ID);var buyNowForm=get('buy-now-form');var popXmanDialog=new AE.run.popXmanDialog;popXmanDialog.init({xmanTempContentId:'ws-xman-temp-mask-content',xmanContentClassName:'ws-xman-mask-content',xmanCloseClassName:'mask-close',sessionId:runParams.sessionId,registerAction:'buyerJoin/place_order_buyer_register_action',usaeServer:runParams.usaeServer,registerFrom:runParams.registerFrom,registerSuccessCallback:function(){buyNowForm.submit();},loginSuccessCallback:function(){buyNowForm.submit();},unDefaultDo:function(){setTimeout(function(){buyNowForm.submit();},90);},tipsContent:'<div class="login-tips">Please sign in to place order.</div>'});}
function buyNowClickStat(prodId){if(AE.app.clickStat){var wsPageType=window.storeParams?'store_product_detail':'product_detail';AE.app.clickStat.buttonClick({projectId:'29203',pageType:wsPageType,buttonType:'buy_now',objectType:'product',objectValue:prodId});}}
function hasNoAvailable(freights){for(var i=0,l=freights.length;i<l;i++){if(parseFloat(freights[i].getElementsByTagName('price')[0].firstChild.nodeValue,10)>=0){return false;}}
return true;}
function changeShipping(xmlDoc,args){var defaultTransporter=null;var onLoaded=null;if(!xmlDoc){UTIL.showLoadFreightError(pnlTotalPrice);return;}
var freights=xmlDoc.getElementsByTagName('freight');if(!freights||freights.length<=0||hasNoAvailable(freights)){UTIL.showNoDeliverAlert(pnlTotalPrice);pnlTotalPrice.style.visibility='visible';setShippingCost(0,getCountryName(fakeSelCountryStructure));setCountryCode(getCountryCode(fakeSelCountryStructure));if(args){onLoaded=args.onLoaded;}
if(onLoaded){onLoaded();}
return;}
if(args){defaultTransporter=args.defaultTransporter;onLoaded=args.onLoaded;}
var freight=-1;var transport='';var inlandFreight=0;var shippingTime='';var commitDay='';var minWSPrice=Number.MAX_VALUE;var hasWS=false;var findDef=false;if(!defaultTransporter){for(var i=0;i<freights.length;i++){(function(freightDom){var defaultDom=freightDom.getElementsByTagName('default')[0].firstChild.nodeValue;switch(defaultDom){case'true':defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;shippingTime=freightDom.getElementsByTagName('time')[0].firstChild.nodeValue;commitDay=freightDom.getElementsByTagName('commitDay')[0].firstChild.nodeValue;if(defaultTransporter=='TAO'){freight=freightDom.getElementsByTagName('price')[0].firstChild.nodeValue;}else{freight=parseFloat(freightDom.getElementsByTagName('price')[0].firstChild.nodeValue,10);}
break;case'false':break;default:defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;shippingTime=freightDom.getElementsByTagName('time')[0].firstChild.nodeValue;commitDay=freightDom.getElementsByTagName('commitDay')[0].firstChild.nodeValue;freight=parseFloat(freightDom.getElementsByTagName('price')[0].firstChild.nodeValue,10);break;}})(freights[i]);}}
var countryName,countryCode;if(dialogShippingCountryName.length!==0){countryName=dialogShippingCountryName;countryCode=dialogShippingCountryCode;}else{countryName=getCountryName(fakeSelCountryStructure);countryCode=getCountryCode(fakeSelCountryStructure);}
if(defaultTransporter!='TAO'){hidShippingCompany.value=defaultTransporter;hidCountryCode.value=countryCode;freight=freight<0?0:freight;}else{hidShippingCompany.value='GELS_EXPEDITED';hidCountryCode.value=countryCode;}
if(defaultTransporter!='TAO'){for(var i=0;i<freights.length;i++){(function(freightDom){if(hidShippingCompany.value==freightDom.getElementsByTagName('company')[0].firstChild.nodeValue){freight=parseFloat(freightDom.getElementsByTagName('price')[0].firstChild.nodeValue,10);shippingTime=freightDom.getElementsByTagName('time')[0].firstChild.nodeValue;commitDay=freightDom.getElementsByTagName('commitDay')[0].firstChild.nodeValue;}})(freights[i]);}
setShippingCost(freight,countryName,hidShippingCompany.value,shippingTime,commitDay);}else{for(var i=0;i<freights.length;i++){(function(freightDom){if('TAO'==freightDom.getElementsByTagName('company')[0].firstChild.nodeValue){freight=freightDom.getElementsByTagName('price')[0].firstChild.nodeValue;shippingTime=freightDom.getElementsByTagName('time')[0].firstChild.nodeValue;}})(freights[i]);}
setShippingCost(freight,countryName,defaultTransporter,shippingTime,commitDay);}
window["INF"]["freight"]=freight;setCountryCode(countryCode);setFormula(getUnitPrice(),getQuantity(),freight,inlandFreight);if(onLoaded){onLoaded();}}
function changeStandard(){var standardIndex=getStandardIndex();var pnlPriceDetails=YUD.getElementsByClassName(pnlPriceDetailClassName,'div',frmBuyNow);setStandardIndex(standardIndex);for(var i=0;i<pnlPriceDetails.length;i++){pnlPriceDetails[i].style.display='none';}
pnlPriceDetails[standardIndex].style.display='block';var quantity=getQuantity();var minQuantity=getMinQuantity();if(parseInt(quantity)<parseInt(minQuantity)||!/^\d+$/.test(quantity)){quantity=parseInt(minQuantity);setQuantity(quantity);}
checkQuantity();var quantity=getQuantity();var countryCode;if(tempCountryCode===''){countryCode=getCountryCode();}else{countryCode=tempCountryCode;}
var transporter=getTransporter();var userType=getUserType();var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,changeShipping,null,null,productStandard);}
function checkQuantity(){var quantity=getQuantity();if(!/^\d+$/.test(quantity)){UTIL.showQuantityNumberAlert(msgQuantity);msgQuantity.style.visibility='visible';return false;}
var maxQuantity=9999;if(get("skuAttr")){if(get('quantity-no')){maxQuantity=get('quantity-no').innerHTML;}
if(get('sku-active-no'))
get('sku-active-no').innerHTML=maxQuantity;if(maxQuantity&&parseInt(quantity)>parseInt(maxQuantity)){YUD.addClass(msgStockpile,"msg-stockpile-active");setQuantity(maxQuantity);return false;}}else{var minQuantity=getMinQuantity();var maxQuantity=getMaxQuantity();if(parseInt(quantity)<parseInt(minQuantity)){var unit=getUnit();setUnit();UTIL.showQuantityMinOrderAlert(msgQuantity,minQuantity,unit);msgQuantity.style.visibility='visible';return false;}}
if(get("objectStockpile")&&parseInt(quantity,10)>parseInt(get("objectStockpile").value,10)){setQuantity(get('objectStockpile').value);YUD.addClass(msgStockpile,"msg-stockpile-active");return false;}else{YUD.removeClass(msgStockpile,"msg-stockpile-active");}
if(maxQuantity&&parseInt(quantity)>parseInt(maxQuantity)){YUD.addClass(msgStockpile,"msg-stockpile-active");setQuantity(maxQuantity);}
msgQuantity.style.visibility='hidden';setUnit();return true;}
function entryQuantity(ev){if(ev.type=='paste'||!((ev.keyCode>=46&&ev.keyCode<=57)||(ev.keyCode>=96&&ev.keyCode<=105)||(ev.keyCode==8)||(ev.keyCode>=37&&ev.keyCode<=40))){if(AE.bom.isIE){ev.returnValue=false;}
else{ev.preventDefault();}
return false;}
bntQuantityCalculate.style.visibility='visible';}
function changeTotlePrice(){setFormula(getUnitPrice(),getQuantity(),window["INF"]["freight"],0);}
function changeQuantity(){var quantity=getQuantity();if(checkQuantity()){var quantity=getQuantity();var countryCode;if(tempCountryCode===''){countryCode=getCountryCode();}else{countryCode=tempCountryCode;}
var transporter=getTransporter();var userType=getUserType();var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,changeShipping,null,null,productStandard);}
bntQuantityCalculate.style.visibility='hidden';}
var updateShipMethod=false;function updateShipping(ev,args){var show=args.show;var quantity=getQuantity();var countryCode=getCountryCode(fakeSelCountryStructure);var transporter=getValueOfTran(SHIPPING_COMPANY_NAME);if(typeof transporter=='undefined'){transporter=UTIL.WS_SAVER_NAME;}
var userType=getUserType();var productStandard=selStandard.value;UTIL.loadFreight(PRODUCT_ID,FREIGHT_URL,PROXY_DOMAIN,countryCode,quantity,userType,changeShipping,null,{defaultTransporter:transporter},productStandard);show.close();updateShipMethod=true;}
function loadTransporter(xmlDoc,args){var quantity=getQuantity();var minQuantity=getMinQuantity();if(isNaN(quantity)){showError();UTIL.showQuantityNumberAlert(get(shippingSelectErrorId),minQuantity,unit);return;}
if(parseInt(quantity)<parseInt(minQuantity)){var unit=getUnit();showError();UTIL.showQuantityMinOrderAlert(get(shippingSelectErrorId),minQuantity,unit);return;}
if(!xmlDoc){showError();UTIL.showLoadFreightError(get(shippingSelectErrorId));return;}
var freights=xmlDoc.getElementsByTagName('freight');if(!freights||freights.length<=0||hasNoAvailable(freights)){showError();UTIL.showNoDeliverAlert(get(shippingSelectErrorId));}
else{showWrapper();for(var i=0;i<freights.length;i++){(function(freightDom){var defaultDom=freightDom.getElementsByTagName('default')[0].firstChild.nodeValue;switch(defaultDom){case'true':args.defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;break;case'false':break;default:args.defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;break;}})(freights[i]);}
showTransporter(freights,args.defaultTransporter,args.countryCode);hideLoadingImg();}
for(var i=0,j=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));i<j.length;i++){var inputValue=j[i].getElementsByTagName('input')[0];if(args.defaultTransporter==inputValue.value){inputValue.checked=true;switch(inputValue.value){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':if(!isShowParcelTips(args.countryCode)){break;}
for(var i=0,j=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));i<j.length;i++){var inputValue2=j[i].getElementsByTagName('input')[0];if(args.defaultTransporter==inputValue2.value){YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',inputValue2.parentNode.parentNode)[0],'display','block');}}
break;}}}
var dsTitleTab=get('ds-title'),wsTitleTab=get('ws-title'),ds_check=get('ds-input'),ws_check=get('ws-input');if(get('inf-lnk-shipping').innerHTML.indexOf('China Warehouse')!=-1){get('ws-title').className+=' ss-title-checked';get('direct-shipping-wrapper').style.display='none';get('ws-input').checked=true;}else{if(dsTitleTab.style.display!='none'){ds_check.checked=true;ws_check.checked=false;_onDSInputClick.call(ds_check,args.defaultTransporter);}
else if(wsTitleTab.style.display!='none'){ds_check.checked=false;ws_check.checked=true;_onWSInputClick.call(ws_check);}else{ds_check.checked=false;ws_check.checked=false;}}
YUE.on(get('company-item').getElementsByTagName('li'),'click',getCurrChoise);YUE.on(get('shipping-parcel').getElementsByTagName('li'),'click',getCurrChoise);}
function showWrapper(){get('warehouse-shipping-wrapper').style.display='';get('direct-shipping-wrapper').style.display='';get('ws-title').style.display='';get('ds-title').style.display='';get('shipping-hd').style.display='';get('shipping-bd').style.display='';var actionEl=YUD.getElementsByClassName('action','div',get('inf-dlg-shipping'))[0];actionEl.style.display='';hideError();}
function hideWrapper(){get('warehouse-shipping-wrapper').style.display='none';get('direct-shipping-wrapper').style.display='none';get('ws-title').style.display='none';get('ds-title').style.display='none';get('shipping-hd').style.display='none';get('shipping-bd').style.display='none';var actionEl=YUD.getElementsByClassName('action','div',get('inf-dlg-shipping'))[0];actionEl.style.display='none';}
function hideLoadingImg(){get('ss-loading').style.display='none';}
function showLoadingImg(){get('ss-loading').style.display='';hideError();}
function showError(){hideLoadingImg();get(shippingSelectErrorId).style.display='';}
function hideError(){get(shippingSelectErrorId).style.display='none';}
function buildShippingParcel(companyName,fullCompanyName,price,shippingTime,processingTime){YUD.setStyle(get('shipping-parcel'),'display','block');var shippingParcelBdUl=get('shipping-parcel-bd').getElementsByTagName('ul')[0];if(0<parseFloat(price)){var priceHtml='<div class="ws-price">$'+price+'</div>';}
else{var priceHtml='<div class="ws-price ws-price-free">Free Shipping</div>';}
shippingParcelBdUl.innerHTML+='<li class="clearfix">'+'<div class="ds-company-input"><input type="radio" name="rad-shipping-company" value="'+companyName+'" />'+fullCompanyName+'</div>'+priceHtml+'<div class="total-days">'+shippingTime+' Days <span style="font-size:10px;">(It may take longer during the holiday seasons.)</span></div>'+'<p class="parcel-tips"><em>IMPORTANT:</em> '+fullCompanyName+' deliveries might result in delays and lost parcels.</p>'+'</li>';}
function showTransporter(freights,defaultTransporter,countryCode){get('shipping-parcel-bd').getElementsByTagName('ul')[0].innerHTML='';var hasWSShipping=false;var totalMinPrice=Number.MAX_VALUE;var totalMinDSPrice=totalMinPrice;var minPriceCompnayName='';directFreightWrapper.innerHTML='';defaultTransporter='';var totalWidth=0;var hasIparcel=false;for(var i=0,l=freights.length;i<l;i++){var companyName=freights[i].getElementsByTagName('company')[0].firstChild.nodeValue;if(companyName=='EMS_SH_ZX_US'||companyName=='EMS_ZX_ZX_US'){hasIparcel=true;break;}}
for(var i=0,l=freights.length;i<l;i++){var wprice=freights[i].getElementsByTagName('price')[0].firstChild.nodeValue;var price=parseFloat(wprice,10).toFixed(2);var companyName=freights[i].getElementsByTagName('company')[0].firstChild.nodeValue;var aboardPriceArr=YUD.getElementsByClassName('ws-price','span',get('ws-abroad-price-wrapper'));var aboardPriceDayArr=YUD.getElementsByClassName('ws-price-day','span',get('ws-abroad-price-wrapper'));var shippingTime=freights[i].getElementsByTagName('time')[0].firstChild.nodeValue;var totalFreight=freights[i].getElementsByTagName('totalFreight')[0].firstChild.nodeValue;var saveMoney=freights[i].getElementsByTagName('saveMoney')[0].firstChild.nodeValue;var processingTime=freights[i].getElementsByTagName('processingTime')[0].firstChild.nodeValue;if(companyName==UTIL.WS_EXPEDITED_NAME){if(wprice>=0){hasWSShipping=true;}
var fAboardPrice=freights[i].getElementsByTagName('price')[0].firstChild.nodeValue;aboardPriceArr[2].innerHTML='$'+UTIL.formatPrice(fAboardPrice,0);var fAboardPriceDay=freights[i].getElementsByTagName('time')[0].firstChild.nodeValue;aboardPriceDayArr[2].innerHTML=fAboardPriceDay;if(parseFloat(fAboardPrice)<=0){aboardPriceArr[2].parentNode.parentNode.style.display='none';}
else{aboardPriceArr[2].parentNode.parentNode.style.display='';}
if(companyName==defaultTransporter){get('ws-input').checked=true;if(get('ws-input').parentNode.className.indexOf('ss-title-checked')==-1){get('ws-input').parentNode.className+=' ss-title-checked';}}}
else if(companyName==UTIL.WS_STANDARD_NAME){if(wprice>=0){hasWSShipping=true;}
var fAboardPrice=freights[i].getElementsByTagName('price')[0].firstChild.nodeValue;aboardPriceArr[1].innerHTML='$'+UTIL.formatPrice(fAboardPrice,0);var fAboardPriceDay=freights[i].getElementsByTagName('time')[0].firstChild.nodeValue;aboardPriceDayArr[1].innerHTML=fAboardPriceDay;if(parseFloat(fAboardPrice)<=0){aboardPriceArr[1].parentNode.parentNode.style.display='none';}
else{aboardPriceArr[1].parentNode.parentNode.style.display='';}
if(companyName==defaultTransporter){get('ws-input').checked=true;if(get('ws-input').parentNode.className.indexOf('ss-title-checked')==-1){get('ws-input').parentNode.className+=' ss-title-checked';}}}
else if(companyName==UTIL.WS_SAVER_NAME){if(wprice>=0){hasWSShipping=true;}
var fAboardPrice=freights[i].getElementsByTagName('price')[0].firstChild.nodeValue;aboardPriceArr[0].innerHTML='$'+UTIL.formatPrice(fAboardPrice,0);var fAboardPriceDay=freights[i].getElementsByTagName('time')[0].firstChild.nodeValue;aboardPriceDayArr[0].innerHTML=fAboardPriceDay;if(parseFloat(fAboardPrice)<=0){aboardPriceArr[0].parentNode.parentNode.style.display='none';}
else{aboardPriceArr[0].parentNode.parentNode.style.display='';}
if(companyName==defaultTransporter){get('ws-input').checked=true;if(get('ws-input').parentNode.className.indexOf('ss-title-checked')==-1){get('ws-input').parentNode.className+=' ss-title-checked';}}}
else{if(companyName=='CPAM'){buildShippingParcel('CPAM','China Post Air Mail',price,shippingTime,processingTime);}
else if(companyName=='HKPAM'){buildShippingParcel('HKPAM','Hongkong Post Air Mail',price,shippingTime,processingTime);}
else if(companyName=='CPAP'){buildShippingParcel('CPAP','China Post Air Parcel',price,shippingTime,processingTime);}
else if(companyName=='HKPAP'){buildShippingParcel('HKPAP','Hongkong Post Air Parcel',price,shippingTime,processingTime);}else{YUD.setStyle(get('shipping-parcel'),'display','none');get('shipping-parcel-bd').getElementsByTagName('ul')[0].innerHTML='';var item=buildCompanyItem(companyName,price,shippingTime,processingTime,saveMoney,totalFreight,wprice);}
if(loadTransporterTime===0&&companyName===defaultTransporter){get('ds-input').checked=true;minPriceCompnayName=companyName;totalMinDSPrice=0;}else if(parseFloat(price)<parseFloat(totalMinDSPrice)){if(!(hasIparcel&&(companyName=='CPAM'||companyName=='HKPAM'||companyName=='HKPAP'||companyName=='CPAP'))){totalMinDSPrice=parseFloat(price);minPriceCompnayName=companyName;}}
if(typeof item=='undefined'){YUD.setStyle('shipping-info','display','none');YUD.setStyle('shipping-or','display','none');YUD.setStyle('shipping-parcel','border','none');}else{directFreightWrapper.appendChild(item);totalWidth+=item.offsetWidth;}}}
dialogScroll(get('inf-dlg-shipping'),freights,totalWidth);loadTransporterTime++;if(hasWSShipping){get('warehouse-shipping-wrapper').style.display='';get('ws-title').parentNode.style.display='none';get('choose-shipping-method').style.display='none';get('inf-dlg-shipping').style.left=((window.screen.width-800)/2)+'px';get('inf-dlg-shipping').style.width='800px';}else{get('warehouse-shipping-wrapper').style.display='none';get('ws-title').style.display='none';}
for(var i=0,j=get('shipping-parcel-bd').getElementsByTagName('li');i<j.length;i++){YUE.on(j[i],'click',function(){if(!isShowParcelTips(countryCode)){}else{YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',this)[0],'display','block');}
this.getElementsByTagName('input')[0].checked=true;});}
if(totalMinDSPrice!=Number.MAX_VALUE){get('direct-shipping-wrapper').style.display='';get('ds-title').style.display='';var radShippingComanyList=directFreightWrapper.getElementsByTagName('li');var radShippingWsprice=YUD.getElementsByClassName('ws-price','div');YUE.on(radShippingComanyList,'click',_onDSShippingComanyClick);for(var i=0,l=radShippingWsprice.length;i<l;i++){radShippingWsprice[i]._index=i;}
var saveTipELs=YUD.getElementsByClassName('save-tip','div');var directShippingLeft=YUD.getRegion('direct-shipping-wrapper').left;var directShippingScrollLeft=0;get('company-item').onscroll=function(e){return directShippingScrollLeft=this.scrollLeft;};YUE.on(radShippingWsprice,'mouseover',function(){var radShippingInputVal=YUD.getElementsByClassName('ds-company-input','div',this.parentNode)[0].getElementsByTagName('input')[0].value;switch(radShippingInputVal){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':break;default:if(saveTipELs[this._index].innerHTML.indexOf('You Save:$0.00')==-1){YUD.addClass(saveTipELs[this._index],'show');YUD.setStyle(saveTipELs[this._index].parentNode,'z-index','999');var saveTipLeft=YUD.getRegion(saveTipELs[this._index]).left-directShippingLeft;if((totalWidth>=400)&&(saveTipLeft-directShippingScrollLeft>390)){YUD.addClass(saveTipELs[this._index],'showleft');}}}});YUE.on(radShippingWsprice,'mouseout',function(){var radShippingInputVal=YUD.getElementsByClassName('ds-company-input','div',this.parentNode)[0].getElementsByTagName('input')[0].value;switch(radShippingInputVal){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':break;default:if(saveTipELs[this._index].innerHTML.indexOf('You Save:$0.00')==-1){YUD.removeClass(saveTipELs[this._index],'show');YUD.removeClass(saveTipELs[this._index],'showleft');YUD.setStyle(saveTipELs[this._index].parentNode,'z-index','0');}}});}
else{get('direct-shipping-wrapper').style.display='none';get('ds-title').style.display='none';get('ws-input').checked=true;}
if(get('ws-input').checked===false){get('ds-input').checked=true;}
if(!hasWSShipping){YUD.setStyle(get('shipping-hd'),'display','none');}
YUE.on(get('company-item').getElementsByTagName('li'),'click',function(){var shippingParcelBdLi=get('shipping-parcel-bd').getElementsByTagName('li');if(shippingParcelBdLi.length>0){YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');}});}
function _onDSShippingComanyClick(ev){var radio=this.getElementsByTagName('input');if(radio&&radio.length>0&&radio[0].type.toLowerCase()=='radio'){radio[0].checked=true;}
if(get('ws-input')){get('ws-input').checked=false;}
if(get('ds-input')){get('ds-input').checked=true;}}
function getUnicodeString(str){return str.replace(/&#(x)?([^&]{1,5});?/g,function(a,b,c){return String.fromCharCode(parseInt(c,b?16:10));});}
function getLogoElement(companyName){var name=companyName;var image=null;switch(companyName){case'EMS_SH_ZX_US':name='DHL Global Mail';image='';break;case'EMS_ZX_ZX_US':name='ePacket';image='';break;case'EMS':name='EMS';image='icon-ems.jpg';break;case'UPS':name='UPS Express Saver&#8482;';image='icon-ups-s.gif';break;case'UPSE':name='UPS Expedited&#8482;';image='icon-ups-e.gif';break;case'DHL':name='DHL';image='icon-dhl.jpg';break;case'FEDEX':name='FEDEX';image='icon-fedex.jpg';break;case'TNT':name='TNT';image='icon-tnt.jpg';break;case'SF':name='SF';image='icon-express.jpg';break;case'CPAM':name='China Post Air Mail';image='china-post-air-mail.jpg';break;case'CPAP':name='China Post Air Parcel';image='china-post-air-parcel.jpg';break;case'HKPAM':name='Hongkong Post Air Mail';image='hk-air-mail.jpg';break;case'HKPAP':name='Hongkong Post Air Parcel';image='hk-air-pracel.jpg';break;}
getUnicodeString(name);imageDir=runParams.imageServer;var wrapperEl=document.createElement('div');wrapperEl.className='company-img-wrapper';if(image&&imageDir){var imgEl=document.createElement('img');imgEl.src=imageDir+'/wimg/buyer/single/'+image;imgEl.alt=name;imgEl.title=name;wrapperEl.appendChild(imgEl.cloneNode(true));return wrapperEl;}
else{var txtWrapperEl=document.createElement('div');txtWrapperEl.className='company-txt-wrapper';txtWrapperEl.innerHTML=name;wrapperEl.appendChild(txtWrapperEl.cloneNode(true));return wrapperEl;}}
function totalDays(totalTime){var totalDaysEl=document.createElement('div');totalDaysEl.className='total-days';totalDaysEl.innerHTML=totalTime+' Days';return totalDaysEl;}
function getSaveMoneyPer(saveMoney,totalFreight){if(totalFreight){var youSave=Math.round(saveMoney/totalFreight*100)+'%';}
return youSave;}
function getSaveMoneyEL(saveMoney,totalFreight){var saveTip=document.createElement('div');saveTip.className='save-tip';saveTip.innerHTML='<div class="original-price">Original:$'+
totalFreight+'</div>'+'<div class="save-price">You Save:$'+
saveMoney+'('+getSaveMoneyPer(saveMoney,totalFreight)+')'+'</div>';return saveTip;}
function buildCompanyItem(companyName,freight,shippingTime,processingTime,saveMoney,totalFreight){var item=document.createElement('li');var totalTime=getTotalTime(shippingTime,0);if(!companyName||!freight){return item;}
item.appendChild(getLogoElement(companyName));item.appendChild(totalDays(totalTime));item.appendChild(getSaveMoneyEL(saveMoney,totalFreight));var priceEl=document.createElement('div');priceEl.className='ws-price';if(0<parseFloat(freight)){priceEl.innerHTML='$'+UTIL.formatPrice(freight,2);}
else{priceEl.innerHTML='Free Shipping';priceEl.className+=' ws-price-free';}
item.appendChild(priceEl);var valueElement=null;try{valueElement=document.createElement('<input name="'+SHIPPING_COMPANY_NAME+'" />');}
catch(ex){valueElement=document.createElement('input');valueElement.name=SHIPPING_COMPANY_NAME;}
valueElement.type='radio';valueElement.value=companyName;var valueElementWrapper=document.createElement('div');valueElementWrapper.className='ds-company-input';valueElementWrapper.appendChild(valueElement);item.appendChild(valueElementWrapper);return item;}
function loadTransporterConfirm(xmlDoc,args){var freights=xmlDoc.getElementsByTagName('freight');showConfirmWrapper();showConfirmTransporter(freights,args.defaultTransporter,args.countryCode);hideLoadingImg();YUE.on(get('direct-shipping-wrapper').getElementsByTagName('li'),'click',function(){var radio=this.getElementsByTagName('input');if(radio&&radio.length>0&&radio[0].type.toLowerCase()=='radio'){radio[0].checked=true;}
var dialogTotalPrcie=get('inf-dlg-shipping-company-total-price');var unitPrice,quantity,freight;var freightPrice=YUD.getElementsByClassName('ws-price','div',this)[0];freight=freightPrice.innerHTML.replace(/[\$,]/g,'');if(freight=='Free Shipping'){freight=0;}
var priceWholeLine=get('inf-dlg-shipping-company-total-price');var priceLine=priceWholeLine.getElementsByTagName('strong');var priceText=priceLine[0].innerHTML;var match=priceText.match(/[\d\,\.]+(?=[\w\s]+?(\d+))/);var unitPrice=parseFloat(match[0].replace(',',''),2);var quantity=match[1];var totalPriceCacheHtml=setConfirmFormula(unitPrice,quantity,freight);dialogTotalPrcie.innerHTML=totalPriceCacheHtml;});var totalPrice=get('inf-pnl-total-price');var totalPriceHtml=totalPrice.innerHTML;var dlgTotalPrice=get('inf-dlg-shipping-company-total-price');dlgTotalPrice.innerHTML=totalPriceHtml;var confirmBtn=get('inf-btn-comfirm');YUE.on(confirmBtn,'click',confirmSubmitForm);var dialogShipping=get(dlgShippingCompanyId);var dialogShippingCompany=YUD.getElementsByClassName('select-transporter-company','ul',dialogShipping);var dialogSCCount=dialogShippingCompany.length;var dialogNewWidth=180+95*dialogSCCount;if(dialogNewWidth>620){dialogShipping.style.width=(180+95*dialogSCCount)+'px';}
dialogShipping.style.left=parseInt((document.body.clientWidth-dialogShipping.clientWidth)/2,10)+'px';}
function confirmSubmitForm(ev){var buyNowForm=get('buy-now-form');var infHidShippingCompany=get('inf-hid-shipping-company');for(var i=0,j=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));i<j.length;i++){if(j[i].getElementsByTagName('input')[0].checked){var selectTransporterNameS=j[i].getElementsByTagName('input')[0];}}
infHidShippingCompany.value=selectTransporterNameS.value;buyNowClickStat(PRODUCT_ID);var confirmWrapper=get('inf-dlg-shipping-company');var maskWrapper=get('ae-mask');var confirmCont=YUD.getElementsBy(function(el){return el.parentNode==confirmWrapper;},'div',confirmWrapper);confirmWrapper.removeChild(confirmCont[0]);YUD.setStyle(confirmWrapper,'display','none');maskWrapper.parentNode.removeChild(maskWrapper);var popXmanDialog=new AE.run.popXmanDialog;popXmanDialog.init({xmanTempContentId:'ws-xman-temp-mask-content',xmanContentClassName:'ws-xman-mask-content',xmanCloseClassName:'mask-close',sessionId:runParams.sessionId,registerAction:'buyerJoin/place_order_buyer_register_action',usaeServer:runParams.usaeServer,registerFrom:runParams.registerFrom,registerSuccessCallback:function(){buyNowForm.submit();},loginSuccessCallback:function(){buyNowForm.submit();},unDefaultDo:function(){setTimeout(function(){buyNowForm.submit();},90);},tipsContent:'<div class="login-tips">Please sign in to place order.</div>'});}
function showConfirmWrapper(){get('direct-shipping-wrapper').style.display='';get('shipping-bd').style.display='';var actionEl=get('inf-btn-comfirm');actionEl.style.display='';hideError();}
function hideConfirmWrapper(){var actionEl=get('inf-btn-comfirm');actionEl.style.display='none';}
function showConfirmTransporter(freights,defaultTransporter,countryCode){var totalMinPrice=Number.MAX_VALUE;var totalMinDSPrice=totalMinPrice;var minPriceCompnayName='';var freight='';directFreightWrapper.innerHTML='';defaultTransporter='';var totalWidth=0;var hasIparcel=false;for(var i=0,l=freights.length;i<l;i++){var companyName=freights[i].getElementsByTagName('company')[0].firstChild.nodeValue;if(companyName=='EMS_SH_ZX_US'||companyName=='EMS_ZX_ZX_US'){hasIparcel=true;break;}}
for(var i=0;i<freights.length;i++){var wprice=freights[i].getElementsByTagName('price')[0].firstChild.nodeValue;var price=parseFloat(wprice,10).toFixed(2);var companyName=freights[i].getElementsByTagName('company')[0].firstChild.nodeValue;var aboardPriceArr=YUD.getElementsByClassName('ws-price','span',get('ws-abroad-price-wrapper'));var shippingTime=freights[i].getElementsByTagName('time')[0].firstChild.nodeValue;var totalFreight=freights[i].getElementsByTagName('totalFreight')[0].firstChild.nodeValue;var saveMoney=freights[i].getElementsByTagName('saveMoney')[0].firstChild.nodeValue;var processingTime=freights[i].getElementsByTagName('processingTime')[0].firstChild.nodeValue;if(companyName==UTIL.WS_EXPEDITED_NAME){continue;}
else if(companyName==UTIL.WS_STANDARD_NAME){continue;}
else if(companyName==UTIL.WS_SAVER_NAME){continue;}
else{if(companyName=='CPAM'){buildShippingParcel('CPAM','China Post Air Mail',price,shippingTime,processingTime);}
else if(companyName=='HKPAM'){buildShippingParcel('HKPAM','Hongkong Post Air Mail',price,shippingTime,processingTime);}
else if(companyName=='CPAP'){buildShippingParcel('CPAP','China Post Air Parcel',price,shippingTime,processingTime);}
else if(companyName=='HKPAP'){buildShippingParcel('HKPAP','Hongkong Post Air Parcel',price,shippingTime,processingTime);}else{YUD.setStyle(get('shipping-parcel'),'display','none');get('shipping-parcel-bd').getElementsByTagName('ul')[0].innerHTML='';var item=buildCompanyItem(companyName,price,shippingTime,processingTime,saveMoney,totalFreight,wprice);}
if(loadTransporterTime===0&&companyName===defaultTransporter){minPriceCompnayName=companyName;totalMinDSPrice=0;}
else if(parseFloat(price)<parseFloat(totalMinDSPrice)){if(!(hasIparcel&&(companyName=='CPAM'||companyName=='HKPAM'||companyName=='HKPAP'||companyName=='CPAP'))){totalMinDSPrice=parseFloat(price);minPriceCompnayName=companyName;}}
if(typeof item=='undefined'){YUD.setStyle('shipping-info','display','none');YUD.setStyle('shipping-or','display','none');YUD.setStyle('shipping-parcel','border','none');}else{directFreightWrapper.appendChild(item);totalWidth+=item.offsetWidth;}}}
dialogScroll(get('inf-dlg-shipping-company'),freights,totalWidth);loadTransporterTime++;for(var i=0;i<freights.length;i++){(function(freightDom){var defaultDom=freightDom.getElementsByTagName('default')[0].firstChild.nodeValue;switch(defaultDom){case'true':defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;freight=parseFloat(freightDom.getElementsByTagName('price')[0].firstChild.nodeValue,10);break;case'false':break;default:defaultTransporter=freightDom.getElementsByTagName('company')[0].firstChild.nodeValue;freight=parseFloat(freightDom.getElementsByTagName('price')[0].firstChild.nodeValue,10);break;}})(freights[i]);}
for(var i=0,j=get('shipping-parcel-bd').getElementsByTagName('li');i<j.length;i++){if(j[i].getElementsByTagName('input')[0].value==defaultTransporter){j[i].getElementsByTagName('input')[0].checked=true;}
YUE.on(j[i],'click',function(){if(!isShowParcelTips(countryCode)){}else{YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',this)[0],'display','block');}
this.getElementsByTagName('input')[0].checked=true;});}
for(var i=0,j=get('company-item').getElementsByTagName('li');i<j.length;i++){YUE.on(j[i],'click',function(){YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');});}
switch(defaultTransporter){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':if(!isShowParcelTips(countryCode)){break;}
for(var i=0,j=YUD.getElementsByClassName('ds-company-input','div',get('direct-shipping-wrapper'));i<j.length;i++){var inputValue2=j[i].getElementsByTagName('input')[0];if(defaultTransporter==inputValue2.value){YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',get('shipping-parcel-bd')),'display','none');YUD.setStyle(YUD.getElementsByClassName('parcel-tips','p',inputValue2.parentNode.parentNode)[0],'display','block');}}
break;}
if(totalMinDSPrice!=Number.MAX_VALUE){get('direct-shipping-wrapper').style.display='';var radShippingComanyList=directFreightWrapper.getElementsByTagName('li');var radShippingWsprice=YUD.getElementsByClassName('ws-price','div');YUE.on(radShippingComanyList,'click',_onDSShippingComanyClick);for(var i=0,l=radShippingWsprice.length;i<l;i++){radShippingWsprice[i]._index=i;}
var saveTipELs=YUD.getElementsByClassName('save-tip','div');var directShippingLeft=YUD.getRegion('direct-shipping-wrapper').left;var directShippingScrollLeft=0;get('company-item').onscroll=function(e){return directShippingScrollLeft=this.scrollLeft;};YUE.on(radShippingWsprice,'mouseover',function(){var radShippingInputVal=YUD.getElementsByClassName('ds-company-input','div',this.parentNode)[0].getElementsByTagName('input')[0].value;switch(radShippingInputVal){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':break;default:if(saveTipELs[this._index].innerHTML.indexOf('You Save:$0.00')==-1){YUD.addClass(saveTipELs[this._index],'show');YUD.setStyle(saveTipELs[this._index].parentNode,'z-index','999');var saveTipLeft=YUD.getRegion(saveTipELs[this._index]).left-directShippingLeft;if((totalWidth>=400)&&(saveTipLeft-directShippingScrollLeft>390)){YUD.addClass(saveTipELs[this._index],'showleft');}}}});YUE.on(radShippingWsprice,'mouseout',function(){var radShippingInputVal=YUD.getElementsByClassName('ds-company-input','div',this.parentNode)[0].getElementsByTagName('input')[0].value;switch(radShippingInputVal){case'CPAM':case'HKPAM':case'CPAP':case'HKPAP':break;default:if(saveTipELs[this._index].innerHTML.indexOf('You Save:$0.00')==-1){YUD.removeClass(saveTipELs[this._index],'show');YUD.removeClass(saveTipELs[this._index],'showleft');YUD.setStyle(saveTipELs[this._index].parentNode,'z-index','0');}}});}}
function dialogScroll(dlgEl,args,totalWidth){var shippingCompanyItem=get('company-item').getElementsByTagName('li');if(shippingCompanyItem){var len=shippingCompanyItem.length;}
if(len<=5){dlgEl.style.width='693px';get('company-item').style.width='502px';directFreightWrapper.style.width='500px';dlgEl.style.left=((window.screen.width-693)/2)+'px';}else if(len==6){dlgEl.style.width='793px';get('company-item').style.width='602px';directFreightWrapper.style.width='600px';dlgEl.style.left=((window.screen.width-793)/2)+'px';}else if(len==7){dlgEl.style.width='893px';get('company-item').style.width='702px';directFreightWrapper.style.width='700px';dlgEl.style.left=((window.screen.width-893)/2)+'px';}else if(len>7){dlgEl.style.width='893px';get('company-item').style.width='702px';directFreightWrapper.style.width=totalWidth+'px';dlgEl.style.left=((window.screen.width-893)/2)+'px';}
if(len>7){get('company-item').style.overflowX='scroll';get('company-item').style.overflowY='auto';}else{get('company-item').style.overflow='visible';}}
function confirmBuildCompanyItem(companyName,freight,shippingTime,processingTime,saveMoney,totalFreight){var item=document.createElement('li');var totalTime=getTotalTime(shippingTime,processingTime);if(!companyName||!freight){return item;}
item.appendChild(getLogoElement(companyName));item.appendChild(totalDays(totalTime));item.appendChild(getSaveMoneyEL(saveMoney,totalFreight));var priceEl=document.createElement('div');priceEl.className='ws-price';if(0<parseFloat(freight)){priceEl.innerHTML='$'+UTIL.formatPrice(freight,2);}
else{priceEl.innerHTML='Free Shipping';priceEl.className+=' ws-price-free';}
item.appendChild(priceEl);var valueElement=null;try{valueElement=document.createElement('<input name="'+SHIPPING_COMPANY_NAME+'" />');}
catch(ex){valueElement=document.createElement('input');valueElement.name=SHIPPING_COMPANY_NAME;}
valueElement.type='radio';valueElement.value=companyName;var valueElementWrapper=document.createElement('div');valueElementWrapper.className='ds-company-input';valueElementWrapper.appendChild(valueElement);item.appendChild(valueElementWrapper);return item;}
function getTotalTime(shippingTime,processingTime){var shippingTimeArr=shippingTime.split('-');var minShippingTime=parseInt(shippingTimeArr[0],10);var maxShippingTime=parseInt(shippingTimeArr[1],10)+parseInt(processingTime,10);var totalTimeArr=[minShippingTime,maxShippingTime];return totalTimeArr.join('-');}
function getLatestParentByTagName(element,tagName){var parent=element.parentNode;if(parent.tagName.toLowerCase()!=tagName.toLowerCase()){return getLatestParentByTagName(parent,tagName);}
return parent;}
function setConfirmFormula(unitPrice,quantity,freight){var totalPrice=parseFloat(unitPrice)*parseInt(quantity)+parseFloat(freight);var totalPriceHtml;totalPriceHtml='<strong style="display:none;">$'+UTIL.formatPrice(unitPrice,2)+' x '+
quantity+' + $'+
UTIL.formatPrice(freight,2)+' = </strong>'+'<span class="price price-highlight"><span class="currency">US $</span><span class="value">'+
UTIL.formatPrice(totalPrice,2)+'</span></span>';return totalPriceHtml;}
function toggleShippingMask(){if(!SHIPPING_DIALOG_MASK){SHIPPING_DIALOG_MASK=document.createElement('iframe');SHIPPING_DIALOG_MASK.src=globalImgServer+"/js/blank.html";SHIPPING_DIALOG_MASK.frameBorder=0;SHIPPING_DIALOG_MASK.style.display='block';SHIPPING_DIALOG_MASK.style.width='100%';SHIPPING_DIALOG_MASK.style.height=document.body.scrollHeight+'px';SHIPPING_DIALOG_MASK.style.position='absolute';SHIPPING_DIALOG_MASK.style.top='0';SHIPPING_DIALOG_MASK.style.left='0';SHIPPING_DIALOG_MASK.style.opacity='0';SHIPPING_DIALOG_MASK.style.filter='alpha(opacity=0)';SHIPPING_DIALOG_MASK.style.zIndex=parseInt(dlgShipping.style.zIndex)-1;dlgShipping.parentNode.insertBefore(SHIPPING_DIALOG_MASK,dlgShipping);}
else
if(SHIPPING_DIALOG_MASK.style.display=='none'){SHIPPING_DIALOG_MASK.style.height=document.body.scrollHeight+'px';SHIPPING_DIALOG_MASK.style.display='block';}
else{SHIPPING_DIALOG_MASK.style.display='none';}}
function getStandardIndex(){if(selStandard.tagName.toLowerCase()=='select'){return selStandard.selectedIndex;}
return 0;}
function setStandardIndex(index){if(selStandard.tagName.toLowerCase()=='select'){try{selStandard.selectedIndex=index;}
catch(ex){selStandard.options[index].selected=true;}}}
function getQuantity(){return parseInt(txtQuantity.value,10);}
function setQuantity(quantity){txtQuantity.value=quantity;setUnit(getUnit());}
function getUnit(){var standardIndex=getStandardIndex();var pnlPriceDetails=YUD.getElementsByClassName(pnlPriceDetailClassName,'div',frmBuyNow);pnlPriceDetail=pnlPriceDetails[standardIndex];return YUD.getElementsByClassName('unit','*',pnlPriceDetail)[0].innerHTML;}
function setUnit(){var unit='';if(get('oddUnitName_id')){var oddUnit=get('oddUnitName_id').value;}
if(get('multiUnitName_id')){var multiUnit=get('multiUnitName_id').value;}
var quantity=getQuantity();if(parseInt(quantity)!=1){unit=multiUnit;}else{unit=oddUnit;}
lblUnit.innerHTML=unit;}
function getUserType(){return varUserType;}
function getCountryCode(selector){if(!selector){return varCountryCode;}
var flagLabels=YUD.getElementsByClassName('css_flag','*',selector.title);if(!flagLabels||flagLabels.length<=0){return varCountryCode;}
var countryCode=flagLabels[0].className.replace('css_flag css_','').toUpperCase();if(window.localStorage){AE.app.LocalStorage._setLocalStorage('country_code',countryCode);}
return countryCode;}
function getCountryName(selector){if(!selector){var countryName='';var countryNameBox=get('shipping-country-name');if(countryNameBox){var countryFlag=YUD.getChildrenBy(countryNameBox,function(el){return el.tagName.toUpperCase()==='IMG';});if(countryFlag[0]){countryName=countryFlag[0].getAttribute('alt');}else{countryName=countryNameBox.innerHTML.trim();}}else{countryName=lnkShipping.innerHTML.split(' Via ')[0];}
return countryName;}
var flagLabels=YUD.getElementsByClassName('css_flag','*',selector.title);if(!flagLabels||flagLabels.length<=0){var countryCode=getCountryCode();countryName=getCountryNameByCode(selector,countryCode);return countryName;}
var countryName=flagLabels[0].innerHTML;return countryName;}
function getInitCountryCode(selector,countryCode){var links=selector.options;for(var i=0;i<links.length;i++){var link=links[i];if(0<link.innerHTML.indexOf(('css_'+countryCode).toLowerCase())){return countryCode;}}
return'US';}
function setCountryCode(countryCode){varCountryCode=countryCode;}
function setCountryViaCode(selector,countryCode){var title=selector.title;var links=selector.options;for(var i=0;i<links.length;i++){var link=links[i];if(0<link.innerHTML.indexOf(('css_'+countryCode).toLowerCase())){title.innerHTML=link.innerHTML;break;}}}
function getCountryNameByCode(selector,countryCode){var links=selector.options;for(var i=0;i<links.length;i++){var link=links[i];var flagLabel=YUD.getElementsByClassName('css_flag','*',link)[0];if(0<flagLabel.className.indexOf(('css_'+countryCode).toLowerCase())){return flagLabel.innerHTML;}}}
function getFreight(){var freightLabels=YUD.getElementsByClassName('value','*',pnlShippingCost);if(!freightLabels||freightLabels.length<=0){return 0;}
freight=freightLabels[0].innerHTML;return freight;}
function getTransporter(){return hidShippingCompany.value;}
function getMinQuantity(){if(get('skuAttr')){return 1;}else{if(selStandard.tagName.toLowerCase()=='select'){var standardIndex=getStandardIndex();var relationship=selStandard.options[standardIndex].getAttribute('rel');if(relationship){var params=UTIL.getParamsByRel(relationship);return params.minquantity;}
return selStandard.options[standardIndex].getAttribute('minquantity');}
var relationship=selStandard.getAttribute('rel');if(relationship){var params=UTIL.getParamsByRel(relationship);return params.minquantity;}
return selStandard.getAttribute('minquantity');}}
function getMaxQuantity(){if(selStandard.tagName.toLowerCase()=='select'){var standardIndex=getStandardIndex();var relationship=selStandard.options[standardIndex].getAttribute('rel');var params=UTIL.getParamsByRel(relationship);return params.maxquantity;}
var relationship=selStandard.getAttribute('rel');var params=UTIL.getParamsByRel(relationship);return params.maxquantity;}
function getUnitPrice(){var quantity=getQuantity();var skuPrice=0;if(get("skuAttr")){if(get('sku-price-store')&&get('sku-price-store').value!==""){skuPrice=get('sku-price-store').value;}
if(skuPrice!==0)
return UTIL.restorePrice(skuPrice);}else{var standardIndex=getStandardIndex();var unitPrice='0';var pnlWholesalePrice=YUD.getElementsByClassName(pnlPriceDetailClassName,'div',frmBuyNow)[standardIndex];var pnlWholesaleHidPrice=YUD.getElementsByClassName('hid-price','div',pnlWholesalePrice)[0];var tableLines=pnlWholesaleHidPrice.getElementsByTagName('tr');for(var i=1;i<tableLines.length;i++){var tableLine=tableLines[i];var cells=tableLine.getElementsByTagName('td');var minQuantity=cells[0].innerHTML.replace(/\s\-.*/i,'');if(parseInt(quantity)<parseInt(minQuantity)){return UTIL.restorePrice(unitPrice);}
unitPrice=cells[1].innerHTML.replace(/\$/i,'');}
return UTIL.restorePrice(unitPrice);}}
function setShippingCost(freight,countryName,companyName,shippingTime,commitDay){companyName=UTIL.getFullCompanyName(companyName);if(!companyName||companyName.length<=0){pnlShippingCost.innerHTML='<span class="deactivate">Can not deliver</span>';lnkShipping.innerHTML=countryName;get('inf-hid-shipping-company').value='';}else{if(companyName.indexOf('TAO')!=-1){pnlShippingCost.innerHTML='<a href="javascript:void(0);" class="tao-shipping-link" id="tao-shipping-link">US '+
freight+'</a>';lnkShipping.innerHTML='<span id="shipping-country-name">'+countryName+'</span>';YUE.on('tao-shipping-link','click',function(){var sapPdt=get('tab-sap');if(sapPdt){if(AE.bom.isIE){sapPdt.click();}else{var evt=document.createEvent('MouseEvents');evt.initEvent('click',true,true);sapPdt.dispatchEvent(evt);}
window.scroll(0,YUD.getY(get('tab-sap')));}});}else{if(parseFloat(freight)>0){pnlShippingCost.innerHTML='<span class="price"><span class="currency">US $</span><span class="value">'+
UTIL.formatPrice(freight,2)+'</span></span>';}else{pnlShippingCost.innerHTML='<span class="free">Free Shipping</span>';}
if(companyName.indexOf('China Warehouse')!=-1){lnkShipping.innerHTML=companyName;}else{lnkShipping.innerHTML='<span id="shipping-country-name">'+countryName+'</span>'+' <span class="shipping-via">Via</span> '+companyName;}}}
pnlShippingCost.parentNode.style.visibility='visible';if(shippingTime&&shippingTime!==''){if(!get('inf-pnl-delivery-time')){var lnkShippingWrapper=YUD.getAncestorBy(lnkShipping,function(el){return el.tagName.toUpperCase()=='DL';});var shippingTimeWrapper=document.createElement('dl');YUD.insertAfter(shippingTimeWrapper,lnkShippingWrapper);shippingTimeWrapper.innerHTML='<dt>Delivery Time:</dt><dd><span id="inf-pnl-delivery-time" class="delivery-time">'+shippingTime+' days</span></dd>';}else{get('inf-pnl-delivery-time').innerHTML=shippingTime+' days';}}
var showBpBox,isShowCD=false;var beforeCommitDayDl=YUD.getAncestorByTagName(get('add-to-wishlist'),'dl');if(get('transactionbp')){showBpBox=get('transactionbp');if(!window.localStorage&&showBpBox.value==='Y'&&AE.app.cookieInfo['firstName']!==''){isShowCD=true;}
if(showBpBox.value==='Y'||showBpBox.value==='N'){if(window.localStorage&&!window.localStorage['showBP']){window.localStorage.setItem('showBP',showBpBox.value);}}}
if((window.localStorage&&window.localStorage['showBP']==='Y'||isShowCD)&&commitDay&&commitDay!==''){if(!get('promise-time-cont')&&get('seller-promise-list')){var sellerPromiseList=document.getElementById('seller-promise-list');var promiseShow=document.createElement('p');promiseShow.innerHTML='<img src="http://img.alibaba.com/images/cms/upload/wholesale/2012_landing/icon_promise_time.png"  width="16" height="16" />Full refund if product isn\'t received in <span id="promise-time-cont">'+commitDay+'</span> days';var firstChild=sellerPromiseList.getElementsByTagName('p');if(firstChild[0]){sellerPromiseList.insertBefore(promiseShow,firstChild[0]);}else{sellerPromiseList.appendChild(promiseShow);document.getElementById('seller-promise-main').style.display='block';}}else{document.getElementById('promise-time-cont').innerHTML=commitDay;}}}
function setFormula(unitPrice,quantity,freight,inlandFreight){if(get('bulk-order-store')&&get('bulk-order-store').value>0){if(quantity>=get('bulk-order-store').value){unitPrice=UTIL.restorePrice(get('act-sku-bulk-price-store').value);}}
if(inlandFreight&&inlandFreight>0){var totalPrice=parseFloat(unitPrice)*parseInt(quantity)+parseFloat(inlandFreight);pnlTotalPrice.innerHTML='<strong style="display:none;">$'+UTIL.formatPrice(unitPrice,2)+' x '+
quantity+' + $'+
UTIL.formatPrice(inlandFreight,2)+' = </strong>'+'<span class="price price-highlight"><span class="currency">US $</span><span class="value">'+
UTIL.formatPrice(totalPrice,2)+'</span></span>';pnlTotalPrice.style.visibility='visible';}
else{var totalPrice=parseFloat(unitPrice)*parseInt(quantity)+parseFloat(freight);pnlTotalPrice.innerHTML='<strong style="display:none;">$'+UTIL.formatPrice(unitPrice,2)+' x '+
quantity+' + $'+
UTIL.formatPrice(freight,2)+' = </strong>'+'<span class="price price-highlight"><span class="currency">US $</span><span class="value">'+
UTIL.formatPrice(totalPrice,2)+'</span></span>';pnlTotalPrice.style.visibility='visible';}
if(get('inf-pnl-shipping-cost')){if(pnlShippingCost.innerHTML.indexOf('Can')!=-1)
UTIL.showNoDeliverAlert(pnlTotalPrice);}}
window['INF']={};window['INF']['init']=init;window['INF']['getUnitPrice']=getUnitPrice;window['INF']['setFormula']=setFormula;window['INF']['getQuantity']=getQuantity;window['INF']['changeQuantity']=changeQuantity;window['INF']['changeTotlePrice']=changeTotlePrice;window['INF']['pnlTotalPrice']=pnlTotalPrice;window['INF']['checkQuantity']=checkQuantity;})();if(!AE.run.AddToCart){AE.run.AddToCart=function(){this.config={callButtonId:'',containerId:'',closeButtonClassName:'',noticeContainerId:'',productId:'',productStandard:null,productQuantity:null,productCountry:null,productCompany:null,loadingMessage:'',shoppingCartUrl:'',actionUrl:'',proxyUrl:'',pnlProductColor:null,pnlProductSize:null};this.temp={shopcartDialog:null};};AE.run.AddToCart.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config,temp=this.temp;temp.shopcartDialog=new AE.widget.clickShow();temp.shopcartDialog.init({targetId:config.callButtonId,contentId:config.containerId,closeBtnsClassName:config.closeButtonClassName,bodyClickClose:false,needMask:false,onShow:function(){_self.loading({_self:_self});},unShow:function(){_self.add({_self:_self,temp:temp});}});},loading:function(args){var _self=args._self;var config=_self.config;var noticeContainer=get(config.noticeContainerId);noticeContainer.innerHTML=config.loadingMessage;if(AE.app.clickStat){var wsPageType=window.storeParams?'store_product_detail':'product_detail';AE.app.clickStat.buttonClick({projectId:'21200',pageType:wsPageType,buttonType:'add_to_cart',objectType:'product',objectValue:config.productId});}},check:function(args){var _self=args._self;var config=_self.config;var result=true;if(get("skuAttr")){var skuAttrs=YUD.getElementsByClassName("sku-attr","ul",get('buy-now-form'));var tempNode='',liNode='',tempLiNode='',isSelected=true;for(var i=0;tempNode=skuAttrs[i];i++){liNode=tempNode.getElementsByTagName('li');isSelected=false;for(var j=0;tempLiNode=liNode[j];j++){if(YUD.hasClass(tempLiNode,"active")){isSelected=true;}}
if(!isSelected){YUD.setStyle(YUD.getNextSibling(tempNode),"display","block");result=false;break;}else{YUD.setStyle(YUD.getNextSibling(tempNode),"display","none");}}}else{var hidProductColor=get(config.productColor);var hidProductSize=get(config.productSize);var msgProductColor=get(config.msgProductColor);var msgProductSize=get(config.msgProductSize);if(config.pnlProductColor){var colorItems=config.pnlProductColor.getElementsByTagName('a');if(colorItems.length>0&&hidProductColor&&!hidProductColor.value){msgProductColor.style.display='block';result=false;}}
if(config.pnlProductSize){var sizeItems=config.pnlProductSize.getElementsByTagName('a');if(sizeItems.length>0&&hidProductSize&&!hidProductSize.value){msgProductSize.style.display='block';result=false;}}}
return result;},add:function(args){var _self=args._self;var config=_self.config,temp=_self.temp;var noticeContainer=get(config.noticeContainerId);var countinueShoppingButtonId='atc-continue-btn';if(!_self.check({_self:_self})){args.temp.shopcartDialog.hiddenDirectly(null,true);return false;}
var params='productId='+config.productId
+'&standard='+config.productStandard.value
+'&quantity='+config.productQuantity.value
+'&country='+config.productCountry.value
+'&company='+config.productCompany.value;if(get('skuAttr')){params+='&skuAttr='+get('skuAttr').value;}
if(config.pnlProductColor){var colorItems=config.pnlProductColor.getElementsByTagName('a');if(colorItems.length>0&&config.productColor){params+='&color='+config.productColor.value;}}
if(config.pnlProductSize){var sizeItems=config.pnlProductSize.getElementsByTagName('a');if(sizeItems.length>0&&config.productSize){params+='&size='+config.productSize.value;}}
if(config.productStandardName){params+='&stdName='+config.productStandardName.value;}
YAHOO.util.Connect.asyncRequest("POST",runParams.countryServer+"/cross-domain/shoppingcart/index.html",{success:function(data){var shippingCartStr='';var shoppingCartTit='';var pattern=/^([1-9][0-9]*)$/;if(pattern.test(data.responseText)){var itemCount=parseInt(data.responseText);if(itemCount>100){shoppingCartTit='Sorry';shippingCartStr='Sorry, a maximum of 100 products can be put in the cart. Please delete unneeded product(s).';}else{var itemString='<em>'+itemCount+'</em>';if(itemCount==1){itemString+=' item';}
else{itemString+=' items';}
shoppingCartTit='Notice';shippingCartStr='A new item has been added to your Shopping Cart.<br />You now have '+itemString+' in your Shopping Cart.';}
noticeContainer.innerHTML='<div class="atc-caption">'+shoppingCartTit+'</div>'+'<div class="atc-message-success">'+shippingCartStr+'</div>'+'<div class="atc-actions">'+'<a id="atc-view" class="atc-view" href="'+
config.shoppingCartUrl+'"></a><a id="'+
countinueShoppingButtonId+'" class="atc-continue" href="javascript:void(0);"></a>'+'<div style="clear:both;"></div></div>';}else{noticeContainer.innerHTML='<div class="atc-caption">Sorry</div>'+'<div class="atc-message-success">Failed to add, please refresh the page and re-click the "Add to Cart"</div>'+'<div class="atc-actions">'+'<a id="'+
countinueShoppingButtonId+'" class="atc-continue" href="javascript:void(0);"></a>'+'<div style="clear:both;"></div></div>';}
YUE.on('atc-view','mousedown',function(){if(AE.app.clickStat){var wsPageType=window.storeParams?'store_product_detail':'product_detail';AE.app.clickStat.buttonClick({projectId:'21200',pageType:wsPageType,buttonType:'View_shopping_cart',objectType:'product',objectValue:config.productId});}});YUE.on(get(countinueShoppingButtonId),'click',function(){if(AE.app.clickStat){var wsPageType=window.storeParams?'store_product_detail':'product_detail';AE.app.clickStat.buttonClick({projectId:'21200',pageType:wsPageType,buttonType:'Continue_shopping',objectType:'product',objectValue:config.productId});}
temp.shopcartDialog.hiddenDirectly(null,true);});},failure:function(data){noticeContainer.innerHTML='<div class="atc-caption">Sorry</div>'+'<div class="atc-message-success">Failed to add, please refresh the page and re-click the "Add to Cart"</div>'+'<div class="atc-actions">'+'<a id="'+
countinueShoppingButtonId+'" class="atc-continue" href="javascript:void(0);"></a>'+'<div style="clear:both;"></div></div>';YUE.on(get(countinueShoppingButtonId),'click',function(){temp.shopcartDialog.hiddenDirectly(null,true);});},timeout:5000},params);}};}
if(!AE.run.hScrollPanel){var MOVE_RIGHT=0;var MOVE_LEFT=1;AE.run.hScrollPanel=function(){this.config={hScrollPanelId:'',previousLinkClass:'',nextLinkClass:''};this.status={iTotalPage:0,iPage:0};};AE.run.hScrollPanel.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this;var config=_self.config;var oWrapperEl=get(config.hScrollPanelId);if(!oWrapperEl){return;}
var oPrevLinkEl=YUD.getElementsByClassName(config.previousLinkClass,'a',oWrapperEl)[0];var oNextLinkEl=YUD.getElementsByClassName(config.nextLinkClass,'a',oWrapperEl)[0];_self._initStatus({oWrapperEl:oWrapperEl,oPrevLinkEl:oPrevLinkEl,oNextLinkEl:oNextLinkEl});_self._bindAction({oWrapperEl:oWrapperEl,oPrevLinkEl:oPrevLinkEl,oNextLinkEl:oNextLinkEl});},_initStatus:function(args){var _self=this;var config=_self.config;var oLiList=args.oWrapperEl.getElementsByTagName('li');var iLiLen=oLiList.length;var oWrapperEl=args.oWrapperEl;var fLiTotalWidth=0;var oUlWrapperEl=oWrapperEl.getElementsByTagName('div')[0];var oWrapperWidth=parseFloat(_self._getStyle(oUlWrapperEl,'width'));for(var i=0;i<iLiLen;i++){fLiTotalWidth+=parseFloat(_self._getStyle(oLiList[i],'width'))+6;oLiList[i].page=parseInt((fLiTotalWidth-6)/oWrapperWidth,10);}
_self.status.iTotalPage=parseInt((fLiTotalWidth-6)/oWrapperWidth,10);if(_self.status.iPage===0&&_self.status.iTotalPage>0){args.oNextLinkEl.style.visibility='visible';}
else{args.oNextLinkEl.style.visibility='hidden';}},_getStyle:function(el,style){if(!-[1,]){style=style.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});return el.currentStyle[style];}
else{return document.defaultView.getComputedStyle(el,null).getPropertyValue(style);}},_bindAction:function(args){var _self=this;var config=_self.config;var oPrevLinkEl=args.oPrevLinkEl;var oNextLinkEl=args.oNextLinkEl;var oWrapperEl=args.oWrapperEl;YUE.on(oPrevLinkEl,'click',_self._scrollPrevious,{_self:_self,oWrapperEl:oWrapperEl});YUE.on(oNextLinkEl,'click',_self._scrollNext,{_self:_self,oWrapperEl:oWrapperEl});},_scrollPrevious:function(ev,args){var _self=args._self;var oWrapperEl=args.oWrapperEl;var config=_self.config;var oLiList=args.oWrapperEl.getElementsByTagName('li');var oNextLinkEl=YUD.getElementsByClassName(config.nextLinkClass,'a',oWrapperEl)[0];var oPrevLinkEl=YUD.getElementsByClassName(config.previousLinkClass,'a',oWrapperEl)[0];_self._scroll(_self,oWrapperEl,MOVE_RIGHT);if(_self.status.iPage===0){oPrevLinkEl.style.visibility='hidden';}
oNextLinkEl.style.visibility='visible';},_scrollNext:function(ev,args){var _self=args._self;var config=_self.config;var oWrapperEl=args.oWrapperEl;var oLiList=args.oWrapperEl.getElementsByTagName('li');var oNextLinkEl=YUD.getElementsByClassName(config.nextLinkClass,'a',oWrapperEl)[0];var oPrevLinkEl=YUD.getElementsByClassName(config.previousLinkClass,'a',oWrapperEl)[0];_self._scroll(_self,oWrapperEl,MOVE_LEFT);oPrevLinkEl.style.visibility='visible';if(_self.status.iPage==_self.status.iTotalPage){oNextLinkEl.style.visibility='hidden';}},_scroll:function(_self,oWrapperEl,iDirection){var config=_self.config;var oLiList=oWrapperEl.getElementsByTagName('li');var firstLiEl=oLiList[0];var lastLiEl=oLiList[oLiList.length-1];var parentEl=firstLiEl.parentNode;var oWrapperWidth=parseFloat(_self._getStyle(oWrapperEl,'width'));if(iDirection==MOVE_LEFT){_self.status.iPage++;var bCache=false;for(var i=0;i<oLiList.length;i++){if(oLiList[i].page!=_self.status.iPage){if(!bCache&&oLiList[i].page==_self.status.iPage+1){oLiList[i].style.display='block';bCache=true;}
else{oLiList[i].style.display='none';}}
else{oLiList[i].style.display='block';}}}
else{_self.status.iPage--;var bCache=false;for(var i=0;i<oLiList.length;i++){if(oLiList[i].page!=_self.status.iPage){if(!bCache&&oLiList[i].page==_self.status.iPage+1){oLiList[i].style.display='block';bCache=true;}
else{oLiList[i].style.display='none';}}
else{oLiList[i].style.display='block';}}}},_getStyle:function(el,style){if(!-[1,]){style=style.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});return el.currentStyle[style];}
else{return document.defaultView.getComputedStyle(el,null).getPropertyValue(style);}}};}
if(!(typeof YAHOO&&typeof YAHOO.lang&&YAHOO.lang.JSON)){YAHOO.lang.JSON=(function(){var l=YAHOO.lang,_UNICODE_EXCEPTIONS=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_ESCAPES=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,_VALUES=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,_BRACKETS=/(?:^|:|,)(?:\s*\[)+/g,_INVALID=/^[\],:{}\s]*$/,_SPECIAL_CHARS=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,_CHARS={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'};function _revive(data,reviver){var walk=function(o,key){var k,v,value=o[key];if(value&&typeof value==='object'){for(k in value){if(l.hasOwnProperty(value,k)){v=walk(value,k);if(v===undefined){delete value[k];}else{value[k]=v;}}}}
return reviver.call(o,key,value);};return typeof reviver==='function'?walk({'':data},''):data;}
function _char(c){if(!_CHARS[c]){_CHARS[c]='\\u'+('0000'+(+(c.charCodeAt(0))).toString(16)).slice(-4);}
return _CHARS[c];}
function _prepare(s){return s.replace(_UNICODE_EXCEPTIONS,_char);}
function _isValid(str){return l.isString(str)&&_INVALID.test(str.replace(_ESCAPES,'@').replace(_VALUES,']').replace(_BRACKETS,''));}
function _string(s){return'"'+s.replace(_SPECIAL_CHARS,_char)+'"';}
function _stringify(h,key,d,w,pstack){var o=typeof w==='function'?w.call(h,key,h[key]):h[key],i,len,j,k,v,isArray,a;if(o instanceof Date){o=l.JSON.dateToString(o);}else if(o instanceof String||o instanceof Boolean||o instanceof Number){o=o.valueOf();}
switch(typeof o){case'string':return _string(o);case'number':return isFinite(o)?String(o):'null';case'boolean':return String(o);case'object':if(o===null){return'null';}
for(i=pstack.length-1;i>=0;--i){if(pstack[i]===o){return'null';}}
pstack[pstack.length]=o;a=[];isArray=l.isArray(o);if(d>0){if(isArray){for(i=o.length-1;i>=0;--i){a[i]=_stringify(o,i,d-1,w,pstack)||'null';}}else{j=0;if(l.isArray(w)){for(i=0,len=w.length;i<len;++i){k=w[i];v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+':'+v;}}}else{for(k in o){if(typeof k==='string'&&l.hasOwnProperty(o,k)){v=_stringify(o,k,d-1,w,pstack);if(v){a[j++]=_string(k)+':'+v;}}}}
a.sort();}}
pstack.pop();return isArray?'['+a.join(',')+']':'{'+a.join(',')+'}';}
return undefined;}
return{isValid:function(s){return _isValid(_prepare(s));},parse:function(s,reviver){s=_prepare(s);if(_isValid(s)){return _revive(eval('('+s+')'),reviver);}
throw new SyntaxError('parseJSON');},stringify:function(o,w,d){if(o!==undefined){if(l.isArray(w)){w=(function(a){var uniq=[],map={},v,i,j,len;for(i=0,j=0,len=a.length;i<len;++i){v=a[i];if(typeof v==='string'&&map[v]===undefined){uniq[(map[v]=j++)]=v;}}
return uniq;})(w);}
d=d>=0?d:1/0;return _stringify({'':o},'',d,w,[]);}
return undefined;},dateToString:function(d){function _zeroPad(v){return v<10?'0'+v:v;}
return d.getUTCFullYear()+'-'+_zeroPad(d.getUTCMonth()+1)+'-'+_zeroPad(d.getUTCDate())+'T'+_zeroPad(d.getUTCHours())+':'+_zeroPad(d.getUTCMinutes())+':'+_zeroPad(d.getUTCSeconds())+'Z';},stringToDate:function(str){if(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})Z$/.test(str)){var d=new Date();d.setUTCFullYear(RegExp.$1,(RegExp.$2|0)-1,RegExp.$3);d.setUTCHours(RegExp.$4,RegExp.$5,RegExp.$6);return d;}
return str;}};})();};

window.runParams=window.runParams||eval('('+get('run-params').value+')');YUE.onContentReady('buy-now-form',function(){var productId=get('hid-product-id').value;var runParams=window.runParams;var freightUrl=runParams.freightServer;var proxyDomain='aliexpress.com';var imageUrl=runParams.imageServer;var shopcartServer=runParams.shopcartServer;var userType=runParams.userType;if(window.localStorage){var country_local=AE.app.LocalStorage._getLocalStorage('country_code');var countryCode=country_local?country_local:runParams.userCountry;}else{var countryCode=runParams.userCountry;}
var selStandardId='inf-sel-standard';var objectStockpile="";var countryServer=runParams.countryServer;var fakeSelCountryId='inf-fake-sel-country';var fakeSelCountryContainerId='country-container';var loadingImg=new Image();loadingImg.src='http://img.alibaba.com/images/eng/wholesale/icon/loading-middle.gif';loadCountry();if(get('objectStockpile')){objectStockpile=get('objectStockpile').value;}else{objectStockpile=false;}
(new AE.run.AddToCart()).init({callButtonId:'inf-add-to-cart',containerId:'atc-box',closeButtonClassName:'atc-close',noticeContainerId:'atc-notice',productId:productId,productStandard:get('inf-sel-standard'),productQuantity:get('inf-txt-quantity'),productCountry:get('inf-hid-country-code'),productCompany:get('inf-hid-shipping-company'),productColor:get('inf-product-color-value'),productSize:get('inf-product-size'),productStandardName:get('inf-product-standard-name'),msgProductColor:get('inf-msg-color'),msgProductSize:get('inf-msg-size'),loadingMessage:'<div class="atc-message atc-loading">Adding a product to your<br />Shopping Cart...</div>',shoppingCartUrl:shopcartServer+'/shopcart/shopcartDetail.htm',actionUrl:shopcartServer+'/addToShopcart.htm',proxyUrl:shopcartServer+'/ajax_proxy.html?iframe_delete=true',proxyDomain:'aliexpress.com',pnlProductColor:get('inf-pnl-color'),pnlProductSize:get('inf-pnl-size')});function loadCountry(){YAHOO.util.Connect.asyncRequest('GET',countryServer+'/wholesale-allcountries.html',{success:function(o){var countryContainerEl=appendCountryDOM(eval('('+o.responseText+')'));window['UTIL']['countryContainer']=countryContainerEl;initINF();if(typeof(AE.run.intlMyaliexpress)=='object'){var test=new AE.run.intlMyaliexpress.meHomePage.moduleData();test.init();}},failure:function(o){},argument:[]});}
function initINF(countryContainerEl){INF.init({productId:productId,freightUrl:freightUrl,proxyDomain:proxyDomain,imageDir:imageUrl,countryCode:countryCode,userType:userType,frmBuyNowId:'buy-now-form',selStandardId:selStandardId,hidProductStockpile:objectStockpile,msgStockpileId:'inf-msg-stockpile',txtQuantityId:'inf-txt-quantity',msgQuantityId:'inf-msg-quantity',bntQuantityCalculateId:'inf-bnt-quantity-calculate',lblUnitId:'inf-lbl-unit',pnlShippingCostId:'inf-pnl-shipping-cost',lnkShippingId:'inf-lnk-shipping',dlgShippingId:'inf-dlg-shipping',dlgShippingCompanyId:'inf-dlg-shipping-company',radTransporterId:'inf-rad-shipping-company',btnShippingOkId:'inf-btn-shipping-ok',pnlTotalPriceId:'inf-pnl-total-price',btnBuyNow:'inf-btn-buy-now',fakeSelCountryId:fakeSelCountryId,fakeSelCountryContainerId:fakeSelCountryContainerId,pnlPriceDetailClassName:'inf-pnl-price-detail',hidCountryCodeId:'inf-hid-country-code',hidShippingCompanyId:'inf-hid-shipping-company',shippingCompanyName:'rad-shipping-company',pnlProductColor:'inf-pnl-color',pnlProductSize:'inf-pnl-size',hidProductColor:'inf-product-color-value',hidProductSize:'inf-product-size',msgProductColor:'inf-msg-color',msgProductSize:'inf-msg-size',shippingSelectErrorId:'ss-error'});}
function appendCountryDOM(jsonCountry){var countryArr=jsonCountry.countries;var listContainer=document.createElement('div');var len=countryArr.length;listContainer.className='list-container';var countryContainerEl=document.createElement('div');for(var i=0;i<len;i++){var aEl=document.createElement('a');var spanEl=document.createElement('span');var countryCode=countryArr[i].c.toLowerCase();var countryName=countryArr[i].n;aEl.rel='nofollow';aEl.href='javascript:void(0);';var ignore=countryArr[i]['i'];spanEl.innerHTML=countryName;if(ignore=='ignore'){spanEl.className='list-sep ignore';listContainer.appendChild(spanEl);countryContainerEl.appendChild(spanEl);}
else{spanEl.className='css_flag css_'+countryCode;aEl.appendChild(spanEl);listContainer.appendChild(aEl);countryContainerEl.appendChild(aEl);}}
countryContainerEl.className='list-container';return countryContainerEl;}
(new AE.run.hScrollPanel).init({hScrollPanelId:"payment-slide",previousLinkClass:'pm-prev',nextLinkClass:'pm-next'});});;

AE.namespace('AE.app');if(!AE.app.Magnifier){AE.app.Magnifier=function(){this.config={targetId:'',glassOpacity:0.5,glassBackground:'#FFFFFF',glassBorderWidth:'1',glassBorderColor:'#999999',viewportBorderWidth:'5',viewportBorderColor:'#CCCCCC',viewportSize:[400,300],viewportOffset:null,imageUrl:'',canvasMaxImgSize:250,canvasGlassRadius:120,canvasGlassBorder:120};this.temp={thumb:null,glass:null,baffle:null,viewport:null,visibleArea:null,image:null,multiple:1,viewportSize:null,hideGlassThreadArray:[]};};AE.app.Magnifier.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this;var config=_self.config;var temp=_self.temp;var thumb=get(config.targetId);temp.thumb=thumb;_self.loadThumbStyle({_self:_self});if(/MSIE 8/.test(navigator.userAgent)||/MSIE 7/.test(navigator.userAgent)||/MSIE 6/.test(navigator.userAgent)||/OPERA/i.test(navigator.userAgent)){_self.preloadImage({_self:_self});}else{_self.onloadImage({_self:_self});}},preloadImage:function(args){var _self=args._self;var preImage=new Image();preImage.src=_self.getImageUrl(args);if(preImage.complete){_self.run(args);}else{setTimeout(function(){_self.preloadImage(args);},200);}},onloadImage:function(args){var _self=args._self;var preImage=new Image();preImage.src=_self.getImageUrl(args);preImage.onload=function(){_self.run(args);};},_canvasRun:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var canvas;var context;var offsetSize=config.canvasGlassBorder/2+config.canvasGlassRadius;var timeout;var canvasAppendFlag=false;function _appendCanvas2Doc(){try{canvas=document.createElement("canvas");canvas.width=config.canvasMaxImgSize+3*(config.canvasGlassRadius+5);canvas.height=canvas.width;canvas.style.display='block';canvas.style.border='none';canvas.style.overflow='hidden';temp.thumb.getElementsByTagName('img')[0].style.visibility='hidden';var posXY=YUD.getXY(temp.thumb);canvas.style.position='absolute';canvas.style.left=(posXY[0]-offsetSize)+'px';canvas.style.top=(posXY[1]-offsetSize)+'px';document.body.appendChild(canvas);context=canvas.getContext("2d");}catch(e){console.error(e);}}
function _drawAdjustedImg(imageObj){var actualWidth=0;var actualHeight=0;var scale=1;var posX=0;var posY=0;var containerSize=config.canvasMaxImgSize;if(imageObj.width>=imageObj.height&&imageObj.width>containerSize){scale=imageObj.width/containerSize;actualWidth=imageObj.width/scale;actualHeight=imageObj.height/scale;posY=(containerSize-actualHeight)/2;}else if(imageObj.height>=imageObj.width&&imageObj.height>containerSize){scale=imageObj.height/containerSize;actualWidth=imageObj.width/scale;actualHeight=imageObj.height/scale;posX=(containerSize-actualWidth)/2;}else if(imageObj.height<=containerSize&&imageObj.width<=containerSize){actualWidth=imageObj.width;actualHeight=imageObj.height;posX=(containerSize-actualHeight)/2;posY=(containerSize-actualWidth)/2;}
context.drawImage(imageObj,posX+offsetSize,posY+offsetSize,actualWidth,actualHeight);return{posX:posX,posY:posY,scale:scale,actualWidth:actualWidth,actualHeight:actualHeight};}
function _getMousePos(canvas,evt){var obj=canvas;var top=0;var left=0;while(obj&&obj.tagName!='BODY'){top+=obj.offsetTop;left+=obj.offsetLeft;obj=obj.offsetParent;}
var mouseX=evt.clientX-left+window.pageXOffset;var mouseY=evt.clientY-top+window.pageYOffset;return{x:mouseX,y:mouseY};}
function _bindAction(){YUE.on(window,'resize',function(){if(canvas&&canvas.parentNode){canvas.parentNode.removeChild(canvas);}
clearTimeout(timeout);timeout=setTimeout(function(){_self._canvasRun(args);},200);});YUE.on(temp.thumb,'mousemove',function(){if(!canvasAppendFlag){_appendCanvas2Doc();canvasAppendFlag=true;var adjustInfo=_drawAdjustedImg(temp.image);canvas.style.left=(parseFloat(canvas.style.left)-adjustInfo.posX)+'px';canvas.style.top=(parseFloat(canvas.style.top)-adjustInfo.posY)+'px';_bindAction();canvas.style.zIndex=999;}});YUE.on(canvas,'click',function(evt){window.open(temp.thumb.href);});YUE.on(canvas,'mousemove',function(evt){canvas.style.zIndex=999;var mousePos=_getMousePos(canvas,evt);var containerSize=config.canvasMaxImgSize;if(mousePos.x<offsetSize||mousePos.y<offsetSize||mousePos.x>offsetSize+config.canvasMaxImgSize||mousePos.y>offsetSize+config.canvasMaxImgSize){if(canvas&&canvas.parentNode){canvas.parentNode.removeChild(canvas);}
canvasAppendFlag=false;temp.thumb.getElementsByTagName('img')[0].style.visibility='visible';return;}
if(temp.image.width<containerSize||temp.image.height<containerSize){return;}
context.clearRect(0,0,canvas.width,canvas.height);var adjustInfo=_drawAdjustedImg(temp.image);context.save();context.beginPath();context.arc(mousePos.x,mousePos.y,config.canvasGlassRadius,0,2*Math.PI,false);context.lineWidth=10;context.strokeStyle="white";context.shadowOffsetX=2;context.shadowOffsetY=2;context.shadowBlur=2;context.shadowColor="rgba(0,0,0,0.5)";context.fillStyle='white';context.fill();context.stroke();context.clip();var offsetY=(containerSize-adjustInfo.actualHeight)/2;var offsetX=(containerSize-adjustInfo.actualWidth)/2;var radioX=(mousePos.x-config.canvasGlassRadius-(config.canvasGlassBorder/2)-offsetX)/(containerSize-offsetX*2);var radioY=(mousePos.y-config.canvasGlassRadius-(config.canvasGlassBorder/2)-offsetY)/(containerSize-offsetY*2);var imgPosX=mousePos.x-radioX*temp.image.width;var imgPosY=mousePos.y-radioY*temp.image.height;context.drawImage(temp.image,imgPosX,imgPosY);context.closePath();context.restore();});YUE.on(canvas,'mouseout',function(evt){if(canvas&&canvas.parentNode){canvas.parentNode.removeChild(canvas);}
canvasAppendFlag=false;temp.thumb.getElementsByTagName('img')[0].style.visibility='visible';});}
_bindAction();},run:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var thumb=temp.thumb;var image=new Image();image.src=_self.getImageUrl(args);image.alt='';temp.image=image;try{document.createElement("canvas").getContext("2d");if(navigator.userAgent.indexOf('Chrome')!=-1){}else{_self._canvasRun(args);return;}}
catch(e){}
var multiple=_self.getMultiple(args);temp.multiple=multiple;var viewportSize=_self.getViewportSize(args);temp.viewportSize=viewportSize;var baffle=_self.createBaffle(args);temp.baffle=baffle;var viewport=_self.createViewport(args);temp.viewport=viewport;_self.hide([baffle,viewport]);thumb.appendChild(baffle);thumb.appendChild(viewport);var visibleArea=_self.createVisibleArea(args);temp.visibleArea=visibleArea;_self.loadVisibleAreaStyle(args);viewport.appendChild(visibleArea);visibleArea.appendChild(image);var glass=_self.createGlass(args);temp.glass=glass;_self.loadGlassStyle(args);thumb.appendChild(glass);YUE.on(thumb,'mousemove',_self.moveGlass,args);YUE.on(thumb,'mouseover',_self.entryThumb,args);YUE.on(thumb,'mouseout',_self.leaveThumb,args);YUE.on(glass,'mouseover',function(){_self.show([baffle,viewport]);});YUE.on(glass,'mouseout',function(){_self.hide([viewport,baffle]);});},entryThumb:function(event,args){var _self=args._self;var temp=_self.temp;var threadArray=temp.hideGlassThreadArray;_self.loadViewportStyle(args);for(var i=0;i<threadArray.length;i++){var thread=threadArray.pop();clearTimeout(thread);}},leaveThumb:function(event,args){var _self=args._self;var temp=_self.temp;var glass=temp.glass;var threadArray=temp.hideGlassThreadArray;if(!_self.isMouseOver(event,args)){var thread=setTimeout(function(){_self.hide([glass]);},400);threadArray.push(thread);}},isMouseOver:function(event,args){var _self=args._self;var temp=_self.temp;var thumb=temp.thumb;var interval=_self.getInterval(thumb);var mousePoint=_self.getMousePoint(event);if(mousePoint.x<interval.x[0]||mousePoint.x>interval.x[1]||mousePoint.y<interval.y[0]||mousePoint.y>interval.y[1]){return false;}
return true;},getImageUrl:function(args){var _self=args._self;var config=_self.config;if(config.imageUrl.length>0){return config.imageUrl;}
var temp=_self.temp;var thumb=temp.thumb;return thumb.href;},createGlass:function(args){var _self=args._self;var glass=document.createElement('span');glass.className='glass';return glass;},createBaffle:function(args){var baffle=document.createElement('iframe');baffle.src=globalImgServer+'/js/blank.html';return baffle;},createViewport:function(args){var viewport=document.createElement('div');viewport.className='viewport';return viewport;},createVisibleArea:function(args){var visibleArea=document.createElement('div');visibleArea.className='visible';return visibleArea;},moveGlass:function(event,args){var _self=args._self;var temp=_self.temp;var glass=temp.glass;var image=temp.image;var multiple=temp.multiple;_self.show([glass]);glassOffset=_self.getGlassOffset(event,{_self:_self});glass.style.left=glassOffset.left+'px';glass.style.top=glassOffset.top+'px';image.style.marginLeft=_self.round(glassOffset.left*multiple.horizontal*(-1))+'px';image.style.marginTop=_self.round(glassOffset.top*multiple.vertical*(-1))+'px';},loadThumbStyle:function(args){var _self=args._self;var temp=_self.temp;var thumb=temp.thumb;thumb.style.display='inline-block';thumb.style.textDecoration='none';thumb.style.position='relative';var image=thumb.getElementsByTagName('img')[0];image.style.display='block';},loadGlassStyle:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var glass=temp.glass;var multiple=temp.multiple;var viewportSize=temp.viewportSize;_self.hide([glass]);glass.style.width=_self.round(viewportSize.width/multiple.horizontal)+'px';glass.style.height=_self.round(viewportSize.height/multiple.vertical)+'px';glass.style.background=config.glassBackground;glass.style.borderWidth=config.glassBorderWidth+'px';glass.style.borderStyle='solid';glass.style.borderColor=config.glassBorderColor;glass.style.marginLeft=(config.glassBorderWidth*(-1))+'px';glass.style.marginTop=(config.glassBorderWidth*(-1))+'px';glass.style.position='absolute';glass.style.left='0';glass.style.top='0';glass.style.cursor='move';_self.setOpacity([glass],config.glassOpacity);},loadVisibleAreaStyle:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var visibleArea=temp.visibleArea;var viewportSize=temp.viewportSize;visibleArea.style.borderWidth=config.viewportBorderWidth+'px';visibleArea.style.borderStyle='solid';visibleArea.style.borderColor=config.viewportBorderColor;visibleArea.style.width=viewportSize.width+'px';visibleArea.style.height=viewportSize.height+'px';visibleArea.style.overflow='hidden';},loadViewportStyle:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var thumb=temp.thumb;var viewport=temp.viewport;var baffle=temp.baffle;var viewportSize=temp.viewportSize;var offset=_self.getViewportOffset(args);var thumbOffset=_self.getCumulativeOffset(thumb);baffle.style.width=(viewportSize.width+config.viewportBorderWidth*2+15+2)+'px';baffle.style.height=(viewportSize.height+config.viewportBorderWidth*2+2)+'px';baffle.style.position='absolute';baffle.style.left=(offset.left-1)+'px';baffle.style.top=(offset.top-1)+'px';baffle.style.background='#FFFFFF';baffle.style.border='none';baffle.style.zIndex=99;baffle.style.opacity=0;baffle.style.filter='alpha(opacity=0)';viewport.style.zIndex=parseInt(baffle.style.zIndex,10)+1;viewport.style.position='absolute';viewport.style.left=offset.left+'px';viewport.style.top=offset.top+'px';},getViewportOffset:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var thumb=temp.thumb;var viewport=temp.viewport;var viewportSize=temp.viewportSize;var offset={left:0,top:0};if(config.viewportOffset){offset.left=config.viewportOffset[0];offset.top=config.viewportOffset[1];return offset;}
var thumbOffset=_self.getCumulativeOffset(thumb);var thumbVisibleSize=_self.getVisibleSize(thumb);var pageWidth=YUD.getViewportWidth();var pageHeight=YUD.getViewportHeight();var viewportRight=thumbOffset.left+thumbVisibleSize.width+viewportSize.width+config.viewportBorderWidth*2+25;var viewportBottom=thumbOffset.top+viewportSize.height;if(viewportRight>pageWidth){YUD.addClass(viewport,'viewport-left');offset.left=0-viewportSize.width-config.viewportBorderWidth*2-25;}else{YUD.removeClass(viewport,'viewport-left');offset.left=thumbVisibleSize.width+10;}
if(viewportBottom>pageHeight){YUD.addClass(viewport,'viewport-align-bottom');offset.top=thumbVisibleSize.height-viewportSize.height-config.viewportBorderWidth*2;}else{YUD.removeClass(viewport,'viewport-align-bottom');offset.top=0;}
return offset;},getGlassOffset:function(event,args){var offset={left:0,top:0};var _self=args._self;var temp=_self.temp;var thumb=temp.thumb;var glass=temp.glass;var thumbOffset=_self.getCumulativeOffset(thumb);var mousePoint=_self.getMousePoint(event);var glassSize=_self.getSize(glass);var thumbSize=_self.getSize(thumb);var cursorX=mousePoint.x-thumbOffset.left;offset.left=cursorX-glassSize.width/2;if(offset.left<0){offset.left=0;}else if(offset.left>thumbSize.width-glassSize.width){offset.left=thumbSize.width-glassSize.width;}
var cursorY=mousePoint.y-thumbOffset.top;offset.top=cursorY-glassSize.height/2;if(offset.top<0){offset.top=0;}else if(offset.top>thumbSize.height-glassSize.height){offset.top=thumbSize.height-glassSize.height;}
return offset;},getMousePoint:function(event){var point={x:0,y:0};if(typeof window.pageYOffset!='undefined'){point.x=window.pageXOffset;point.y=window.pageYOffset;}
else if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){point.x=document.documentElement.scrollLeft;point.y=document.documentElement.scrollTop;}
else if(typeof document.body!='undefined'){point.x=document.body.scrollLeft;point.y=document.body.scrollTop;}
point.x+=event.clientX;point.y+=event.clientY;return point;},getViewportSize:function(args){var _self=args._self;var config=_self.config;var temp=_self.temp;var image=temp.image;var multiple=temp.multiple;var dimension={width:0,height:0};if(multiple.horizontal<=1||config.viewportSize[0]>image.width){dimension.width=image.width;}else{dimension.width=config.viewportSize[0];}
if(multiple.vertical<=1||config.viewportSize[1]>image.height){dimension.height=image.height;}else{dimension.height=config.viewportSize[1];}
return dimension;},getMultiple:function(args){var multiple={horizontal:0,vertical:0};var _self=args._self;var temp=_self.temp;var thumb=temp.thumb;var image=temp.image;var thumbSize=_self.getSize(thumb);var imageSize=_self.getImageSize(image);multiple.horizontal=imageSize.width/thumbSize.width;if(multiple.horizontal<=1){multiple.horizontal=1;}
multiple.vertical=imageSize.height/thumbSize.height;if(multiple.vertical<=1){multiple.vertical=1;}
return multiple;},getImageSize:function(image){var dimension={width:0,height:0};dimension.width=image.width;dimension.height=image.height;return dimension;},getSize:function(element){var dimension={width:0,height:0};dimension.width=element.clientWidth;dimension.height=element.clientHeight;return dimension;},getVisibleSize:function(element){var dimension={width:0,height:0};dimension.width=element.offsetWidth;dimension.height=element.offsetHeight;return dimension;},getCumulativeOffset:function(element){var offset={left:0,top:0};do{offset.left+=element.offsetLeft||0;offset.top+=element.offsetTop||0;element=element.offsetParent;}while(element);return offset;},getInterval:function(element){var interval={x:[0,0],y:[0,0]};var offset=this.getCumulativeOffset(element);var visibleSize=this.getVisibleSize(element);interval.x=[offset.left,offset.left+visibleSize.width];interval.y=[offset.top,offset.top+visibleSize.height];return interval;},show:function(elements){for(var i=0,len=elements.length;i<len;i++){element=elements[i];element.style.visibility='visible';element.style.display='block';}},hide:function(elements){for(var i=0,len=elements.length;i<len;i++){element=elements[i];element.style.display='none';element.style.visibility='hidden';}},round:function(value){return parseInt(value+0.5,10);},setOpacity:function(elements,opacity){for(var i=0,len=elements.length;i<len;i++){element=elements[i];element.style.opacity=opacity;element.style.filter='alpha(opacity='+opacity*100+')';}}};};

AE.namespace('AE.run');if(!AE.run.infImageShow){AE.run.infImageShow=function(){this.config={sINFImageContainerId:'img',sSICClassName:'image-nav-item',sMICClassName:'image-item',iMICWH:250,iSICWH:35,sZoomHref:'',sZoomTarget:'_blank',sSICSelectedClassName:'current',bEnableMagnifier:false,oImageResource:[],aBISrc:[]};this.cache={oSICElList:{},oMICEl:{},oSIBITable:{},oLoadedBI:{}};};AE.run.infImageShow.prototype={init:function(customConfig){var config=YL.merge(this.config,customConfig||{});var _self=this;var oMainContainerEl=get(config.sINFImageContainerId);var oSICElList=YUD.getElementsByClassName(config.sSICClassName,'*',oMainContainerEl);var oMICEl=YUD.getElementsByClassName(config.sMICClassName,'*',oMainContainerEl)[0];_self.config=config;this.cache.oSICElList=oSICElList;this.cache.oMICEl=oMICEl;if(oSICElList.length!==0){_self._initMultiPreview({});}
else{_self._loadMI({sBISrc:_self.config.aBISrc[0]});}},setMainPic:function(srcPig){var _self=this;_self._loadMI({'sBISrc':srcPig});},_initMultiPreview:function(args){var _self=this;var oSICElList=_self.cache.oSICElList;function checkImages(oTempImage,tempEl){var result=false;result=oTempImage.complete;if(result){var oImageSize=_self._getActualImageSize({iWrapperSize:_self.config.iSICWH,iImageWidth:oTempImage.width,iImageHeight:oTempImage.height,oContainerEl:oTempImageEl});oTempImageEl.width=oImageSize.iWidth;oTempImageEl.height=oImageSize.iHeight;tempEl.style.visibility='visible';}
else{YUE.on(oTempImage,'load',function(ev,args){var _self=args._self;var oImageSize=_self._getActualImageSize({iWrapperSize:_self.config.iSICWH,iImageWidth:this.width,iImageHeight:this.height,oContainerEl:oTempImageEl});this.width=oImageSize.iWidth;this.height=oImageSize.iHeight;tempEl.style.visibility='visible';tempEl.getElementsByTagName('img')[0].width=this.width;tempEl.getElementsByTagName('img')[0].height=this.height;},{_self:_self});}}
var iAlreadySelectedIndex=0;for(var i=oSICElList.length;i--;){var tempEl=oSICElList[i];var oTempImageEl=tempEl.getElementsByTagName('img')[0];var oTempImage=new Image();_self.cache.oSIBITable[oTempImageEl.src]=_self.config.aBISrc[i];if(tempEl.className.indexOf('current')!=-1){iAlreadySelectedIndex=i;}
oTempImage.src=oTempImageEl.src;checkImages(oTempImage,tempEl);}
var tempEl=oSICElList[iAlreadySelectedIndex]
tempEl.className=tempEl.className+' current';_self._loadMI({'sBISrc':_self.config.aBISrc[iAlreadySelectedIndex]});_self._bindSIAction();},_bindSIAction:function(args){var _self=this;var oSICElList=_self.cache.oSICElList;YUE.on(oSICElList,"mouseover",_self._onSIAction,{_self:_self});},_removeAllSICurrentClass:function(){var oSICElList=this.cache.oSICElList;for(var i=oSICElList.length;i--;){var tempEl=oSICElList[i];tempEl.className=tempEl.className.replace(/current/g,'');}},_onSIAction:function(e,args){var _self=args._self;e=e||window.event;var target=e.target||e.srcElement;if(target.nodeName=='IMG'){_self._removeAllSICurrentClass();target.parentNode.parentNode.className=target.parentNode.parentNode.className+' current';_self._loadMI({'sBISrc':_self.cache.oSIBITable[target.src]});}},_getActualImageSize:function(args){var iWrapperSize=args.iWrapperSize;var iImageWidth=args.iImageWidth;var iImageHeight=args.iImageHeight;var oContainerEl=args.oContainerEl;var iActualWidth,iActualHeight;var oReturnSize={};if(iImageWidth>iWrapperSize||iImageHeight>iWrapperSize){if(iImageWidth>iImageHeight){iActualWidth=iWrapperSize;iActualHeight=parseInt(iActualWidth/iImageWidth*iImageHeight,10);if(oContainerEl){oContainerEl.style.marginTop=parseInt((iWrapperSize-iActualHeight)/2,10)+'px';}}
else{iActualHeight=iWrapperSize;iActualWidth=parseInt(iActualHeight/iImageHeight*iImageWidth,10);}}
else if(iImageWidth<iWrapperSize&&iImageHeight<iWrapperSize){if(oContainerEl){oContainerEl.style.marginTop=parseInt((iWrapperSize-iImageHeight)/2,10)+'px';}
iActualWidth=iImageWidth;iActualHeight=iImageHeight;}
else{iActualWidth=iImageWidth;iActualHeight=iImageHeight;}
oReturnSize.iWidth=iActualWidth;oReturnSize.iHeight=iActualHeight;return oReturnSize;},_appendMIImage:function(args){var oImage=args.oImage;var _self=args._self;var cache=_self.cache;var iImageWidth=parseInt(oImage.width,10);var iImageHeight=parseInt(oImage.height,10);var oAEl=document.createElement("a");var iMICLength=_self.config.iMICWH;var oImageSize=_self._getActualImageSize({iWrapperSize:iMICLength,iImageWidth:iImageWidth,iImageHeight:iImageHeight,oContainerEl:oAEl});oAEl.style.display='inline-block';oAEl.style.textDecoration='none';oAEl.style.position='relative';if(_self.config.sZoomHref.length>0){oAEl.href=_self.config.sZoomHref;oAEl.target=_self.config.sZoomTarget;}else{oAEl.href='javascript:void(0);';}
cache.oMICEl.innerHTML='';var sImgSrc='<img style="margin-top: 0pt; display: block;" src="'+oImage.src+'" height="'+oImageSize.iHeight+'" width="'+oImageSize.iWidth+'">';oAEl.innerHTML=sImgSrc;cache.oMICEl.appendChild(oAEl);if(_self.config.bEnableMagnifier){_self._loadMagnifier({oAEl:oAEl,sBISrc:oImage.src});}
cache.oLoadedBI[oImage.src]=oImage;},_loadMI:function(args){var _self=this;var config=_self.config;var cache=_self.cache;var oCacheImage=_self.cache.oLoadedBI[args.sBISrc];if(!oCacheImage){var oLoadingEl=document.createElement('div');oLoadingEl.className='loadingHint';oLoadingEl.style.width='100%';oLoadingEl.style.height='100%';cache.oMICEl.innerHTML='';cache.oMICEl.appendChild(oLoadingEl);var oImage=new Image();oImage.onload=function(){_self._appendMIImage({_self:_self,oImage:oImage});};oImage.src=args.sBISrc;}
else{_self._appendMIImage({_self:_self,oImage:oCacheImage});}},_loadMagnifier:function(args){var _self=this;var thumb=args.oAEl;var sBISrc=args.sBISrc;var wrap=_self.cache.oMICEl;var warpVisibleSize=_self._getVisibleSize(wrap);var warpOffset=_self._getCumulativeOffset(wrap);var thumbOffset=_self._getCumulativeOffset(thumb);var viewportLeft=warpVisibleSize.width+warpOffset.left-thumbOffset.left+1;var viewportTop=warpOffset.top-thumbOffset.top;(new AE.app.Magnifier()).init({targetId:thumb,imageUrl:sBISrc,viewportSize:[320,240],viewportOffset:[viewportLeft,viewportTop],autoResize:true});},_getVisibleSize:function(element){var dimension={width:0,height:0};dimension.width=element.offsetWidth;dimension.height=element.offsetHeight;return dimension;},_getCumulativeOffset:function(element){var offset={left:0,top:0};do{offset.left+=element.offsetLeft||0;offset.top+=element.offsetTop||0;element=element.offsetParent;}
while(element);return offset;}};};

if(!AE.run.getFeedbackScoreArea){AE.run.getFeedbackScoreArea=function(){this.config={levelNum:0};this.levelArea={"L11":[3,9],"L12":[10,29],"L13":[30,99],"L14":[100,199],"L15":[200,499],"L21":[500,999],"L22":[1000,1999],"L23":[2000,4999],"L24":[5000,9999],"L25":[10000,19999],"L31":[20000,49999]}};AE.run.getFeedbackScoreArea.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config;var scoreAreaCont="";if(config.levelNum!==0&&!isNaN(config.levelNum)){var returnCont=_self.createCont(_self.getArea(config.levelNum));if(returnCont!==""){scoreAreaCont=_self.createCont(_self.getArea(config.levelNum));}}
return scoreAreaCont;},getArea:function(n){var _self=this,levelArea=this.levelArea;var level='L'+n;if(levelArea[level]!=undefined){return levelArea[level];}else{return false;}},createCont:function(areaArr){if(areaArr){var areaArr=areaArr;var cont='This is the Feedback Symbol for Feedback Scores from '+areaArr[0]+'-'+areaArr[1]+'.';return cont;}else{return"";}}}};

if(!AE.run.loadFeedbackRating){AE.run.loadFeedbackRating=function(){this.config={targetId:'',levelClassName:'',textClassName:'',rateClassName:'',timeClassName:'',scoreClassName:'',timeUnitClassName:'',tipButtonId:'',tipContainerId:'',ownerMemberId:'',companyId:'',productId:'',startValidDate:'',imageUrl:''};};AE.run.loadFeedbackRating.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config;var target=get(config.targetId);var feedbackLevel=YUD.getElementsByClassName(config.levelClassName,'*',target)[0];var feedbackText=YUD.getElementsByClassName(config.textClassName,'*',target)[0];var feedbackRate=YUD.getElementsByClassName(config.rateClassName,'*',target)[0];var feedbackScore=YUD.getElementsByClassName(config.scoreClassName,'*',target)[0];var feedbackTime=YUD.getElementsByClassName(config.timeClassName,'*',target)[0];var feedbackTimeUnit=YUD.getElementsByClassName(config.timeUnitClassName,'*',target)[0];YAHOO.util.Connect.asyncRequest("GET",runParams.serverUrl+'/cross-domain/feedback/index.html?ownerMemberId='+config.ownerMemberId+'&companyId='+config.companyId+'&productId='+config.productId+'&memberType=seller'+'&startValidDate='+config.startValidDate,{cache:false,timeout:10000,success:function(data){var args=data.responseText;if(!!get("order-completed")){get("order-completed").style.display="block";}
if(!!get("order-completed-btn-tip")&&!!get("order-completed-pnl-tip")){(new AE.widget.clickShow()).init({targetId:"order-completed-btn-tip",contentId:"order-completed-pnl-tip",needMask:true,excursion:[-170,15],closeBtnsClassName:'close-button'});}
if(!args){return;}
args=args.split(',');if(args[0]==0){var extraFeedback=get('extra-feedback');extraFeedback.innerHTML='<p>No feedback score.</p>';target.style.display='block';YUD.setStyle(extraFeedback,'padding-bottom','10px');YUD.setStyle(extraFeedback,'color','#999');}else{feedbackRate.innerHTML=args[1]+'%';if(feedbackTime!==undefined){feedbackTime.innerHTML=_self.commafy(args[0]);feedbackTimeUnit.innerHTML=(parseInt(args[0])==1?'&nbsp;Rating':'&nbsp;Ratings');}
if(args[2]&&args[2]!=0&&args.length>3){var imageCode='<img alt="" src="'+config.imageUrl+'/wimg/feedback/icon/'+args[2]+'.gif"';var titleCont="";if(args[3]){if(feedbackScore){feedbackScore.innerHTML=args[3];feedbackScore.setAttribute('title','Feedback Score '+args[3]);if(AE.run.getFeedbackScoreArea){titleCont=(new AE.run.getFeedbackScoreArea()).init({levelNum:args[2].slice(0,2)});}}
imageCode+=' title="'+titleCont+'"';}
imageCode+=' />';feedbackLevel.innerHTML=imageCode;feedbackText.style.display='block';}
target.style.display='block';}},failure:function(){}})},commafy:function(num){num=num+'';var re=/(-?\d+)(\d{3})/;while(re.test(num)){num=num.replace(re,"$1,$2");}
return num;}};};

AE.namespace('AE.run.DSR');AE.run.DSR=function(){this.config={targetBox:get('extra-feedback'),showClass:'dsr-show',wrapClass:'dsr-wrap',server:'http://www.aliexpress.com',ownerMemberId:null,detailServer:'',ajaxPro:false};this.cache={already:false,data:{},domdl:null};};AE.run.DSR.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config,cache=this.cache;if(config.targetBox&&config.ownerMemberId){YUD.setStyle(config.targetBox,'display','block');cache.domdl=document.createElement('dl');cache.domdl.innerHTML='<dd style="text-align:center;"><img alt="" src="http://login.aliexpress.com/images/xman/loading.gif" /></dd>';cache.domdl.className='dsr-content-m';cache.domdl.setAttribute('id','dsr-content');config.targetBox.appendChild(cache.domdl);var feekbackLink=YUD.getElementsByClassName('feedback-text','div',this.config.targetBox)[0];if(feekbackLink===undefined){YUD.setStyle(this.config.targetBox,'background','none');YUD.setStyle(this.config.targetBox,'padding-bottom','4px');}else{YUD.setStyle(feekbackLink,'background','none');YUD.setStyle(feekbackLink,'padding-bottom','4px');}
YUE.onContentReady('dsr-content',function(){_self.getDSR();});}},getDSR:function(){var _self=this,config=this.config,cache=this.cache;cache.already=true;if(!config.ajaxPro){YAHOO.util.Connect.asyncRequest('GET',config.server+'/cross-domain/feedback/dsr/index.html?ownerAdminSeq='+config.ownerMemberId,{cache:false,timeout:5000,success:function(data){try{cache.data=YAHOO.lang.JSON?YAHOO.lang.JSON.parse(data.responseText):{};}catch(ex){cache.data={};}
cache.domdl.innerHTML=_self.createHTML(cache.data,config.detailServer);},failure:function(){cache.domdl.innerHTML=_self.createHTML(cache.data,config.detailServer);}});}else{if(!window.dsrAjaxServiceData){var ap=new AE.run.ajaxProxy();ap.asyncRequest('GET',config.server+'/display/evaluationDsrAjaxService.htm?ownerAdminSeq='+config.ownerMemberId+'&t='+Math.random(),{cache:false,timeout:5000,success:function(data){try{cache.data=YAHOO.lang.JSON?YAHOO.lang.JSON.parse(data.responseText):{};window.dsrAjaxServiceData=cache.data;}catch(ex){cache.data={};window.dsrAjaxServiceData=cache.data;}
cache.domdl.innerHTML=_self.createHTML(cache.data,config.detailServer);},failure:function(){cache.domdl.innerHTML=_self.createHTML(cache.data,config.detailServer);}},'',{proxy:config.server+'/ajax_proxy.html?iframe_delete=true',domain:'aliexpress.com'});}else{try{cache.data=window.dsrAjaxServiceData;}catch(ex){cache.data=window.dsrAjaxServiceData;}
cache.domdl.innerHTML=_self.createHTML(cache.data,config.detailServer);}}},createHTML:function(dsrobj,url){var ohtml;function isEmptyObject(obj){for(var name in obj){return false;}
return true;}
if(isEmptyObject(dsrobj)){ohtml='<dd class="no-dsr-text">Detailed Seller Ratings information is unavailable when there\'re less than 10 ratings.</dd>';}else{ohtml='<dt>Detailed seller ratings <span>(out of 5)</span></dt>'+'<dd><ul class="dsr-list">';for(var item in dsrobj){var title='';var hoverText='';var scoreClassName='';var dsrCompareText='';switch(item){case'desc':title='Item as Described:';break;case'seller':title='Communication:';break;case'shipping':title='Shipping Speed:';break;default:break;}
if(typeof dsrobj[item].ratings!==undefined&&typeof dsrobj[item].percent!==undefined){if(dsrobj[item].percent>0){hoverText=dsrobj[item].score+' out of 5 ('+dsrobj[item].ratings+' ratings), '+dsrobj[item].percent+'% higher than other sellers';scoreClassName='dsr-score-above';dsrCompareText='Above Average';}else if(dsrobj[item].percent<0){hoverText=dsrobj[item].score+' out of 5 ('+dsrobj[item].ratings+' ratings), '+Math.abs(dsrobj[item].percent).toFixed(2)+'% lower than other sellers';scoreClassName='dsr-score-below';dsrCompareText='Below Average';}else{hoverText=dsrobj[item].score+' out of 5 ('+dsrobj[item].ratings+' ratings), equal to other sellers';scoreClassName='dsr-score-average';dsrCompareText='Average';}}
if(hoverText!==''){hoverText='title="'+hoverText+'"';}
var listHTML='';if(dsrobj[item].score&&dsrobj[item].score!==''){listHTML+='<li '+hoverText+' class="'+scoreClassName+'"><div class="dsr-title">'+title+'</div><div class="dsr-score-m">'+dsrobj[item].score+'</div>';var score=dsrobj[item].score<5?dsrobj[item].score:5;if(typeof url=='string'&&url!==''){listHTML+='<a href="'+url+'" class="dsr-compare" target = "_blank" >'+dsrCompareText+'</a>';}else{listHTML+='';}
listHTML+='</li>';}
ohtml+=listHTML;}
ohtml+='</ul></dd>';}
return ohtml;}};;

(function(){function ctor(){var _self=this,cfg={updateVersion:'1.0.0.1',pluginDownloadUrl:'http://download.wangwang.1688.com/aliim/AliIM6_ATM/bin/TMnpSetup.exe',clientDownloadUrl:'http://trademanager.alibaba.com/'},pluginMime=navigator.mimeTypes["application/atm-plugin"],isIE=function(){return navigator.appName=="Microsoft Internet Explorer";},isFirefox=function(ver){var _match=navigator.userAgent.match(/Firefox\/(\d*)\..*/i);if(_match){_self.firefoxVer=parseFloat(_match[1]);}else{_self.firefoxVer="";}
return!!_match&&parseFloat(_match[1])>=(ver||1.5);},isMac=function(){return(navigator.platform.indexOf("Mac")>-1);},isChrome=function(){return(window.navigator.userAgent.indexOf("Chrome")!==-1);},isOpera=function(){return(window.navigator.userAgent.indexOf("opera")!==-1);},isSafari=function(){return(navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<1);},getAtm=function(){if(arguments.callee.counter==1){return;}
if(isMac()){var mimetype=navigator.mimeTypes["application/ww-plugin"];if(mimetype){var plugin=document.createElement("embed");plugin.setAttribute('type','application/ww-plugin');plugin.style.visibility="hidden";plugin.style.width=0;plugin.style.height=0;document.body.appendChild(plugin);_self.atm=plugin;if(plugin.isMacWWInstalled()){_self.atmClientFlag=3;}
plugin.parentNode.removeChild(plugin);}}else{if(isIE()){try{_self.atm=new ActiveXObject("aliimx.atmx");_self.atm.GetWangWangVersion();_self.atmClientFlag=1;}catch(e){try{_self.atm=new ActiveXObject("TradeManagerSetup.Install.1");_self.atmClientFlag=0;}catch(ex){}}}else if(isFirefox()||isChrome()){if(document.getElementById("chk_atm")==null){var dDiv=document.createElement('DIV');dDiv.style.height='1px';dDiv.style.width='1px';dDiv.style.overflow='hidden';dDiv.innerHTML="<embed id=\"chk_atm\" name=\"chk_atm\" type=\"application/atm-plugin\" width=1 height=1 hidden=\"true\" >";document.body.appendChild(dDiv);_self.atm=document.getElementById("chk_atm");if(!_self.isNeedUpdatePlugin()){try{if(_self.atm.isInstalled(2)==1){_self.atmClientFlag=2;}}catch(e){}}}}}
arguments.callee.counter=1;},buildQuery=function(query){if(query!==undefined&&query!==''){if(query.substring(0,1)!='&'){return'&'+query;}
return query;}
return'';};this.atm=null;this.atmClientFlag=-1;this.firstClick=true;if(isMac()){this.isBrowserSupport=isFirefox()||isChrome()||isOpera()||isSafari();}else{this.isBrowserSupport=isIE()||isFirefox()||isChrome();}
this.isPluginReady=function(){if(isMac()){return true;}
if(isFirefox()||isChrome()){return(!!pluginMime&&!!pluginMime.enabledPlugin);}
return true;};this.isNeedUpdatePlugin=function(){if(isFirefox()){try{return this.isPluginReady()&&(parseInt(pluginMime.enabledPlugin.version.replace(/\./g,''),10)<parseInt(cfg.updateVersion.replace(/\./g,''),10));}catch(e){return false;}}else if(isChrome()){try{return this.atm&&(parseInt(this.atm.NPWWVersion().replace(/\./g,''),10)<parseInt(cfg.updateVersion.replace(/\./g,''),10));}catch(e){return false;}}};this.isClientReady=function(){if(this.isPluginReady()){getAtm();return this.atmClientFlag!=-1;}
return false;};this.isReady=function(){var CALLEE=arguments.callee;if(CALLEE.isPass===undefined){CALLEE.isPass=this.isBrowserSupport&&this.isClientReady();}
return CALLEE.isPass;};this.getClientFlag=function(){if(this.isClientReady()){return this.atmClientFlag;}
return-1;};this.downloadClient=function(cancelAction){if(confirm('you must first install TradeManager.\nClick the Confirm button to download it.')){window.open(cfg.clientDownloadUrl);}else if(typeof cancelAction=='function'){cancelAction.call(this);}};this._installPlugin=function(){if(isFirefox()){if(isMac()&&window.InstallTrigger){InstallTrigger.install({'Alibaba TradeManager plug-in':{URL:cfg.pluginDownloadUrl,toString:function(){return cfg.pluginDownloadUrl;}}});}else{window.open(cfg.pluginDownloadUrl);}}else if(isChrome()){window.open(cfg.pluginDownloadUrl);}};this.installPlugin=function(cancelAction){if(this.firstClick&&(isFirefox()||isChrome())&&confirm('You need the TradeManager plug-in.\nClick the Confirm button to install it.')){this._installPlugin();}else if(typeof cancelAction=='function'){cancelAction.call(this);}
this.firstClick=false;};this.updatePlugin=function(cancelAction){if((isFirefox()||isChrome())&&confirm('You need update the TradeManager plug-in.\nClick the Confirm button to update it.')){this._installPlugin();}else if(typeof cancelAction=='function'){cancelAction.call(this);}};this.execCommand=function(cmd){if(!this.isReady()){return false;}
switch(this.atmClientFlag){case 0:window.location=cmd;break;case 1:this.atm.ExecCmd(cmd);break;case 2:this.atm.SendCommand(cmd,2);break;case 3:window.location=cmd;break;}};this.sendClientMsg=function(fromSite,fromUid,toSite,toUid,imstatus,extraQuery){if(!this.isReady()){return false;}
if(fromSite===''){fromSite=toSite;}
switch(this.atmClientFlag){case 0:this.execCommand('TradeManager:SendIM_Encrypted?'+toUid);break;case 1:if(imstatus==4){this.execCommand('aliim:smssendmsg?uid='+fromSite+fromUid+'&touid='+toUid+'&suid='
+fromUid+'&encrypt=true');}else{this.execCommand('aliim:sendmsg?uid='+fromSite+fromUid+'&touid='+toUid+'&siteid='
+toSite+'&status='+imstatus+buildQuery(extraQuery));}
break;case 2:this.execCommand('aliim:sendmsg?uid='+fromSite+fromUid+'&touid='+toUid+'&siteid='
+toSite+'&status='+imstatus+buildQuery(extraQuery));break;case 3:this.execCommand('aliim:sendmsg?uid='+fromSite+fromUid+'&touid='+encodeURIComponent(toUid)
+'&siteid='+toSite+'&status='+imstatus+buildQuery(extraQuery));}};this.addContact=function(fromSite,fromUid,toSite,toUid,query){if(!this.isReady()){return false;}
if(this.atmClientFlag===0){this.execCommand('Trademanager:AddContact?uid='+toUid+'&checkcrm=true');setTimeout(function(){window.close();},"500");}else if(this.atmClientFlag==1||this.atmClientFlag==2||this.atmClientFlag==3){this.execCommand('aliim:addcontact?uid='+fromSite+fromUid+'&touid='+toSite+toUid
+buildQuery(query));setTimeout(function(){window.close();},"500");}};this.startATM=function(siteid,uid,query){if(!this.isReady()){return false;}
if(this.atmClientFlag===0){this.execCommand('TradeManager:');}else if(this.atmClientFlag==1||this.atmClientFlag==2){this.execCommand('aliim:login?uid='+uid+'&autologin=0&weblogin=1'+buildQuery(query));}};}
window.ATMAPI=new ctor();window.checkInstallEnaliint=function(){return ATMAPI.getClientFlag();};window.sendClientMsg=function(){return ATMAPI.sendClientMsg.apply(ATMAPI,arguments);};window.addContact=function(){return ATMAPI.addContact.apply(ATMAPI,arguments);};window.startWW=function(){return ATMAPI.startWW.apply(ATMAPI,arguments);};window.checkIE=function(){return navigator.appName=="Microsoft Internet Explorer";};window.checkIEorFirefox=function(){return ATMAPI.isBrowserSupport;};window.checkFirefoxIsBigThan15=function(){var _match=navigator.userAgent.match(/Firefox\/(\d*)\..*/i);return _match&&parseFloat(_match[1])>=1.5;};}());;
;(function(){function ScriptLoader(){var _self=this;var requestQuee=[];var defConfig={onSuccess:function(){},isLoadImmediately:false,isParallelLoad:false};var config={};var loadedCounter=0,requestCounter=0;var canRunSuccessFun=false;_self.init=function(oConfig){config=YL.merge(defConfig,oConfig||{});};_self.pushRequest=function(sRequestUrl){requestQuee.push(sRequestUrl);++requestCounter;if(config.isLoadImmediately){if(config.isParallelLoad){parallelLoad();}else{serialLoad();}}};_self.load=function(onSuccessFun){if(onSuccessFun){config.onSuccess=onSuccessFun;}
canRunSuccessFun=true;if(config.isParallelLoad){parallelLoad();}else{serialLoad();}};var serialLoad=function(){if(requestQuee.length>0){var sUrl=requestQuee[0];requestQuee=requestQuee.slice(1);YAHOO.util.Get.script(sUrl,{onSuccess:loadSuccess});}};var parallelLoad=function(){while(requestQuee.length){YAHOO.util.Get.script(requestQuee[0],{onSuccess:loadSuccess});requestQuee=requestQuee.slice(1);}};var loadSuccess=function(){++loadedCounter;if(loadedCounter>=requestCounter&&canRunSuccessFun){config.onSuccess();}else if(loadedCounter<requestCounter&&!config.isParallelLoad){serialLoad();}else{return;}};}
AE.namespace('widget').scriptLoader=ScriptLoader;}());;

var online=[];AE.define("alitalk",function(){var config={origin:'',toMemberType:'seller',onlineClassName:'atm16',onlineInnerHtml:'Chat now!',onlineTitle:'Chat with me now',offlineClassName:'atm16grey',offlineInnerHtml:'Offline',offlineTitle:'Leave me a message',isReplaceInnerHTML:true,alitalkTextareaId:'',alitalkIdPre:'',alitalkClass:'',alitalkIdAttribute:'',getAlitalkId:function(){return false;},initATMIcon:function(){return false;}};var alitalkIdMap=[];var isClientInstalled=ATMAPI.getClientFlag();var dmtrackingUrl='https://dmtracking2.alibaba.com/feedbackfromalitalk.html';var webAtmUrl='http://webatm.alibaba.com/start_web_atm.htm';var feedBackMsgUrl='http://message.aliexpress.com/message/new.htm';var referUrl=document.URL.replace(/&/ig,"$");var onlineStatusUrl='http://atmamos.im.alisoft.com/muliuserstatusx.atc?beginnum={#beginnum#};{#alitalkIdMap#}';var onlineStatusUrlSSL='https://amos.im.alisoft.com/muliuserstatus.aw?beginnum={#beginnum#}&site=enaliint&uids={#alitalkIdMap#}';var alitalksPerRequestNum=20;function getAlitalkId(){if(config.alitalkTextareaId){try{alitalkIdMap=get(config.alitalkTextareaId).value.split(';');}catch(e){}}else if(config.alitalkClass&&config.alitalkIdAttribute){var tempEl=YUD.getElementsByClassName(config.alitalkClass);if(tempEl.length>0){for(var i=0;i<tempEl.length;i++){alitalkIdMap[i]=tempEl[i].getAttribute(config.alitalkIdAttribute);}}}else if(config.getAlitalkId()){alitalkIdMap=config.getAlitalkId();}}
function run(){getAlitalkId();if(!alitalkIdMap[0]){return;}
var alitalkLoader=new AE.widget.scriptLoader();var alitalksLoadLoop=Math.round(alitalkIdMap.length/alitalksPerRequestNum+0.5);var statusUrl;if(config.origin=='aliexpress_order'){statusUrl=onlineStatusUrlSSL;}else{statusUrl=onlineStatusUrl;}
for(var i=0;i<alitalksLoadLoop;i++){var beginNum=alitalksPerRequestNum*i;var alitalksPostBody=alitalkIdMap.slice(beginNum,beginNum+alitalksPerRequestNum).join(";");alitalkLoader.pushRequest(statusUrl.replace('{#beginnum#}',beginNum).replace('{#alitalkIdMap#}',alitalksPostBody));}
alitalkLoader.load(initATMIcon);}
function initATMIcon(){if(config.alitalkTextareaId&&config.alitalkIdPre){for(var i=0;i<online.length;i++){var elNum=i+1;var atmEl=get(config.alitalkIdPre+elNum);if(atmEl){if(online[i]==1){atmEl.className=config.onlineClassName;if(config.isReplaceInnerHTML){atmEl.innerHTML=config.onlineInnerHtml;}
atmEl.title=config.onlineTitle;}else{atmEl.className=config.offlineClassName;if(config.isReplaceInnerHTML){atmEl.innerHTML=config.offlineInnerHtml;}
atmEl.title=config.offlineTitle;}
atmEl.setAttribute('online',online[i]);YUE.on(atmEl,'click',function(){bindEventATMIcon(this);});}}}else if(config.alitalkClass){var atmEl=YUD.getElementsByClassName(config.alitalkClass);for(var i=0;i<online.length;i++){if(online[i]==1){atmEl[i].className=config.onlineClassName;if(config.isReplaceInnerHTML&&checkIconInnerHTML(atmEl[i])){atmEl[i].innerHTML=config.onlineInnerHtml;}
atmEl[i].title=config.onlineTitle;}else{atmEl[i].className=config.offlineClassName;if(config.isReplaceInnerHTML&&checkIconInnerHTML(atmEl[i])){atmEl[i].innerHTML=config.offlineInnerHtml;}
atmEl[i].title=config.offlineTitle;}
atmEl[i].setAttribute('online',online[i]);}
YUE.on(atmEl,'click',function(){bindEventATMIcon(this);});}else if(config.initATMIcon()){config.initATMIcon();}}
function checkIconInnerHTML(obj){if(obj.innerHTML==''||obj.innerHTML==config.onlineInnerHtml||obj.innerHTML==config.offlineInnerHtml){return true;}}
function bindEventATMIcon(el){var onLine=el.getAttribute('online');var memberId=el.getAttribute('memberid');var from=el.getAttribute('from');var id1=el.getAttribute('id1')||0;var id2=el.getAttribute('id2')||0;var origin=config.origin;var toMemberType=config.toMemberType;var timestamp=new Date();window.setTimeout(function(){new Image().src=dmtrackingUrl+'?type=client&STEP=CLICK&from='+from+'&id='+id1+"&refer="+referUrl+"&time="+timestamp.getTime();},10);if(isClientInstalled!=-1){var params='';if(from==11){params+="&ptype=e&gid="+id1+"&id="+memberId;}
if(navigator.platform.indexOf("Mac")===-1){params+='&url2='+dmtrackingUrl+'?from='+from+"#id="+id1+"#refer="+referUrl+"#time="+timestamp.getTime();}
sendClientMsg(memberId,params);}else{if(onLine==1){openWebAtm(from,memberId,id1,origin);}else{openFeedBackMsg(from,toMemberType,id1,id2);}}}
function openWebAtm(from,memberId,productId,origin){var webAtmParams='?enemberId='+encodeURIComponent(memberId)+'&pid='+productId+'&from='+from+'&origin='+origin+'&refer='+referUrl;var win=window.open(webAtmUrl+webAtmParams,Math.round(Math.random()*24*100),'width=785,height=600,location=no,toolbar=no,status=no,resizable=yes,scrollbars=no');win.focus();}
function openFeedBackMsg(from,toMemberType,id1,id2){var feedBackMsgParams='';from=parseInt(from,0);switch(from){case 11:feedBackMsgParams='?productId='+id1+'&messageType=product&memberType='+toMemberType+'&refer='+referUrl;break;case 12:feedBackMsgParams='?memberSeq='+id1+'&messageType=member&memberType='+toMemberType+'&refer='+referUrl;break;case 13:feedBackMsgParams='?memberSeq='+id1+'&storeId='+id2+'&messageType=store&memberType='+toMemberType+'&refer='+referUrl;break;default:feedBackMsgParams='error404.html';}
var targetUrl=feedBackMsgParams=='error404.html'?feedBackMsgParams:feedBackMsgUrl+feedBackMsgParams;var win=window.open(targetUrl,'feedBack');win.focus();}
function sendClientMsg(memberId,params){ATMAPI.sendClientMsg('','','enaliint',memberId,1,'&encrypt=1'+params);}
return{init:function(customConfig){config=YL.merge(config,customConfig||{});run();},bindEventATMIcon:function(el){bindEventATMIcon(el);}};});;

var Cookies={set:function(name,value){var argv=arguments;var argc=arguments.length;var expires=(argc>2)?argv[2]:null;var domain=(argc>3)?argv[3]:null;var path=(argc>4)?argv[4]:'/';var secure=(argc>5)?argv[5]:false;document.cookie=name+"="+escape(value)+
((expires==null)?"":("; expires="+expires.toGMTString()))+
((path==null)?"":("; path="+path))+
((domain==null)?"":("; domain="+domain))+
((secure==true)?"; secure":"");},get:function(name){var arg=name+"=";var alen=arg.length;var clen=document.cookie.length;var i=0;var j=0;while(i<clen){j=i+alen;if(document.cookie.substring(i,j)==arg)
return this.__get(j);i=document.cookie.indexOf(" ",i)+1;if(i==0)
break;}
return null;},__get:function(offset){var endstr=document.cookie.indexOf(";",offset);if(endstr==-1){endstr=document.cookie.length;}
return unescape(document.cookie.substring(offset,endstr));},clear:function(name){var argv=arguments;var argc=arguments.length;var domain=(argc>1)?argv[1]:null;var path=(argc>2)?argv[2]:'/';var secure=(argc>3)?argv[3]:false;if(this.get(name)){document.cookie=name+"="+
((path)?"; path="+path:"")+
((domain)?"; domain="+domain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";}},cookieCache:{},getCookieTable:function(name,domain){var table=Cookies.cookieCache[name];if(null==table||table.changed){table=new CookieTable(name);var str=Cookies.get(name);if(null!=str&&str!=""){table.parseFromString(str);}
if(domain){table.domain=domain;}
Cookies.cookieCache[name]=table;}
return table;}};var noExpires=new Date();noExpires.setTime(noExpires.getTime()+60*60*1000*24*60);var SEP_GROUP="\n\n";var SEP_GROUP_NAME="^\n";var SEP_GROUP_ITEM="$\n";var SEP_ATTR="\t";var NO_SET_STR="NOSET";function isArray(object){return object!=null&&typeof object=="object"&&'join'in object;}
function CookieTable(name,arrOrString,expires,domain,path,secure){this.expires=expires?expires:noExpires;this.domain=domain?domain:null;this.path=path?path:'/';this.secure=secure?secure:false;this.name=name?name:null;this.groups=arrOrString&&isArray(arrOrString)?arrOrString:[];this.__tree={};this.changed=false;this.buildString=function(arr){if(null!=arr&&arr.length>0){return arr.join(SEP_GROUP);}
return null;}
this.parseFromString=function(str){if(null==str||""==str)return this;var arr=str.split(SEP_GROUP);this.removeAll();for(var i=0;i<arr.length;i++){if(null!=arr[i]&&""!=arr[i]){var group=new CookieGroup();group.parseFromString(arr[i]);this.add(group);}}
return this;}
this.toString=function(){return this.buildString(this.groups);}
this.size=function(){return this.groups.length;}
this.arrange=function(){var arr=[],obj={};for(var i=0;i<this.size();i++){if(null!=this.groups[i]){arr[arr.length]=this.groups[i];obj[this.groups[i].name]=this.groups[i];}}
this.removeAll();this.groups=arr;this.__tree=obj;}
this.__clearTree=function(){this.__tree={};}
this.__addToTree=function(obj){if(null!=obj){this.__tree[obj.name]=obj;}}
this.__removeFromTree=function(obj){if(null!=obj){delete this.__tree[obj.name];}}
this.removeAll=function(){this.groups=[];this.__clearTree();}
this.get=function(name){if(this.__tree[name]){return this.__tree[name];}
return null;}
this.add=function(obj){if(null==obj)return;for(var i=0;i<this.size();i++){if(obj.name.toLowerCase()==this.groups[i].name.toLowerCase()){this.remove(obj.name);}}
obj.parent=this;this.groups[this.size()]=obj;this.__addToTree(obj);return this;}
this.remove=function(str){if(null==str||""==str)return;for(var i=0;i<this.size();i++){if(str.toLowerCase()==this.groups[i].name.toLowerCase()){this.__removeFromTree(this.groups[i]);this.groups[i]=null;}}
this.arrange();return this;}
this.save=function(){this.changed=true;Cookies.set(this.name,this.toString(),this.expires,this.domain,this.path,this.secure);}
this.clear=function(){Cookies.clear(this.name);}
if(this.name!=null&&typeof(arrOrString)=="string"){this.parseFromString(arrOrString);}else if(this.name!=null&&isArray(arrOrString)){for(var i=0;i<this.size();i++){if(null!=this.groups[i]){this.__addToTree(this.groups[i]);this.groups[i].parent=this;}}}}
function CookieGroup(name,arrOrString){this.name=name?name:null;this.items=arrOrString&&isArray(arrOrString)?arrOrString:[];this.__tree={};this.max=20;this.parent=null;this.buildString=function(arr){var str=this.name?this.name:NO_SET_STR;if(null!=arr&&arr.length>0){return str+SEP_GROUP_NAME+arr.join(SEP_GROUP_ITEM);}
return str;}
this.parseFromString=function(str){if(null==str||""==str)return this;var name_end=str.indexOf(SEP_GROUP_NAME);if(name_end>-1){this.name=str.substring(0,name_end);var itemsStr=str.substring(name_end+SEP_GROUP_NAME.length);if(null!=itemsStr&&itemsStr!=""){this.removeAll();var arr=itemsStr.split(SEP_GROUP_ITEM);for(var i=0;i<arr.length;i++){if(null!=arr[i]&&""!=arr[i]){var item=new CookieItem();item.parseFromString(arr[i]);this.add(item);}}}}else{this.name=str;}
return this;}
this.toString=function(){return this.buildString(this.items);}
this.getReverse=function(){var arr=[];if(this.size()>0){return this.items.slice(0,this.items.length).reverse();}
return arr;}
this.setMax=function(max){this.max=max;this.arrange();}
this.size=function(){return this.items.length;}
this.arrange=function(){var arr=[],obj={};for(var i=0;i<this.size();i++){if(null!=this.items[i]){arr[arr.length]=this.items[i];}}
if(arr.length>this.max){arr=arr.slice(arr.length-this.max,arr.length);}
for(var i=0;i<arr.length;i++){obj[arr.key]=arr[i];}
this.removeAll();this.items=arr;this.__tree=obj;}
this.__clearTree=function(){this.__tree={};}
this.__addToTree=function(obj){if(null!=obj){this.__tree[obj.key]=obj;}}
this.__removeFromTree=function(obj){if(null!=obj){delete this.__tree[obj.key];}}
this.removeAll=function(){this.items=[];this.__clearTree();}
this.get=function(key){if(this.__tree[key]){return this.__tree[key];}
return null;}
this.add=function(obj){if(null==obj)return;for(var i=0;i<this.size();i++){if(obj.key.toLowerCase()==this.items[i].key.toLowerCase()){this.remove(obj.key);}}
obj.parent=this;this.items[this.size()]=obj;this.__addToTree(obj);return this;}
this.remove=function(str){if(null==str||""==str)return;for(var i=0;i<this.size();i++){if(str.toLowerCase()==this.items[i].key.toLowerCase()){this.__removeFromTree(this.items[i]);this.items[i]=null;}}
this.arrange();return this;}
this.save=function(){if(null!=this.parent){this.arrange();this.parent.save();}}
if(this.name!=null&&typeof(arrOrString)=="string"){this.parseFromString(this.name+SEP_GROUP_NAME+arrOrString);}else if(this.name!=null&&isArray(arrOrString)){for(var i=0;i<this.size();i++){if(null!=this.items[i]){this.__addToTree(this.items[i]);this.items[i].parent=this;}}}}
function CookieItem(key,arrOrString){this.key=key?key:null;this.attributes=arrOrString&&isArray(arrOrString)?arrOrString:[];this.max=20;this.parent=null;this.buildString=function(arr){var str=this.key?this.key:NO_SET_STR;if(null!=arr&&arr.length>0){return str+SEP_ATTR+arr.join(SEP_ATTR);}
return str;}
this.parseFromString=function(str){if(null==str||""==str)return this;var arr=str.split(SEP_ATTR);if(arr.length>0){this.key=arr[0];this.attributes=arr.slice(1,arr.length);}
return this;}
this.setMax=function(max){this.max=max;this.arrange();}
this.size=function(){return this.attributes.length;}
this.toString=function(){return this.buildString(this.attributes);}
this.getReverse=function(){var arr=[];if(this.size()>0){return this.attributes.slice(0,this.attributes.length).reverse();}
return arr;}
this.reverseString=function(){return this.buildString(this.getReverse());}
this.arrange=function(){var arr=[];for(var i=0;i<this.size();i++){if(null!=this.attributes[i]){arr[arr.length]=this.attributes[i];}}
if(arr.length>this.max){this.attributes=arr.slice(arr.length-this.max,arr.length);}else{this.attributes=arr;}}
this.removeAll=function(){this.attributes=[];}
this.get=function(index){return index<this.size()?this.attributes[index]:null;}
this.add=function(str){if(null==str||""==str)return;this.remove(str);this.attributes[this.size()]=str;this.arrange();return this;}
this.remove=function(str){if(null==str||""==str)return;for(var i=0;i<this.size();i++){if(str.toLowerCase()==this.attributes[i].toLowerCase()){this.attributes[i]=null;}}
this.arrange();return this;}
this.contains=function(str){for(var i=0;i<this.size();i++){if(str.toLowerCase()==this.attributes[i].toLowerCase()){return true;}}}
this.save=function(){if(null!=this.parent){this.arrange();this.parent.save();}}
if(this.key!=null&&typeof(arrOrString)=="string"){this.parseFromString(this.key+SEP_ATTR+arrOrString);}}
var TOP_DOMAIN="aliexpress.com";var HISTORY_COOKIE_NAME="aep_history";var GROUP_KEYWORDS="keywords";var GROUP_PRODUCT="product";var GROUP_SELLOFFER="selloffer";var GROUP_BUYOFFER="buyoffer";var GROUP_COMPANY="company";var GROUP_CATEGORY="category";var GROUP_PRODUCT_SELLOFFER=GROUP_PRODUCT+"_"+GROUP_SELLOFFER;var MAX_KEYWORDS=8;var MAX_PRODUCT=8;var MAX_SELLOFFER=8;var MAX_BUYOFFER=6;var MAX_COMPANY=4;var MAX_CATEGORY=6;var MAX_PRODUCT_SELLOFFER=8;function getHistoryCookieTable(){return Cookies.getCookieTable(HISTORY_COOKIE_NAME,TOP_DOMAIN);}
function getHistoryCookieGroup(groupName){var table=getHistoryCookieTable();var group=table.get(groupName);if(null==group){group=new CookieGroup(groupName);table.add(group);group.parent=table;}
return group;}
function addOrUpdateHistoryCookieItem(groupName,itemKey,value,max){if((typeof value!='string'||value=='')&&!(value instanceof Array)){return;}
var group=getHistoryCookieGroup(groupName);var item=group.get(itemKey);var changed=false;if(isArray(value)){item=new CookieItem(itemKey,value);changed=true;}
else{item=(null==item)?new CookieItem(itemKey):item;item.add(value);changed=true;}
group.add(item);if(groupName==GROUP_KEYWORDS){item.setMax(max);}
else{group.setMax(max);}
if(changed){group.save();}}
function logKeywordsHistory(value){addOrUpdateHistoryCookieItem(GROUP_KEYWORDS,GROUP_KEYWORDS,value,MAX_KEYWORDS);}
function logProductHistory(itemKey,value){addOrUpdateHistoryCookieItem(GROUP_PRODUCT_SELLOFFER,itemKey,value,MAX_PRODUCT_SELLOFFER);}
function logSellOfferHistory(itemKey,value){addOrUpdateHistoryCookieItem(GROUP_PRODUCT_SELLOFFER,itemKey,value,MAX_PRODUCT_SELLOFFER);}
function logCompanyHistory(itemKey,value){addOrUpdateHistoryCookieItem(GROUP_COMPANY,itemKey,value,MAX_COMPANY);}
function logBuyOfferHistory(itemKey,value){addOrUpdateHistoryCookieItem(GROUP_BUYOFFER,itemKey,value,MAX_BUYOFFER);}
function logCategoryHistory(itemKey,value){addOrUpdateHistoryCookieItem(GROUP_CATEGORY,itemKey,value,MAX_CATEGORY);}
AE.namespace('AE.app');if(!AE.app.proHistory){AE.app.proHistory=function(){this.config={target:get('historyOuterBox'),isDetail:false,probox:'product_selloffer_hispanel',imgServer:'http://i02.i.aliimg.com',cookieName:'aep_history',cookieGroupName:GROUP_PRODUCT_SELLOFFER,maxNUM:MAX_PRODUCT}
this.cache={productItem:''}};AE.app.proHistory.prototype={init:function(customConfig){var config=YL.merge(this.config,customConfig||{});var _self=this;_self.config=config;if(_self.config.target){_self.loadHistoryBox();_self.cloneAllHistoryFloatDiv(_self.config.maxNUM);}},loadHistoryBox:function(){var _config=this.config;if(_config.target){var divstr='<div class="hd"><h3>Recently Viewed Items</h3></div><div class="bd historyBox"><div class="historylog"><div id="PSHistoryBox"><ul id="product_selloffer_hispanel" class="productimage">';for(var i=0;i<_config.maxNUM;i++){var str='<li id="product_selloffer_li_'+i+'"><div onmouseover="onPSHistoryItemsMouseOver('+i+');"><a onclick="dmtrack.clickstat(\'http://tracelog.www.alibaba.com/null.gif\',{tracelog:\'Recently_Viewed_Items\'});" id="product_selloffer_link_a_'+i+'" href="javascript:void(0);"><img width="65" border="0" id="product_selloffer_img_'+i+'" /></a></div><span id="mask_div_'+i+'"><img src="http://img.alibaba.com/images/eng/navigation/others/catch.gif" alt="img_adorn" /></span></li>';divstr+=str;}
divstr+='</ul><div id="floatdiv_model" class="history_box" style="display:none;"><div class="fdiv_right"><img src="http://img.alibaba.com/images/eng/wholesale/icon/list-quickview-dart.gif"  alt="img_history_arrow" /></div><div class="info"><div class="cor-bg01"><div><h2><a onclick="dmtrack.clickstat(\'http://tracelog.www.alibaba.com/null.gif\',{tracelog:\'Recently_Viewed_Items\'});" href="javascript:void(0);" class="fdiv_title fdiv_href" target="_blank"></a></h2></div><div class="productPic"><a onclick="dmtrack.clickstat(\'http://tracelog.www.alibaba.com/null.gif\',{tracelog:\'Recently_Viewed_Items\'});" href="javascript:void(0);" class="fdiv_href" target="_blank"><img class="fdiv_image" border="0" /></a></div></div></div></div><form id="historyContactForm" method="post" action="http://us.my.alibaba.com/mcweb/contact.htm?action=mcweb:contact_action"  target="_blank" style="display:none;">$!{intlCsrfToken.HiddenField}</form><div style="clear:both;"></div></div></div></div>'
_config.target.innerHTML=divstr;}},cloneAllHistoryFloatDiv:function(num){var dFloatDiv_Box=YUD.getElementsByClassName("historyBox",'*')[0];for(var i=0;i<num;i++){var dTarget=get("product_selloffer_link_a_"+i);var dFloat_Model=get("floatdiv_model");var dNew_FloatDiv=dFloat_Model.cloneNode(true);dNew_FloatDiv.setAttribute("id","history_floatdiv_"+i);dFloatDiv_Box.appendChild(dNew_FloatDiv);var oshow=new AE.widget.overShow();oShow_config={targetId:dTarget,contentId:dNew_FloatDiv,showDelayTime:500,hiddenDelayTime:100,excursion:[parseInt(YUD.getStyle(dFloat_Model,"width"))-90,-10],needMask:true}
oshow.init(oShow_config);}},fixOld:function(){var str=YAHOO.util.Cookie.get(this.config.cookieName);if(/\$U/.test(str)&&str.length>0){var productGroup=getHistoryCookieGroup(this.config.cookieGroupName);productGroup.removeAll();productGroup.save();}},addLSHistory:function(proid){if(typeof runParams!=='undefined'){var _self=this,_config=this.config,cache=this.cache;var hisProStr=this.getLSHistory();var productItems;if(/productlist/.test(hisProStr)){productItems=YAHOO.lang.JSON.parse(hisProStr);}else{productItems={productlist:[],productoverview:{total_num:0}};}
var productlist=productItems.productlist;var product={id:proid,subject:get('product-name').innerHTML.replace(/\n\t*/g,''),image_url:runParams.imageURL[0].replace('.jpg','.summ.jpg'),detail_url:window.location.href}
var len=productlist.length;productlist.push(product);for(var i=0;i<len;i++){if(proid==productlist[i].id){productlist.splice(i,1);break;}}
if(productlist.length>_config.maxNUM){productlist.splice(0,1);}
productItems.productlist=productlist;cache.productItem=productlist;productItems.productoverview.total_num=productlist.length;hisProStr=YAHOO.lang.JSON.stringify(productItems);window.localStorage.hisProStr=hisProStr;}},getLSHistory:function(){var str=window.localStorage.hisProStr||[];return str;},addCookieHistory:function(itemId){var ostr=this.getCookieHistory(),nstr,arr,_config=this.config;if(ostr!=''&&ostr!=null){arr=ostr.split(',');var len=arr.length;arr.push(itemId);for(var i=0;i<len;i++){if(itemId==arr[i]){arr.splice(i,1);break;}}
if(arr.length>_config.maxNUM){arr.splice(0,1);}}else{arr=[];arr.push(itemId);}
addOrUpdateHistoryCookieItem(_config.cookieGroupName,_config.cookieGroupName,arr,_config.maxNUM)},getCookieHistory:function(){var _config=this.config;var group=getHistoryCookieGroup(_config.cookieGroupName);var item=group.get(_config.cookieGroupName);var arr=item!=null?item.attributes:[];var str=arr.toString();return str;},correctDate:function(productItem){var cookiestr=this.getCookieHistory(),_config=this.config;var cookiearr=cookiestr.split(',');var newItem=[];var plen=productItem.length;for(var i=0;i<cookiearr.length;i++){for(var j=0;j<productItem.length;j++){if(cookiearr[i]==productItem[j].id){newItem[i]=productItem[j];}};if(typeof newItem[i]=='undefined'){cookiearr.splice(i,1)
i--;}}
var group=getHistoryCookieGroup(_config.cookieGroupName);var item=group.get(_config.cookieGroupName);item=new CookieItem(_config.cookieGroupName,cookiearr);group.save();return newItem;},addHistory:function(proid){this.fixOld();if(window.localStorage){this.addLSHistory(proid);this.addCookieHistory(proid);}else{this.addCookieHistory(proid);}},getHistory:function(){this.fixOld();var _self=this,_config=this.config,cache=this.cache;if(window.localStorage){var hisProStr=this.getLSHistory();if(hisProStr!=''){cache.productItem=YAHOO.lang.JSON.parse(hisProStr).productlist;_self.fillData(cache.productItem);}}else{var cookiestr=this.getCookieHistory();var url='http://hotproducts.aliexpress.com/wsproduct-openapi-server.html?ak=1234567890&pid='+cookiestr,ajaxProxy=new AE.run.ajaxProxy(),callback={success:function(res){if(/productlist/.test(res.responseText)){cache.productItem=YAHOO.lang.JSON.parse(res.responseText).productlist;cache.productItem=_self.correctDate(cache.productItem);_self.fillData(cache.productItem);}},failure:function(){},timeout:5000};if(cookiestr!=''){ajaxProxy.asyncRequest('GET',url,callback,'',{proxy:'http://hotproducts.aliexpress.com/ajax_proxy.html',domain:'aliexpress.com'});}}},getData:function(){return this.cache.productItem;},fillData:function(productItems){var config=this.config;if(productItems!=''){var productList=productItems,lnum=get('product_selloffer_hispanel').getElementsByTagName('li').length;len=productItems.length;for(var i=0;i<lnum;i++){if(i<len){try{var mImage=productList[len-i-1].image_url;if(!/http\:\/\/.*\.com/.test(mImage)){mImage=config.imgServer+mImage;}
get('product_selloffer_img_'+i).src=mImage;get('product_selloffer_link_a_'+i).href=productList[len-i-1].detail_url;}catch(ex){}}else{get('product_selloffer_li_'+i).style.display='none';}}
get('historyOuterBox').style.display='block';}}};if(typeof head!=='undefined'){head.ready('commons',function(){YUE.onDOMReady(function(){window.proHistory=new AE.app.proHistory();proHistory.init();});});}else{YUE.onDOMReady(function(){window.proHistory=new AE.app.proHistory();proHistory.init();});}};var onPSHistoryItemsMouseOver=function(index){var items=proHistory.getData();var len=items.length;var item=index<len?items[index]:null;if(null!=item){var floatDiv=get("history_floatdiv_"+index);var dTitle=YUD.getElementsByClassName("fdiv_title",'*',floatDiv)[0],dHref=YUD.getElementsByClassName("fdiv_href",'*',floatDiv)[0],dImage=YUD.getElementsByClassName("fdiv_image",'*',floatDiv)[0];dHref.href=items[len-index-1].detail_url;dTitle.innerHTML=items[len-index-1].subject;var mImage=items[len-index-1].image_url.replace('.summ.jpg','.jpg_200x200.jpg');if(!/http\:\/\/.*\.com/.test(mImage)){mImage='http://i02.i.aliimg.com'+mImage;}
dImage.src=mImage;}};var logHistoryById=function(proid){if(proHistory){proHistory.addHistory(proid);}};var initobj=function(){pageLoaded=true;try{if(get("historyOuterBox")){showProductHistory();}}catch(ex){}};var showProductHistory=function(){var historyTriggerId='page',scrollTrigger=new AE.app.scrollTrigger();scrollTrigger.init({distance:400,delay:200});scrollTrigger.run();var tiggle=function(){if(get('PSHistoryBox')){proHistory.getHistory();}}
if(get('sub-wsalert')){historyTriggerId='sub-wsalert';}else if(get('left-banners')){historyTriggerId='left-banners';}else if(get('refine-search')){historyTriggerId='refine-search';}else if(get('refine-category')){historyTriggerId='refine-category';}
scrollTrigger.register(historyTriggerId,tiggle,'historyId',true);};;

AE.namespace('AE.app');if(!AE.app.cateClick){AE.app.cateClick=function(){this.config={firstWrapId:'categories',homeWrapId:'sec-cate-zone',wrapId:'categories-subs',firstParentTag:'LI',secondParentTag:'DT',thirdParentTag:'DD',firstSelect:'DIV',secondSelect:'DL',targetSelect:'A',url:'http://stat.alibaba.com/ae/aliexpress_button_click.html',ae_project_id:'1002',ae_page_type:'search_list',ae_object_type:'5',ae_ismember:'',ae_user_id:''};this.cache={firstwrapBox:get(this.config.firstWrapId),wrapBox:get(this.config.homeWrapId)||get(this.config.wrapId),x:'',y:'',z:''}};AE.app.cateClick.prototype={init:function(customConfig){var _config=this.config=YL.merge(this.config,customConfig||{}),_self=this,_cache=this.cache;if(_config.firstwrapBox===null||_config.wrapBox===null){return;}
YUE.on(_cache.wrapBox,'mousedown',_self.clickDot,_self);YUE.on(_cache.firstwrapBox,'mousedown',_self.clickDot,_self);},clickDot:function(event,_self){var _config=_self.config,_cache=_self.cache;_cache.x='';_cache.y='';_cache.z='';var eventTarget=event.target||event.srcElement;var eventParent=eventTarget.parentNode;if(eventTarget.nodeName==_config.targetSelect){switch(eventParent.nodeName){case _config.firstParentTag:_self.firstLink(eventTarget);break;case _config.secondParentTag:_self.secondLink(eventTarget);break;case _config.thirdParentTag:_self.thirdLink(eventTarget);break;default:break;}
_self.clickStat();}},fixevent:function(event){event.preventDefault();},findIndex:function(obj,tagname){var parent=obj.parentNode;var children=parent.getElementsByTagName(tagname);var i;for(i=0;i<children.length;i++){if(obj==children[i]){break;}}
return i;},firstLink:function(obj){var _config=this.config,_self=this,_cache=this.cache,firstNode=YUD.getAncestorByTagName(obj,_config.firstParentTag);_cache.x=_self.findIndex(firstNode,_config.firstParentTag)+1;},secondLink:function(obj){var _config=this.config,_self=this,_cache=this.cache,secondNode=YUD.getAncestorByTagName(obj,_config.secondSelect),firstNode=YUD.getAncestorByTagName(obj,_config.firstSelect);_cache.x=_self.findIndex(firstNode,_config.firstSelect)+1;_cache.y=_self.findIndex(secondNode,_config.secondSelect);},thirdLink:function(obj){var _config=this.config,_self=this,_cache=this.cache,secondNode=YUD.getAncestorByTagName(obj,_config.secondSelect),firstNode=YUD.getAncestorByTagName(obj,_config.firstSelect);_cache.x=_self.findIndex(firstNode,_config.firstSelect)+1;_cache.y=_self.findIndex(secondNode,_config.secondSelect);_cache.z=_self.findIndex(obj,_config.targetSelect)+1;},clickStat:function(){var _config=this.config,_cache=this.cache,str;if(_cache.x!==''&&_cache.y!==''&&_cache.z!==''){str=_cache.x+'-'+_cache.y+'-'+_cache.z;}else if(_cache.x!==''&&_cache.y!==''){str=_cache.x+'-'+_cache.y;}else{str=_cache.x;}
var cookieId=YUD.getCookie('ali_apache_id')||'',memberId=AE.app.cookieInfo.memberSeq||'',userId='',isMember=false;if(memberId!=''){isMember=true;userId=memberId;}else{userId=cookieId;}
var params={ae_project_id:_config.ae_project_id,ae_page_type:_config.ae_page_type,ae_object_type:_config.ae_object_type,ae_object_value:str,ae_ismember:isMember,ae_user_id:userId}
dmtrack.clickstat(_config.url,params);}}};

AE.namespace('AE.run.BPBanner');AE.run.BPBanner=function(){config={wrapId:'inf-bp'};};AE.run.BPBanner.prototype={init:function(cusConfig){this.config=YL.merge(config,cusConfig||'');this.render();},getUserLang:function(){var lang='';if(window.navigator.language){lang=window.navigator.language;}else if(window.navigator.systemLanguage){lang=window.navigator.systemLanguage;}
return lang.toLowerCase();},render:function(){var userLang=this.getUserLang();var bannerImg='';if(userLang.indexOf('ru')!=-1){if(window.storeParams){bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_718x75_ru.png';}else{bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_975x75_ru.png';}}else{if(window.storeParams){bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_718x75.png';}else{bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_975x75.png';}}
get(this.config.wrapId).innerHTML='<div class="bp-banner"><a href="http://www.aliexpress.com/buyerprotection/index.html" rel="nofollow"><img class="banner-img" src="'+bannerImg+'" /></a></div>';}};;

YUE.onContentReady('base',function(){var imageDetail_imageType=runParams.imageDetail_imageType,imageDetail_imageExist=runParams.imageDetail_imageExist,adminSeq=runParams.adminSeq,companyId=runParams.companyId,productId=runParams.productId,startValidDate=runParams.startValidDate,feedbackServer=runParams.feedbackServer,imageServer=runParams.imageServer,userCountry=runParams.userCountry,freightServer=runParams.freightServer,userType=runParams.userType,productTradeCount=runParams.productTradeCount;if(!get('run-params')){INF_IMAGE_SHOW=(new AE.run.infImageShow());INF_IMAGE_SHOW.init({sINFImageContainerId:'img',sSICClassName:'image-nav-item',sMICClassName:'image-item',iMICWH:250,iSICWH:35,sZoomHref:runParams.imageDetailPageURL,bEnableMagnifier:true,sSICSelectedClassName:'current',oImageResource:[],aBISrc:runParams.imageURL});}
(new AE.run.loadFeedbackRating()).init({targetId:'extra',levelClassName:'feedback-level',textClassName:'feedback-text',rateClassName:'feedback-rate',scoreClassName:'feedback-score',timeClassName:'feedback-time',timeUnitClassName:'feedback-time-unit',tipButtonId:'extra-btn-feedback-tip',tipContainerId:'extra-pnl-feedback-tip',ownerMemberId:adminSeq,companyId:companyId,productId:productId,startValidDate:startValidDate,feedbackUrl:feedbackServer,imageUrl:imageServer,proxyUrl:'aliexpress.com'});var dsrbox=get("extra-feedback");if(AE.run.DSR&&dsrbox){var serverURl=runParams.serverUrl||'http://www.aliexpress.com';var feedbackDetialLink=YUD.getElementsByClassName('feedback-rate','a',dsrbox);if(feedbackDetialLink&&feedbackDetialLink[0]){feedbackDetialUrl=feedbackDetialLink[0].href||'';}
(new AE.run.DSR()).init({server:serverURl,targetBox:dsrbox,ownerMemberId:runParams.adminSeq,detailServer:feedbackDetialUrl});}
var atm=get('extra-atm');if(atm){var atmSingleImg=function(id,className,withText){var alit=document.getElementById(id);if(OnLine==1){if(alit!=null){alit.className=className;if(withText){alit.innerHTML='Chat now!';}
alit.href=alit.href.replace('isOnline','1');alit.title='Chat with me now';}}else if(OnLine==2||OnLine===0){if(alit!=null){alit.className=className+'grey';if(withText){alit.innerHTML='Offline';}
alit.href=alit.href.replace('isOnline','0');alit.title='Leave me a message';}}};atmSingleImg('extra-atm','atm16',true);YUE.on(atm,'click',function(){dmtrack.clickstat('http://tracelog.www.alibaba.com/null.gif',{tracelog:'wto_detail_wangwang'});});}
if(get("inf-bp")){var bpChannelUrl="http://www.aliexpress.com/buyerprotection/index.html";var bpBanner="http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_987x75.png";get("inf-bp").innerHTML='<a href="'+bpChannelUrl+'" rel="nofollow"><img src="'+bpBanner+'" /></a>';}
if(get('bp-banner')&&AE.run.BPBanner){(new AE.run.BPBanner()).init({wrapId:'bp-banner'});}
YUD.getElementsByClassName('inf-pnl-price-detail','*','buy-now-form',function(){var _self=this;if(YUD.getElementsByClassName('ws-price-more','*',_self)){var wsAllPrice=YUD.getElementsByClassName('tbl-standard','*',_self)[0];YUD.getElementsByClassName('ws-price-more','*',_self,function(){var theStr=this.innerHTML;YUE.on(this,'click',function(){if(YUD.hasClass(this,'ws-price-more-up')){YUD.removeClass(this,'ws-price-more-up');YUD.setStyle(wsAllPrice,'display','none');this.innerHTML=theStr;}else{YUD.addClass(this,'ws-price-more-up');YUD.setStyle(wsAllPrice,'display','block');this.innerHTML='View Less';}});});}});YUD.getElementsByClassName('company-name','div','extra',function(){var alink=this.getElementsByTagName('a')[0];var alinkHTML=alink.innerHTML;alink.setAttribute('title',alinkHTML);if(alinkHTML.length>43){alinkHTML=alinkHTML.substr(0,43)+'...';}
alink.innerHTML=alinkHTML;});if(window.discountCountDownConfig){countDownForDiscountProduct(window.discountCountDownConfig);}});function countDownForDiscountProduct(config){var randomSecond=function(){return parseInt(Math.random()*60,10);};var countDowns=YUD.getElementsByClassName('countdown','*','buy-now-form');if(countDowns.length>0){for(var i=0,len=countDowns.length;i<len;i++){countDowns[i].setAttribute('id','discountCountdown'+i);(new AE.app.countdown()).init({wrapId:'discountCountdown'+i,pieceClasses:{hour:'hour',minute:'minute',second:'second'},nowTime:new Date(0,0,0,0,0,0),desTime:new Date(0,0,0,config.hour,config.minute,randomSecond()),formatHour:true});}}}
function alitalkEncryptForWholesaleToSeller(enemberId,from,id1,id2){var binstalled=checkInstallEnaliint();var isIE=checkIEorFirefox();var para="";var selfpara="";var nextUrl="";var win,id=id1,focusProductParam="";var fromProduct=11;if(from==fromProduct){focusProductParam="&ptype=e&gid="+id+"&id="+enemberId;}
if(isIE===true){if(binstalled!="-1"){var referUrl=document.URL;var timestamp=new Date();if(OnLine==2){selfpara="https://dmtracking2.alibaba.com/feedbackfromalitalk.html?type=client&STEP=CLICK&from="+from+"&id="+id+"&refer="+referUrl.replace(/&/ig,"$")+"&time="+timestamp.getTime();logger(selfpara);win=open(getFeedBackMessage(from,'0',id1,id2),'feedBack');win.focus();}
else{if(navigator.platform.indexOf("Mac")>-1){para=focusProductParam;}else{para=focusProductParam+"&url2=https://dmtracking2.alibaba.com/feedbackfromalitalk.html?from="+from+"#id="+id+"#refer="+referUrl.replace(/&/ig,"$")+"#time="+timestamp.getTime();}
selfpara="https://dmtracking2.alibaba.com/feedbackfromalitalk.html?type=client&STEP=CLICK&from="+from+"&id="+id+"&refer="+referUrl.replace(/&/ig,"$")+"&time="+timestamp.getTime();logger(selfpara);sendMessage(enemberId,para);}}
else{if(OnLine==1){win=open(getWebAtmUrl(from,enemberId,id1),Math.round(Math.random()*24*100),'width=785,height=600,location=no,toolbar=no,status=no,resizable=yes,scrollbars=no');win.focus();}
else{win=open(getFeedBackMessage(from,'0',id1,id2),'feedBack');win.focus();}}}
else{doOpenWebIM(from,enemberId,id1);}}
function alitalkEncryptForWholesaleToBuyer(enemberId,from,id1,id2){var binstalled=checkInstallEnaliint();var isIE=checkIEorFirefox();var para="";var selfpara="";var nextUrl="";var win,id=id1,focusProductParam="";var fromProduct=11;if(from==fromProduct){focusProductParam="&ptype=e&gid="+id+"&id="+enemberId;}
if(isIE===true){if(binstalled!="-1"){var referUrl=document.URL;var timestamp=new Date();if(OnLine==2){selfpara="https://dmtracking2.alibaba.com/feedbackfromalitalk.html?type=client&STEP=CLICK&from="+from+"&id="+id+"&refer="+referUrl.replace(/&/ig,"$")+"&time="+timestamp.getTime();logger(selfpara);win=open(getFeedBackMessage(from,'1',id1,id2),'feedBack');win.focus();}
else{if(navigator.platform.indexOf("Mac")>-1){para=focusProductParam;}else{para=focusProductParam+"&url2=https://dmtracking2.alibaba.com/feedbackfromalitalk.html?from="+from+"#id="+id+"#refer="+referUrl.replace(/&/ig,"$")+"#time="+timestamp.getTime();}
selfpara="https://dmtracking2.alibaba.com/feedbackfromalitalk.html?type=client&STEP=CLICK&from="+from+"&id="+id+"&refer="+referUrl.replace(/&/ig,"$")+"&time="+timestamp.getTime();logger(selfpara);sendMessage(enemberId,para);}}
else{if(OnLine==1){win=open(getWebAtmUrl(from,enemberId,id1),Math.round(Math.random()*24*100),'width=785,height=600,location=no,toolbar=no,status=no,resizable=yes,scrollbars=no');win.focus();}
else{win=open(getFeedBackMessage(from,'1',id1,id2),'feedBack');win.focus();}}}
else{doOpenWebIM(from,enemberId,id1);}}
function getFeedBackMessage(from,toMemberType,id1,id2){var feedBackUrl="";var referUrl=document.URL;var memberType="seller";var feed_back_message_server=runParams.feedbackMessageServer;if(toMemberType==1){memberType="buyer";}
if(from==11){feedBackUrl=feed_back_message_server+'/message/new.htm?productId='+id1+'&messageType=product'+'&memberType='+memberType+"&refer="+referUrl.replace(/&/ig,"$");}
else{if(from==12){feedBackUrl=feed_back_message_server+'/message/new.htm?memberSeq='+id1+'&messageType=member'+'&memberType='+memberType+"&refer="+referUrl.replace(/&/ig,"$");}
else{if(from==13){feedBackUrl=feed_back_message_server+'/message/new.htm?memberSeq='+id1+'&storeId='+id2+'&messageType=store'+'&memberType='+memberType+'&refer='+referUrl.replace(/&/ig,"$");}
else{feedBackUrl="error404.html";}}}
return feedBackUrl;};

AE.namespace('AE.app');AE.app.cookieInfo=new function(){var _self=this;_self.isLoggedIn=false;_self.isFirstIn=false;_self.country='';_self.firstName='';_self.lastName='';_self.serviceType='';_self.memberSeq='';var init=function(){var isLoginCookie=AE.bom.getCookie('xman_us_t');var userCookie=AE.bom.getCookie('xman_us_f');if(isLoginCookie&&isLoginCookie.indexOf('sign=y')!==-1){_self.isLoggedIn=true;}
var userReg=/x_user=([^&"]+)/;if(userCookie&&userReg.test(userCookie)){userCookie.match(userReg);userCookie=RegExp.$1;userCookie=userCookie.split('|');if(userCookie.length>=5){_self.country=userCookie[0];_self.firstName=userCookie[1].replace(/</g,"&lt;").replace(/>/g,"&gt;");_self.lastName=userCookie[2].replace(/</g,"&lt;").replace(/>/g,"&gt;");_self.serviceType=userCookie[3];_self.memberSeq=userCookie[4];}}
if(AE.bom.getCookie('ali_intl_firstIn').isEmpty()){_self.isFirstIn=true;}}
init();};;

AE.namespace('AE.run');if(!AE.run.popXmanDialog){AE.run.popXmanDialog=function(){this.config={sourceId:'',xmanTempContentId:'',xmanContentClassName:'',xmanCloseClassName:'',registerAction:'',usaeServer:'',registerFrom:'',couponCode:'',sessionId:'',registerSuccessCallback:null,loginSuccessCallback:null,unDefaultDo:null,loginCallBackGlobal:'LOGIN_CALLBACK',regCheckCodeServer:'http://checktoken1.alibaba.com/service/checkcode',tipsContent:'',unClose:false};this.cache={type:'l',ajaxEmailCheck:false,lastCheckEmail:'',maskEl:{},oDialog:{}};};AE.run.popXmanDialog.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this,config=this.config,cache=this.cache;var cookie_logined=AE.bom.getCookie('xman_us_t'),check_reg=new RegExp('sign=y');if(config.sourceId!==''){YUE.on(config.sourceId,'click',function(ev){window[config.loginCallBackGlobal]=function(){config.loginSuccessCallback.call();};cookie_logined=AE.bom.getCookie('xman_us_t');if(cookie_logined&&check_reg.test(cookie_logined)){cache.type='';}else if(AE.app.cookieInfo['firstName']){cache.type='l';}else{cache.type='r';}
if(cache.type==='r'||cache.type==='l'){YUE.stopEvent(ev);}
if(cache.type&&cache.type!==''){_self._popXmanDialog(cache.type);}else{if(config.unDefaultDo!==null){YUE.stopEvent(ev);config.unDefaultDo();}}});}else{window[config.loginCallBackGlobal]=function(){config.loginSuccessCallback.call();};if(cookie_logined&&check_reg.test(cookie_logined)){cache.type='';}else if(AE.app.cookieInfo['firstName']){cache.type='l';cache.originPassport='';}else{cache.type='r';}
if(cache.type&&cache.type!==''){_self._popXmanDialog(cache.type);}else{if(config.unDefaultDo!==null){config.unDefaultDo();}}}
YUE.on(window,'load',function(){(new Image()).src='http://i02.i.aliimg.com/images/eng/wholesale/icon/loading-middle.gif';(new Image()).src='http://i02.i.aliimg.com/images/eng/wholesale/icon/loading_1.gif';});},_onXmanSuccess:function(){var _self=this,config=_self.config,cache=_self.cache;var registerCurrent='',loginCurrent='',registerDisplay='display:none;',loginDisplay='display:none;';if(cache.type==='r'){registerCurrent='current';registerDisplay='display:block';}else{loginCurrent='current';loginDisplay='display:block';}
get('ws-xman-wrapper').innerHTML='<ul class="ws-xman-tab-menu">'+'    <li class="ws-xman-tab-item '+registerCurrent+'"><span><a href="javascript:;" style="outline: medium none;">Not a Member?</a></span></li>'+'    <li class="ws-xman-tab-item '+loginCurrent+'"><span><a href="javascript:;" style="outline: medium none;">Already an AliExpress/Alibaba Member?</a></span></li>'+'</ul>'+'<div class="ws-xman-form xman-box-content" style="'+registerDisplay+'">'+'    <form  method="post">'+'        <table class="ws-xman-register-table">'+'            <tbody>'+'                <tr>'+'                    <td colspan="2"><div class="error-tip" id="ws-xman-register-server-info" style="display:none;">Server Error!</div></td>'+'                </tr>'+'                <tr><th colspan="2"><span>Email:</span></th></tr>'+'                <tr>'+'                    <td style="width:200px;"><input type="text" class="input-text" name="" id="ws-xman-register-email" /></td>'+'                    <td style="width:218px;"><img id="ws-xman-email-checking" src="http://i02.i.aliimg.com/images/eng/wholesale/icon/loading_1.gif" width="16" height="16" alt="loading" style="display:none;vertical-align:middle" /> <div class="error-tip" id="ws-xman-register-email-info" style="display:none;"></div></td>'+'                </tr>'+'                <tr><th colspan="2"><span>Contact Name:</span></th></tr>'+'                <tr>'+'                    <td>'+'                         <input type="text" class="input-name" name="" id="ws-xman-register-fname" placeholder="First Name">'+'                         <input type="text" class="input-name" name="" id="ws-xman-register-lname" placeholder="Last Name">'+'                    </td>'+'                    <td><div class="error-tip" id="ws-xman-register-name-info" style="display:none;"></div></td>'+'                </tr>'+'                <tr><th colspan="2"><span>Password:</span></th></tr>'+'                <tr>'+'                    <td>'+'                        <input type="password" class="input-text" name="" id="ws-xman-register-password">'+'                    </td>'+'                    <td><div class="error-tip" id="ws-xman-register-password-info" style="display:none;"></div></td>'+'                </tr>'+'                <tr><th colspan="2"><span>Reenter Password:</span></th></tr>'+'                <tr>'+'                    <td>'+'                        <input type="password" class="input-text" name="" id="ws-xman-register-repassword">    '+'                    </td>'+'                    <td><div class="error-tip" id="ws-xman-register-repassword-info" style="display:none;"></div></td>'+'                </tr>'+'                <tr><th colspan="2"><span>Enter the Code Shown:</span></th></tr>'+'                <tr>'+'                    <td>'+'                        <input type="text" class="input-text" name="" id="ws-xman-register-checkcode" style="width:150px;float:left;">'+'                    </td>'+'                    <td><div class="error-tip" id="ws-xman-register-checkcode-info" style="display:none;"></td>'+'                </tr>'+'                <tr>'+'                    <td colspan="2">'+'                       <img width="150" height="40" alt="checkcode" title="Refresh" id="ws-xman-register-checkcode-img" src="'+config.regCheckCodeServer+'?sessionID='+config.sessionId+'&type=mark&t='+Math.random()+'">'+'                       <a href="javascript:void(0);" id="ws-xman-register-refresh-code">Refresh</a>'+'                    </td>'+'                </tr>'+'                <tr>'+'                    <td colspan="2" style="padding-top:5px;">'+'                        <input type="checkbox" checked="checked" class="input-checkbox" name="" id="ws-xman-register-agreement" value="agreement">'+'                            AliExpress.com Free Membership '+'                        <a href="http://news.alibaba.com/article/detail/help/100453670-1-alibaba.com-free-membership-agreement.html" target="_blank">Agreement</a>'+'                    </td>'+'                </tr>'+'            </tbody>'+'        </table>'+'        <div class="submit-box">'+'            <a type="button" class="buttonSkinA1" id="ws-xman-register-submit">Create My Account</a>'+'        </div>    '+'    </form>'+'</div>'+'<div class="ws-xman-form" id="xman-login-wrapper" style="'+loginDisplay+'"></div>';_self._initXmanTab();YUE.on('ws-xman-register-email','blur',_self._onEmailBlur,{_self:_self});YUE.on('ws-xman-register-lname','blur',_self._onUserNameBlur,{_self:_self});YUE.on('ws-xman-register-password','blur',_self._onPasswordBlur,{_self:_self});YUE.on('ws-xman-register-repassword','blur',_self._onRepasswordBlur,{_self:_self});YUE.on('ws-xman-register-checkcode','blur',_self._onCheckCodeBlur,{_self:_self});YUE.on('ws-xman-register-refresh-code','click',function(){_self.getRegCheckCode('ws-xman-register-checkcode-img',_self.config.regCheckCodeServer);},{_self:_self});YUE.on('ws-xman-register-agreement','click',function(ev,args){if(this.checked){YUD.removeClass(get('ws-xman-register-submit'),'buttonSkinC1');YUD.addClass(get('ws-xman-register-submit'),'buttonSkinA1');}else{YUD.removeClass(get('ws-xman-register-submit'),'buttonSkinA1');YUD.addClass(get('ws-xman-register-submit'),'buttonSkinC1');}},{_self:_self});var _doRegister=function(ev,args){if(YUD.hasClass('ws-xman-register-submit','buttonSkinC1')){return;}
var _self=args._self,config=_self.config,cache=_self.cache,check=true;var userInutEmail=get('ws-xman-register-email').value;check=_self._onCheckCodeBlur.call(get('ws-xman-register-checkcode'),null,{_self:_self})&&check;check=_self._onRepasswordBlur.call(get('ws-xman-register-repassword'),null,{_self:_self})&&check;check=_self._onPasswordBlur.call(get('ws-xman-register-password'),null,{_self:_self})&&check;check=_self._onUserNameBlur.call(get('ws-xman-register-lname'),null,{_self:_self})&&check;check=_self._onUserNameBlur.call(get('ws-xman-register-fname'),null,{_self:_self})&&check;if(!_self.cache.ajaxEmailCheck&&(userInutEmail===''||_self.cache.lastCheckEmail!==userInutEmail)){check=_self._onEmailBlur.call(get('ws-xman-register-email'),null,{_self:_self})&&check;}
if(check&&_self.cache.ajaxEmailCheck){YUD.setStyle(get('ws-xman-register-server-info'),'display','none');var boxRegion=document.getElementById('ws-xman-temp-mask-content');_self.loadingShow(boxRegion.clientHeight+2);var paramArr=[];paramArr.push('action='+config.registerAction);paramArr.push('from='+encodeURIComponent(_self.config.registerFrom));paramArr.push('cc='+config.couponCode);paramArr.push('event_submit_do_buyer_register=anything');paramArr.push('email='+encodeURIComponent(get('ws-xman-register-email').value));paramArr.push('firstName='+encodeURIComponent(get('ws-xman-register-fname').value));paramArr.push('lastName='+encodeURIComponent(get('ws-xman-register-lname').value));paramArr.push('password='+encodeURIComponent(get('ws-xman-register-password').value));paramArr.push('imagePassword='+encodeURIComponent(get('ws-xman-register-checkcode').value));paramArr.push('t='+Math.random());paramArr.push('_csi_='+config.sessionId);YAHOO.util.Get.script(_self.config.usaeServer+'/wsuser/buyerJoin/noMemberResult.htm?'+paramArr.join('&'),{onSuccess:function(o){var _self=o.data._self,config=_self.config,cache=_self.cache;var returnObj=window.REGISTER_RESULT;if(returnObj.result==='true'){var regIframe=document.createElement('iframe');YUD.setStyle(regIframe,'display','none');cache.maskEl.parentNode.appendChild(regIframe);regIframe.src=returnObj.loginUrl;YUE.on(regIframe,'load',function(ev,args){var _self=args._self;if(AE.bom.getCookie('xman_us_t')){cache.maskEl.parentNode.removeChild(cache.maskEl);cache.oDialog.close();config.registerSuccessCallback.call();YUE.removeListener(this,'load');}},{_self:_self});}else{cache.maskEl.parentNode.removeChild(cache.maskEl);if(returnObj.email){_self.showError('ws-xman-register-email',returnObj.email);}
if(returnObj.firstName){_self.showError('ws-xman-register-fname',returnObj.firstName);}
if(returnObj.lastname){_self.showError('ws-xman-register-lname',returnObj.lastname);}
if(returnObj.password){_self.showError('ws-xman-register-password',returnObj.password);}
if(returnObj.repassword){_self.showError('ws-xman-register-repassword',returnObj.repassword);}
if(returnObj.checkCode){_self.showError('ws-xman-register-checkcode','Type the characters you see in the picture');_self.getRegCheckCode('ws-xman-register-checkcode-img',config.regCheckCodeServer);}}},onFailure:function(){cache.maskEl.parentNode.removeChild(cache.maskEl);YUD.setStyle(get('ws-xman-register-server-info'),'display','');},onTimeout:function(){cache.maskEl.parentNode.removeChild(cache.maskEl);YUD.setStyle(get('ws-xman-register-server-info'),'display','');},data:{_self:_self},timeout:10000});}
YUE.stopEvent(ev);};YUE.on('ws-xman-register-submit','click',_doRegister,{_self:_self});YUE.on('ws-xman-register-checkcode','keydown',function(ev,args){if(ev.keyCode==13){_doRegister(ev,args);}},{_self:_self});},_onEmailBlur:function(ev,args){var _self=args._self;if(_self._checkEmail(this.value)){_self.hideInfo(this.id);YUD.setStyle(get('ws-xman-email-checking'),'display','block');_self.cache.lastCheckEmail=this.value;YAHOO.util.Get.script(_self.config.usaeServer+'/wsuser/buyerJoin/ajaxEmailDuplicatedCheck.htm?email='+this.value,{onSuccess:function(o){var _self=o.data._self;YUD.setStyle(get('ws-xman-email-checking'),'display','none');if(EMAIL_CHECK_RESULT.result==='no'){_self.hideError(o.data.id);_self.cache.ajaxEmailCheck=true;}else{_self.showError(o.data.id,'This email already exists.');_self.cache.ajaxEmailCheck=false;}},onFailure:function(o){var _self=o.data._self;YUD.setStyle(get('ws-xman-email-checking'),'display','none');_self.showError(o.data.id,'This email already exists.');_self.cache.ajaxEmailCheck=false;},onTimeout:function(o){var _self=o.data._self;YUD.setStyle(get('ws-xman-email-checking'),'display','none');_self.showError(o.data.id,'This email already exists.');_self.cache.ajaxEmailCheck=false;},data:{_self:_self,id:this.id},timeout:5000});return true;}else{_self.showError(this.id,'Please enter a valid Email Address');return false;}},_onUserNameBlur:function(ev,args){var _self=args._self;var fname=get('ws-xman-register-fname').value;var lname=get('ws-xman-register-lname').value;if(!_self._checkName(fname)){_self.showError(this.id,'Please enter a valid First Name');return false;}else if(!_self._checkName(lname)){_self.showError(this.id,'Please enter a valid Last Name');return false;}else{_self.hideError(this.id);return true;}},_onPasswordBlur:function(ev,args){var _self=args._self;if(_self._checkPassword(this.value)){_self.hideError(this.id);if(get('ws-xman-register-repassword').value.length>0){_self._onRepasswordBlur.call(get('ws-xman-register-repassword'),null,{_self:_self});}
return true;}else{_self.showError(this.id,'Please enter 6 - 20 characters (A-Z, a-z, 0-9 only)');return false;}},_onRepasswordBlur:function(ev,args){var _self=args._self;if(_self._checkPassword(this.value)){if(this.value!==get('ws-xman-register-password').value){_self.showError(this.id,'Passwords are not the same');return false;}else{_self.hideError(this.id);return true;}}else{_self.showError(this.id,'Please enter 6 - 20 characters (A-Z, a-z, 0-9 only)');return false;}},_onCheckCodeBlur:function(ev,args){var _self=args._self;if(_self._checkCode(this.value)){_self.hideError(this.id);return true;}
else{_self.showError(this.id,'Please enter valid Code');return false;}},_checkCode:function(code){var r=/^[\x00-\x7f]{1,250}$/;if(r.test(code)){return true;}else{return false;}},_checkPassword:function(password){var r=/^[\w]{6,20}$/;if(password.length<6||password.length>20){return false;}else if(r.test(password)){return true;}else{return false;}},_checkName:function(name){var r=/^[a-zA-Z .-]{1,128}$/;if(name.length>128){return false;}else if(r.test(name)){return true;}else{return false;}},_checkEmail:function(email){var r1=/^\s*\w+(?:\.{0,1}[\w-]+)*@[a-zA-Z0-9]+(?:[\-.][a-zA-Z0-9]+)*\.[a-zA-Z]+\s*$/i;var r2=/^((?!@(?:.*)alibaba).)*$/i;if(email.length>128){return false;}else if(r1.test(email)&&r2.test(email)){return true;}else{return false;}},showError:function(elId,message){var errorEl=YUD.get(elId+'-info');if(!errorEl){errorEl=get('ws-xman-register-name-info');}
errorEl.innerHTML=message;YUD.removeClass(errorEl,'success-tip');YUD.addClass(errorEl,'error-tip');YUD.setStyle(errorEl,'display','');},hideError:function(elId){var errorEl=get(elId+'-info');if(!errorEl){errorEl=get('ws-xman-register-name-info');}
errorEl.innerHTML='';YUD.removeClass(errorEl,'error-tip');YUD.addClass(errorEl,'success-tip');if(elId!='ws-xman-register-checkcode'){YUD.setStyle(errorEl,'display','');}else{YUD.setStyle(errorEl,'display','none');}},hideInfo:function(elId){var errorEl=get(elId+'-info');if(!errorEl){errorEl=get('ws-xman-register-name-info');}
errorEl.innerHTML='';YUD.removeClass(errorEl,'error-tip');YUD.removeClass(errorEl,'success-tip');YUD.setStyle(errorEl,'display','none');},getRegCheckCode:function(elId,server){var config=this.config,cache=this.cache;var t=Math.random();get(elId).src=server+'?sessionID='+config.sessionId+'&type=mark&t='+t;},loadingShow:function(heightNum){var maskEl=document.createElement('div');maskEl.innerHTML='<img src="http://i02.i.aliimg.com/images/eng/wholesale/icon/loading-middle.gif" width="32" height="32" />';maskEl.id='ws-xman-mask';YUD.setStyle(maskEl,'z-index',parseInt(YUD.getStyle(get(this.config.xmanTempContentId),'z-index'),10)+1);YUD.setStyle(maskEl,'width',YUD.getStyle(get(this.config.xmanTempContentId),'width'));YUD.setStyle(maskEl,'height',heightNum+'px');YUD.setStyle(maskEl,'display','block');get(this.config.xmanTempContentId).appendChild(maskEl);this.cache.maskEl=maskEl;},_initXmanTab:function(){var menuItem=YUD.getElementsByClassName('ws-xman-tab-item','*','ws-xman-wrapper');var contentItem=YUD.getElementsByClassName('ws-xman-form','div','ws-xman-wrapper');for(var i=0,len=menuItem.length;i<len;i++){YUE.on(menuItem[i],'click',function(ev,args){var index=args.index;YUD.removeClass(menuItem,'current');YUD.addClass(menuItem[index],'current');YUD.setStyle(contentItem,'display','none');YUD.setStyle(contentItem[index],'display','block');},{index:i});}},_popXmanDialog:function(type){var _self=this;var config=_self.config;var cache=_self.cache;var xmanDialogHTML='';if(config.tipsContent!==''){xmanDialogHTML=config.tipsContent;}
xmanDialogHTML+='<div id="ws-xman-wrapper">'+'<div id="ws-xman-loading" class="ws-xman-loading"><img src="http://i02.i.aliimg.com/images/eng/wholesale/icon/loading-middle.gif" alt="loading" /></div>'+'</div>';YAHOO.util.Get.script('https://login.alibaba.com/xman/xman.js?pd=aliexpress&display=e&div_id=xman-login-wrapper&style=l&lbutton=c&login=a&tab=j&country_d=us&title=a&callback='+config.loginCallBackGlobal,{onSuccess:function(){_self._onXmanSuccess();},onFailure:function(){get('ws-xman-wrapper').innerHTML='<div style="margin:10px;"><div class="board infoC">Server Error!</div></div>';},onTimeout:function(){get('ws-xman-wrapper').innerHTML='<div style="margin:10px;"><div class="board infoC">Server Error!</div></div>';},timeout:10000});var oDialog=new AE.app.dialog();oDialog.init({tempContentId:config.xmanTempContentId,contentClassName:config.xmanContentClassName,closeClassName:config.xmanCloseClassName,contentTop:70,maskColor:'#666',maskDivId:'ae-mask',zIndex:1024,title:'Sign In or Join for Free!',contentHTML:xmanDialogHTML,callback:null,isEscUsed:false});cache.oDialog=oDialog;var closeEl=YUD.getElementsByClassName(config.xmanCloseClassName,'a',config.xmanTempContentId);if((config.registerFrom&&config.registerFrom=='ATM')||config.unClose){YUD.setStyle(closeEl[0],'display','none');}}};};
;

AE.namespace('AE.run.intlMyaliexpress.meHomePage.moduleData');AE.run.intlMyaliexpress.meHomePage.moduleData=function(){this.SKU_PARAM=skuProducts;this.skuIds=skuAttrIds;this._cache={routeSel:[-1,-1,-1]};this._store={price:-1,bulkInventory:9999,discountPrice:'',quantityNo:'',buckTip:''};};AE.run.intlMyaliexpress.meHomePage.moduleData.prototype={init:function(){var _self=this;if(skuProducts.length>0&&skuProducts[0].skuPropIds==""){_self.changeSkuValue(skuProducts[0]);return;}
YUD.setStyle(get('inf-pnl-total-price'),"display","none");this._store.price=get('sku-price').innerHTML;this._store.bulkInventory=get('bulk-order-store').value;if(get('sku-discount-price'))this._store.discountPrice=get('sku-discount-price').innerHTML;if(get('quantity-no'))this._store.quantityNo=get('quantity-no').innerHTML;if(get('sku-bulk-price'))this._store.buckTip=get('sku-bulk-price').innerHTML;if(this.skuIds.length==1)
this.initSkuState();this.bindEvt();},bindEvt:function(){var _self=this;YUE.on(YUD.getElementsByClassName('sku-value'),'click',_self.skuValueClick,{instance:_self});var skuColor=YUD.getElementsByClassName('sku-color','ul');for(var i=0;skuColor[i];i++){YUE.on(skuColor[i].getElementsByTagName('a'),'click',_self.skuColorNodeClick,{instance:_self});}},initSkuState:function(){var _self=this;var selCom=[];selCom[0]=[];for(var i=0;i<_self.SKU_PARAM.length;i++){selCom[0].push(_self.SKU_PARAM[i]);}
_self.setSkuState(_self.skuIds[0],_self.SKU_PARAM,_self.skuIds[0],0);},skuColorNodeClick:function(event,obj){var tempImgShow=INF_IMAGE_SHOW;if(this.getElementsByTagName('img').length!=0){var bigPicSrc=this.getElementsByTagName('img')[0].getAttribute('bigpic');tempImgShow.setMainPic(bigPicSrc);}else{if(MAIN_BIG_PIC&&MAIN_BIG_PIC!=''){tempImgShow.setMainPic(MAIN_BIG_PIC);}}},skuValueClick:function(event,obj){var _self=obj.instance;if(this.parentNode.className=='disabled')
return false;var selAttr=this.id.split('-');if(YUD.hasClass(this.parentNode,'active')){_self._cache.routeSel[selAttr[1]-1]=-1;YUD.removeClass(this.parentNode,'active');var tmpLi=this.parentNode;var tempI=tmpLi.getElementsByTagName('i');tmpLi.removeChild(tempI[0]);}else{var nowSkuParent=this.parentNode.parentNode;var nowSkuAttrs='';if(nowSkuParent){nowSkuAttrs=nowSkuParent.getElementsByTagName('li');var tmpLi='',tempI='';for(var i=0;tmpLi=nowSkuAttrs[i];i++){if(YUD.hasClass(tmpLi,'active')){YUD.removeClass(tmpLi,'active');tempI=tmpLi.getElementsByTagName('i')[0];tmpLi.removeChild(tempI);}}
var selectI=document.createElement('i');selectI.innerHTML='selected';this.parentNode.appendChild(selectI);YUD.setStyle(YUD.getNextSibling(nowSkuParent),"display","none");}
YUD.addClass(this.parentNode,'active');_self._cache.routeSel[selAttr[1]-1]=selAttr[2];}
if(get('no-longer-available'))return;_self.findNextWay();},findNextWay:function(){var _self=this;var skuComponent=_self.SKU_PARAM;var skuId=_self.skuIds;var tmpNode='';var nowRoute=_self._cache.routeSel;var routLen=0;var notSelLineNo=-1;var nowRouteSeled=[];for(var i=0;i<_self.skuIds.length;i++){if(nowRoute[i]!=-1){routLen++;nowRouteSeled.push(nowRoute[i]);}else{notSelLineNo=i;}}
var skuLen=skuComponent[0].skuPropIds.split(',').length;if(skuLen!=1){var skuAttrLine=YUD.getElementsByClassName("sku-attr","ul");var skuLi='';for(var i=0;skuAttrLine[i];i++){skuLi=skuAttrLine[i].getElementsByTagName("li");for(var j=0;skuLi[j];j++){YUD.removeClass(skuLi[j],"disabled");}}}
get('sku-price').innerHTML=_self._store.price;get('bulk-order-store').value=_self._store.bulkInventory;if(get('sku-discount-price'))get('sku-discount-price').innerHTML=_self._store.discountPrice;if(window.runParams.buyLimit){if(get('quantity-left')){get('quantity-left').innerHTML=window.runParams.buyLimit<=_self._store.quantityNo?window.runParams.buyLimitHTML.replace(/\{\{quantity\}\}/g,window.runParams.buyLimit):window.runParams.quantityHTML.replace(/\{\{quantity\}\}/g,_self._store.quantityNo);}}else{if(get('quantity-no'))get('quantity-no').innerHTML=_self._store.quantityNo;}
if(get('quantity-no'))get('quantity-no').innerHTML=_self._store.quantityNo;if(get('sku-bulk-price')&&_self._store.buckTip!='')get('sku-bulk-price').innerHTML=_self._store.buckTip;if(routLen+1==skuLen){var noSelComponent=[];var noSelLine=skuId[notSelLineNo];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=nowRouteSeled.concat(noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,notSelLineNo);}else if(routLen==skuLen){var noSelComponent=[];if(skuLen==2){var noSelLine=skuId[1];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=[];noSelComponent[i].push(nowRouteSeled[0],noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,1);noSelLine=skuId[0];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=[];noSelComponent[i].push(nowRouteSeled[1],noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,0);}
if(skuLen==3){var noSelLine=skuId[2];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=[];noSelComponent[i].push(nowRouteSeled[0],nowRouteSeled[1],noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,2);noSelLine=skuId[1];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=[];noSelComponent[i].push(nowRouteSeled[0],nowRouteSeled[2],noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,1);noSelLine=skuId[0];for(var i=0;i<noSelLine.length;i++){noSelComponent[i]=[];noSelComponent[i].push(nowRouteSeled[1],nowRouteSeled[2],noSelLine[i]);}
_self.setSkuState(noSelComponent,skuComponent,noSelLine,0);}
var tmpNode='';for(var i=0;tmpNode=skuComponent[i];i++){skuRoute=tmpNode.skuPropIds.split(',');var canConfirmSkuVal=_self.canConfirmSkuValue(nowRouteSeled,skuRoute);if(canConfirmSkuVal){_self.changeSkuValue(tmpNode);}}}else{}},setSkuState:function(nowRoute,skuComponent,noSelLine,notSelLineNo){var _self=this;var skuRoute=[];var noSelLineLen=noSelLine.length;for(var i=0;tmpNode=skuComponent[i];i++){skuRoute=tmpNode.skuPropIds.split(',');for(var j=0;j<nowRoute.length;j++){var canConfirmSkuVal=_self.canConfirmSkuValue(nowRoute[j],skuRoute);if(canConfirmSkuVal&&j<noSelLineLen){var inventory=tmpNode.skuVal.inventory;var noSelLineId=(notSelLineNo*1+1)+'-'+noSelLine[j];if(!get(get('sku-'+noSelLineId)))return;if(inventory==0){if(!YUD.hasClass(get('sku-'+noSelLineId).parentNode,'disabled'))
YUD.addClass(get('sku-'+noSelLineId).parentNode,'disabled');}else{YUD.removeClass(get('sku-'+noSelLineId).parentNode,'disabled');}}}}},canConfirmSkuValue:function(a1,a2){if(typeof a1=="number"){if(a1==a2)return true;else return false;}else{var isEqual=false;var sortArry1=a1.sort(function(a,b){return a-b;});var sortArry2=a2.sort(function(a,b){return a-b;});if(sortArry1.toString()==sortArry2.toString())isEqual=true;return isEqual;}},changeSkuValue:function(skuAttr){var tmpNode=skuAttr;var inventory=tmpNode.skuVal.inventory;if(inventory==0){}else{YUD.setStyle(get('inf-pnl-total-price'),"display","");get('sku-price').innerHTML=tmpNode.skuVal.skuPrice;get('skuAttr').value=tmpNode.skuAttr?encodeURI(tmpNode.skuAttr):"";get('sku-price-store').value=tmpNode.skuVal.skuPrice;if(tmpNode.skuVal.skuPerPiecePrice){if(get('sku-per-piece-price'))
get('sku-per-piece-price').innerHTML=tmpNode.skuVal.skuPerPiecePrice;}
if(tmpNode.skuVal.bulkOrder){get('bulk-order-store').value=tmpNode.skuVal.bulkOrder;get('act-sku-bulk-price-store').value=tmpNode.skuVal.skuBulkPrice;}
var isActive=tmpNode.skuVal.isActivity;if(get('sku-bulk-price')&&tmpNode.skuVal.skuBulkPrice){get('sku-bulk-price').innerHTML='US $'+tmpNode.skuVal.skuBulkPrice+' / '+get('inf-lbl-unit').innerHTML+' ';}
if(isActive){if(tmpNode.skuVal.actSkuBulkPrice&&get('sku-bulk-price')){get('sku-bulk-price').innerHTML='US $'+tmpNode.skuVal.actSkuBulkPrice+' / '+get('inf-lbl-unit').innerHTML+' ';}
YUD.setStyle(get('quantity-left'),'display','');if(tmpNode.skuVal.bulkOrder){get('bulk-order-store').value=tmpNode.skuVal.bulkOrder;get('act-sku-bulk-price-store').value=tmpNode.skuVal.actSkuBulkPrice;}
if(tmpNode.skuVal.availQuantity){if(window.runParams.buyLimit){var useBuyLimit=Boolean(window.runParams.buyLimit<=tmpNode.skuVal.availQuantity);var theSmaller=useBuyLimit?window.runParams.buyLimit:tmpNode.skuVal.availQuantity;get('sku-active-no').innerHTML=theSmaller;if(get('quantity-left')){get('quantity-left').innerHTML=(useBuyLimit?window.runParams.buyLimitHTML:window.runParams.quantityHTML).replace(/\{\{quantity\}\}/g,theSmaller);}
get('objectStockpile').value=theSmaller;}else{get('sku-active-no').innerHTML=tmpNode.skuVal.availQuantity;if(get('quantity-no'))get('quantity-no').innerHTML=tmpNode.skuVal.availQuantity;get('objectStockpile').value=tmpNode.skuVal.availQuantity;}}
get('sku-discount-price').innerHTML=tmpNode.skuVal.actSkuPrice;get('sku-price-store').value=tmpNode.skuVal.actSkuPrice;}
var skuTip=YUD.getElementsByClassName('sku-totle-price-tip','span');YUD.setStyle(skuTip,'display','none');if(INF.checkQuantity()){INF.changeTotlePrice();}else{}
YUD.setStyle(get('inf-pnl-total-price'),'display','');YUD.setStyle(get('inf-pnl-total-price'),'visibility','visible');}}};;
