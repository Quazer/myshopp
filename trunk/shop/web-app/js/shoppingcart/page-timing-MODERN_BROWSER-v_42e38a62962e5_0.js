
var globalImgServer='http://style.alibaba.com';if(location.protocol==="https:"){globalImgServer='https://ipaystyle.alibaba.com';};

AE.namespace('AE.app');AE.app.cookieInfo=new function(){var _self=this;_self.isLoggedIn=false;_self.isFirstIn=false;_self.country='';_self.firstName='';_self.lastName='';_self.serviceType='';_self.memberSeq='';var init=function(){var isLoginCookie=AE.bom.getCookie('xman_us_t');var userCookie=AE.bom.getCookie('xman_us_f');if(isLoginCookie&&isLoginCookie.indexOf('sign=y')!==-1){_self.isLoggedIn=true;}
var userReg=/x_user=([^&"]+)/;if(userCookie&&userReg.test(userCookie)){userCookie.match(userReg);userCookie=RegExp.$1;userCookie=userCookie.split('|');if(userCookie.length>=5){_self.country=userCookie[0];_self.firstName=userCookie[1].replace(/</g,"&lt;").replace(/>/g,"&gt;");_self.lastName=userCookie[2].replace(/</g,"&lt;").replace(/>/g,"&gt;");_self.serviceType=userCookie[3];_self.memberSeq=userCookie[4];}}
if(AE.bom.getCookie('ali_intl_firstIn').isEmpty()){_self.isFirstIn=true;}}
init();};;

AE.namespace('AE.order.Validator');AE.order.Validator=function(){this.validates=[];this.errTargets=[];return this;};AE.order.Validator.prototype={rules:{isRequired:/.+/,isNumber:/^\d+$/,isEnglish:/^[-a-zA-Z .]*$/,isHalfChar:/^[\x00-\x7F]*$/,isMessage:/^[\x00-\x7F]{1,512}$/,isEmail:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,isUserName:/^[\w+\s]{3,20}$/,isEnglishNumber:/^[a-zA-Z0-9]*$/,hasHTML:/<(\/\s*)?((\w+:)?\w+)(\w+(\s*=\s*((["'])(\\["'tbnr]|[^\7])*?\7|\w+)|.{0})|\s)*?(\/\s*)?>/,isCutNum:/^[\d\-]*$/,valLenth:true},add:function(option){var target=get(option.target);if(!target){return this;}
this.validates.push(option);this.bind(option);return this;},bind:function(option){var self=this,required=option.required===false?false:true,target=get(option.target);if(!target){return this;}
YUE.on(target,'blur',function(){var val=target.value,tipEl=get(option.tipEl);if(required){self.validate.call(self,option);}else{if(!required){if(val.length>0){self.validate.call(self,option);}else{if(val.length===0){self.hideError.call(self,get(option.tipEl));}}}}});return this;},validate:function(option){var rule=option.rule,target=get(option.target),cmpTarget=option.cmpTarget,styleTarget=option.styleTarget===true?true:false;tip=option.errTip,callback=option.callback||null,tipEl=get(option.tipEl),val=YL.trim(target.value),maxLenth=option.maxLenth||9999,minLenth=option.minLenth||0,i=0,len=0,curRule='',curTip='',hasError=false,lengthError=false;if(val.length>maxLenth||val.length<minLenth){lengthError=true;}
if(rule.indexOf('&&')>-1){rule=rule.split('&&');tip=tip.split('&&');len=rule.length;for(;i<len;i+=1){curRule=rule[i];curTip=tip[i];hasError=this._switchValidate(curRule,curTip,val,tipEl,target,cmpTarget,styleTarget,callback,lengthError);if(hasError){break;}}}else{this._switchValidate(rule,tip,val,tipEl,target,cmpTarget,styleTarget,callback,lengthError);}
return this;},_switchValidate:function(rule,tip,val,tipEl,target,cmpTarget,styleTarget,callback,lengthError){var hasError=false,index=-1;switch(rule){case'valLenth':hasError=lengthError;break;case'isSame':hasError=!this.isSame(val,YL.trim(get(cmpTarget).value));break;case'hasHTML':hasError=this.rules[rule].test(val);break;default:hasError=!this.rules[rule].test(val);break;}
if(hasError){this.showError(tipEl,tip);if(this.errTargets.indexOf(target)===-1){this.errTargets.push(target);}}else{this.hideError(tipEl);index=this.errTargets.indexOf(target);if(index>-1){this.errTargets.splice(index,1);}}
if(styleTarget){this.styleTarget(target,hasError,tipEl);}
if(callback&&YL.isFunction(callback)){callback();}
return hasError;},isSame:function(val,value){return val===value;},validateAll:function(){var i=0,len=this.validates.length;for(;i<len;i+=1){if(this.validates[i].required!=false){this.validate(this.validates[i]);}}
return this;},showError:function(el,tip){el.innerHTML=tip;if(YUD.hasClass(el,'hide')){YUD.removeClass(el,'hide');}
return this;},styleTarget:function(el,hasError,tipEl){if(hasError){YUD.removeClass(tipEl,'success-box');YUD.addClass(tipEl,'error-box-a');YUD.addClass(el,'err-item');}else{YUD.removeClass(el,'err-item');YUD.removeClass(tipEl,'error-box-a');if(YUD.hasClass(tipEl,'hide')){YUD.removeClass(tipEl,'hide');}
YUD.addClass(tipEl,'success-box');}
return this;},hideError:function(el){el.innerHTML='';if(!YUD.hasClass(el,'hide')){YUD.addClass(el,'hide');}
return this;}};;
;(function(){function ClickShow(){var _self=this;var defConfig={targetId:"clickShowTargetId",switchId:"",contentId:"clickShowContentId",bodyClickClose:true,showOrHidden:true,needMask:false,needXY:true,excursion:[0,0],closeBtnsClassName:"",maskIframeClassName:"maskIframe",iframeMaskSrc:globalImgServer+"/js/blank.html",hide:false,onInit:function(){},unInit:function(){},onShow:function(){},unShow:function(){},onHidden:function(){},unHidden:function(){}};var config;var isInited=false;var dTarget,dContent,dSwitch,iframeMask,dCloseBtns;var canClose=true;_self.init=function(oConfig){if(isInited){return false;}
config=oConfig||{};_self.config=config;YAHOO.lang.augmentObject(oConfig,defConfig);config.onInit.apply(_self);dTarget=get(config.targetId);dContent=get(config.contentId);dSwitch=(config.switchId==""?dTarget:get(config.switchId));dCloseBtns=(config.closeBtnsClassName==""?[]:YUD.getElementsByClassName(config.closeBtnsClassName,"*",dContent));if(!dSwitch)return;YUE.on(dTarget,"click",_self.showDirectly);if(config.bodyClickClose){YUE.on(document.body,"click",_self.hiddenDirectly);}
if(dCloseBtns){YUE.on(dCloseBtns,"click",_self.dCloseBtnsClick=function(){_self.hiddenDirectly(null,true);});}
YUE.on(dSwitch,"mouseover",_self.dSwitchMouseover=function(){canClose=false;});YUE.on(dContent,"mouseover",_self.dContentMouseover=function(){canClose=false;});YUE.on(dSwitch,"mouseout",_self.dSwitchMouseout=function(){canClose=true;});YUE.on(dContent,"mouseout",_self.dContentMouseout=function(){canClose=true;});if(config.needMask){iframeMask=document.createElement("iframe");iframeMask.className=config.maskIframeClassName;iframeMask.style.display="none";var targetIndex=0;if(!isNaN(YUD.getStyle(dContent,'zIndex'))){targetIndex=YUD.getStyle(dContent,'zIndex');}
iframeMask.style.zIndex=targetIndex-1;iframeMask.style.top="0px";iframeMask.style.left="0px";if(YAHOO.env.ua.ie===6&&location.protocol=="https:"){iframeMask.src=config.iframeMaskSrc;}
iframeMask.frameBorder=0;dContent.parentNode.appendChild(iframeMask);}
config.unInit.apply(_self);_self.afterHidden=new YAHOO.util.CustomEvent("afterHidden",_self);return _self;};_self.dispose=function(){YUE.removeListener(document.body,"click",_self.hiddenDirectly);YUE.removeListener(dTarget,"click",_self.showDirectly);YUE.removeListener(dCloseBtns,"click",_self.dCloseBtnsClick);YUE.removeListener(dSwitch,"mouseover",_self.dSwitchMouseover);YUE.removeListener(dContent,"mouseover",_self.dContentMouseover);YUE.removeListener(dSwitch,"mouseout",_self.dSwitchMouseout);YUE.removeListener(dContent,"mouseout",_self.dContentMouseout);if(config.needMask){dContent.parentNode.removeChild(iframeMask);}};_self.showDirectly=function(){if(config.hide){return false;}
config.onShow.apply(_self);if(config.showOrHidden&&dContent.style.display!="none"&&YUD.getStyle(dContent,"visibility")!="hidden"){canClose=false;_self.hiddenDirectly(null,true);return;}
var xy=[];if(config.needXY){xy=YUD.getXY(dTarget);dContent.style.visibility='hidden';dContent.style.display="";parsePos(config.excursion);xy[0]+=config.excursion[0];xy[1]+=config.excursion[1];dContent.style.visibility='visible';YUD.setXY(dContent,xy);}else{dContent.style.display="";}
if(config.needMask){iframeMask.style.display="";iframeMask.style.width=dContent.offsetWidth+"px";iframeMask.style.height=dContent.offsetHeight+"px";if(config.needXY){YUD.setXY(iframeMask,xy);}
iframeMask.style.visibility="visible";}
config.unShow.apply(_self);};_self.hiddenDirectly=function(ev,force){if(dContent.style.display=="none")return;config.onHidden.apply(_self);if(canClose||force){if(_self.afterHidden){_self.afterHidden.fire();}
dContent.style.display="none";if(config.needMask){iframeMask.style.display="none";}
config.unHidden.apply(_self);}};_self.getConfig=function(){return config;};var parsePos=function(aPos){if(typeof(aPos[0])=="string"){switch(aPos[0]){case'center':aPos[0]=parseInt(dTarget.offsetWidth/2,10);break;case'right':aPos[0]=(dSwitch.offsetWidth-dContent.offsetWidth);break;default:aPos[0]=0;}}
if(typeof(aPos[1])=="string"){switch(aPos[1]){case'center':aPos[1]=paseInt(dTarget.offsetHeight/2);break;case'bottom':aPos[1]=dTarget.offsetHeight;break;default:aPos[1]=0;}}
return aPos;};}
AE.namespace('widget').clickShow=ClickShow;}());;

AE.namespace('AE.run.BPBanner');AE.run.BPBanner=function(){config={wrapId:'inf-bp'};};AE.run.BPBanner.prototype={init:function(cusConfig){this.config=YL.merge(config,cusConfig||'');this.render();},getUserLang:function(){var lang='';if(window.navigator.language){lang=window.navigator.language;}else if(window.navigator.systemLanguage){lang=window.navigator.systemLanguage;}
return lang.toLowerCase();},render:function(){var userLang=this.getUserLang();var bannerImg='';if(userLang.indexOf('ru')!=-1){if(window.storeParams){bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_718x75_ru.png';}else{bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_975x75_ru.png';}}else{if(window.storeParams){bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_718x75.png';}else{bannerImg='http://img.alibaba.com/images/cms/upload/aliexpress/channel/buyerprotection/banner/bp_banner_975x75.png';}}
get(this.config.wrapId).innerHTML='<div class="bp-banner"><a href="http://www.aliexpress.com/buyerprotection/index.html" rel="nofollow"><img class="banner-img" src="'+bannerImg+'" /></a></div>';}};;

AE.namespace('AE.order.Validator');AE.order.addressForm=function(){this.config={orderForm:get('place-order-form'),editBox:get('edit-address'),listBox:get('all-address-list'),itemTitle:get('address-item-title'),nameInput:get('contact-name'),countrySelect:get('country-region'),streetInput1:get('street-address-one'),streetInput2:get('street-address-two'),cityInput:get('city'),provinceInput:get('province'),zipCodeInput:get('zip-code'),countryCodeInput:get('country-number'),cityCodeInput:get('area-number'),telInput:get('local-number'),mobileInput:get('mobile-number'),submitButton:get('btn-edit-enter'),cancelButton:get('btn-edit-cancel')};this.cache={validator:null,oldInfoBox:{}};};AE.order.addressForm.prototype={init:function(conf){this.config=YL.merge(this.config,conf||{});var config=this.config;var self=this;self.bindEvent();self.addvalidator();},getInfo:function(addressInfoBox){var config=this.config;var self=this;self.clearValidate();if(typeof addressInfoBox=='undefined'){for(name in config){if(config[name]!=null){if(config[name].nodeName=='INPUT'){config[name].value='';}}}}
var selecteds=config.orderForm.getElementsByTagName('select');for(var i=0,len=selecteds.length;i<len;i++){selecteds[i][0].selected=true;}
if(typeof addressInfoBox=='object'&&YUD.hasClass(addressInfoBox,'single-address')){function _getValue(className,type){var obj,str;obj=YUD.getElementsByClassName(className,'*',addressInfoBox)[0];if(obj){if(type&&(type=='value')){return YL.trim(obj.value);}else{return YL.trim(obj.innerHTML);}}
return'';}
config.nameInput.value=_getValue('contact-name-text');config.itemTitle.innerHTML=_getValue('contact-name-text');config.streetInput1.value=_getValue('street-address-text-one');config.streetInput2.value=_getValue('street-address-text-two');config.cityInput.value=_getValue('city-text');config.zipCodeInput.value=_getValue('zip-code-text');config.countryCodeInput.value=_getValue('country-number-text');config.cityCodeInput.value=_getValue('area-number-text');config.telInput.value=_getValue('local-number-text');config.mobileInput.value=_getValue('mobile-number-text');self.countryInit(_getValue('country-region-value','value'));self.provincInit(_getValue('province-text'));}else{self.countryInit(window.PLACEORDER.defaultCountryCode);var defaultProvinceValue=self.config.provinceInput.value||'';self.provincInit(defaultProvinceValue);}},bindEvent:function(ev){var config=this.config,self=this;if(config.cancelButton){YUE.on(config.cancelButton,'click',self.cancel,self);}
if(config.submitButton){YUE.on(config.submitButton,'click',self.submit,self);}
YUE.on(config.countrySelect,'change',self.countryChange,self);},addvalidator:function(){var config=this.config;var self=this;this.cache.validator=new AE.order.Validator();this.cache.validator.add({target:'contact-name',rule:'isRequired&&valLenth&&isHalfChar',errTip:'Please enter a Contact Name&&Please enter between 2 - 128 characters&&Please enter English only',tipEl:'add-name-error',maxLenth:128,minLenth:2,styleTarget:true}).add({target:'country-region',rule:'isRequired',errTip:'Please select a Country/Region',tipEl:'region-error',styleTarget:true}).add({target:'street-address-one',rule:'isRequired&&valLenth&&isHalfChar',errTip:'Please enter an Address&&Please enter between 1 - 256 characters&&Please enter English only',tipEl:'address-error1',maxLenth:256,styleTarget:true}).add({target:'street-address-two',rule:'valLenth&&isHalfChar',errTip:'Please enter less 256 characters&&Please enter English only',tipEl:'address-error2',maxLenth:256,styleTarget:true,required:false}).add({target:'city',rule:'isRequired&&valLenth&&isHalfChar',errTip:'Please enter a City&&Please enter between 2 - 64 characters&&Please enter English only',tipEl:'city-error',maxLenth:64,minLenth:2,styleTarget:true}).add({target:'province',rule:'isRequired&&valLenth&&isHalfChar',errTip:'Please select a State/Province/Count&&Please enter between 2 - 64 characters&&Please enter English only',tipEl:'province-error',maxLenth:64,minLenth:2,styleTarget:true}).add({target:'zip-code',rule:'isRequired&&valLenth&&isEnglishNumber',errTip:'Please enter a ZIP/Postal Code&&Please enter between 1 - 32 characters&&Please enter English and/or numbers only',tipEl:'zipcode-error',maxLenth:32,minLenth:1,styleTarget:true});YUE.on(config.countryCodeInput,'blur',self.validatorPhoneAndMobile,self);YUE.on(config.cityCodeInput,'blur',self.validatorPhoneAndMobile,self);YUE.on(config.telInput,'blur',self.validatorPhoneAndMobile,self);YUE.on(config.mobileInput,'blur',self.validatorPhoneAndMobile,self);},validatorPhoneAndMobile:function(ev,self){function showError(el,tipEl,text){tipEl.innerHTML=text;YUD.removeClass(tipEl,'success-box');YUD.addClass(tipEl,'error-box-a');YUD.addClass(el,'err-item');YUD.removeClass(tipEl,'hide');}
function hideError(el,tipEl,init){tipEl.innerHTML='';YUD.removeClass(el,'err-item');YUD.removeClass(tipEl,'error-box-a');YUD.addClass(tipEl,'hide');if(init==true){YUD.removeClass(tipEl,'hide');YUD.addClass(tipEl,'success-box');}}
var config=self.config;var tipEl1=get('tel-num-error');var tipEl2=get('mobile-num-error');var numReg=/^$|^[0-9\/\-]*$/i;var countryCodeReg=/^[0-9\/\-]{1,8}$/i;var cityCodeReg=/^[0-9\/\-]{1,8}$/i;var telReg=/^$|^[0-9\/\-]*$/;var mobileReg=/^$|^[0-9\-\s\/]*$/i;hideError(config.countryCodeInput,tipEl1);hideError(config.cityCodeInput,tipEl1);hideError(config.telInput,tipEl1);hideError(config.mobileInput,tipEl2);if(ev){var e=YUE.getEvent(ev);var target=YUE.getTarget(e);if(target==config.mobileInput){config.mobileInput.value=YL.trim(config.mobileInput.value);}
if(target==config.telInput){config.telInput.value=YL.trim(config.telInput.value);}}
if(config.telInput.value.length==0&&config.mobileInput.value.length==0){showError(config.telInput,tipEl1,'You must include a Telephone and/or Mobile number');return false;}
if(config.countryCodeInput.value.length>0||config.cityCodeInput.value.length>0||config.telInput.value.length>0){if(config.countryCodeInput.value.length>8){showError(config.countryCodeInput,tipEl1,'Please enter between 1-8 numbers.');}
if(!numReg.test(config.countryCodeInput.value)){showError(config.countryCodeInput,tipEl1,'Country Code: Please enter Numbers and/or hyphens "-" and/or forward slashes "/" only');return false;}
if(config.cityCodeInput.value.length>8){showError(config.cityCodeInput,tipEl1,'Please enter Area Code between 1-8 numbers');return false;}
if(!numReg.test(config.cityCodeInput.value)){showError(config.cityCodeInput,tipEl1,'Area Code: Please enter Numbers and/or hyphens "-" and/or forward slashes "/" only');return false;}
if(config.telInput.value.length>36){showError(config.telInput,tipEl1,'Please enter between 1-36 numbers');return false;}
if(!numReg.test(config.telInput.value)){showError(config.telInput,tipEl1,'Local Number: Please enter Numbers and/or hyphens "-" and/or forward slashes "/" only');return false;}
if(config.countryCodeInput.value.length==0){showError(config.countryCodeInput,tipEl1,'You must include a Country Code');return false;}
if(config.telInput.value.length==0){showError(config.telInput,tipEl1,'You must include a Telephone number');return false;}}
if(config.telInput.value.length>0){hideError(config.telInput,tipEl1,true);}
if(config.mobileInput.value.length>0){if(config.mobileInput.value.length<5||config.mobileInput.value.length>16){showError(config.mobileInput,tipEl2,'Please enter between 5 - 16 characters');return false;}
if(!mobileReg.test(config.mobileInput.value)){showError(config.mobileInput,tipEl2,'Mobile Number: Please enter Numbers and/or hyphens "-" and/or forward slashes "/" only');return false;}}
if(config.mobileInput.value.length>0){hideError(config.mobileInput,tipEl2,true);}},countryChange:function(ev,self){var config=self.config;var provinces=YUD.getElementsByClassName('provinceSelect','select','address-edit-box');var countryName=this.value;var options=config.countrySelect.options;if(countryName=='line'){options[0].selected=true;}
if(window.PLACEORDER.isFirst&&config.countrySelect.value!=window.PLACEORDER.selectedAddressCountryCode&&config.countrySelect.value!=''){get('place-order-action').value=window.PLACEORDER.addressManagerAction;get('place-order-method').setAttribute('name',window.PLACEORDER.addressManagerMethod);get('place-order-change-address').value='true';get('edit-address-statue').value='changeCountry';self.removeUselessInput();config.orderForm.submit();}else{var flage=false;config.provinceInput.value='';YUD.addClass(get('province-error'),'hide');for(i=0;i<provinces.length;i++){if(provinces[i].getAttribute('countryCode')==countryName){provinces[i].style.display='';for(j=0;j<provinces[i].length;j++){(provinces[i][j].value=='')?provinces[i][j].selected=true:provinces[i][j].selected=false;}
flage=true;}else{provinces[i].style.display='none';}}
if(flage){YUD.setStyle(config.provinceInput,'display','none');}else{YUD.setStyle(config.provinceInput,'display','');}}},countryInit:function(str){var cache=this.cache;var self=this;var config=this.config;var options=config.countrySelect.options;var flage=false;for(var i=0,len=options.length;i<len;i++){if(options[i].value==str){options[i].selected=true;break;}}},provincInit:function(str){var cache=this.cache;var self=this;var config=this.config;var provinces=YUD.getElementsByClassName('provinceSelect','select','address-edit-box');var countryName=config.countrySelect.value;var flage=false;var provinceflag=true;if(str!='Washington'){YUD.addClass(get('wishington-error-box'),'hide');}
for(i=0;i<provinces.length;i++){if(provinces[i].getAttribute('countryCode')==countryName){provinces[i].style.display='';for(j=0;j<provinces[i].length;j++){if(provinces[i][j].value==str){provinces[i][j].selected=true;provinceflag=false;}else{provinces[i][j].selected=false;}}
flage=true;}else{provinces[i].style.display='none';}
YUE.on(provinces[i],'change',function(ev,self){self.config.provinceInput.value=this.value;if(this.value!='Washington'){YUD.addClass(get('wishington-error-box'),'hide');}
self.cache.validator.validate({target:'province',rule:'isRequired&&isHalfChar',errTip:'Please select a province&&Please enter English only',tipEl:'province-error',styleTarget:true});},self);}
if(flage){if(provinceflag){self.config.provinceInput.value='';}else{self.config.provinceInput.value=str;}
YUD.setStyle(config.provinceInput,'display','none');}else{self.config.provinceInput.value=str;YUD.setStyle(config.provinceInput,'display','');}},removeUselessInput:function(){var pnlShipping=YUD.getElementsByClassName('pnl-shipping','div','place-order-form');var pnlShippingLen=pnlShipping.length;for(var i=0;i<pnlShippingLen;i++){pnlShipping[i].parentNode.removeChild(pnlShipping[i]);}},clearValidate:function(){var addressBox=get('address-edit-box');var inputs=addressBox.getElementsByTagName('input');for(var i=0,len=inputs.length;i<len;i++){YUD.removeClass(inputs[i],'err-item');}
var allMessages=YUD.getElementsByClassName('message-box','*',addressBox);for(var i=0,len=allMessages.length;i<len;i++){YUD.addClass(allMessages[i],'hide');}
var selects=addressBox.getElementsByTagName('select');for(var i=0,len=selects.length;i<len;i++){YUD.removeClass(selects[i],'err-item');}},validateAddress:function(){this.cache.validator.validateAll();this.validatorPhoneAndMobile(false,this);},cancel:function(ev,self){var config=self.config;get('edit-address-id').value='';get('edit-address-statue').value='info';YUD.setStyle(config.editBox,'display','none');YUD.setStyle(config.listBox,'display','block');window.scroll(0,0);YUD.addClass(get('orders-mask'),'hide');YUD.addClass(get('order-false-mask'),'hide');},submit:function(ev,self){var config=self.config;var event=YUE.getEvent(ev);var orderFormAction=config.orderForm.getAttribute('action')+'#anchor-address';config.orderForm.setAttribute('action',orderFormAction);YUE.stopEvent(event);get('place-order-action').value=window.PLACEORDER.addressManagerAction;get('place-order-method').setAttribute('name',window.PLACEORDER.addressManagerMethod);self.validateAddress.call(self);var errorMessages=YUD.getElementsByClassName('message-box','*','address-edit-box');for(var i=0,len=errorMessages.length;i<len;i++){if(YUD.hasClass(errorMessages[i],'error-box-a')){window.scroll(0,YUD.getY(errorMessages[i])-200);return false;}}
if(config.countrySelect.value!=window.PLACEORDER.selectedAddressCountryCode){get('place-order-change-address').value='true';self.removeUselessInput();config.orderForm.submit();}else{self.removeUselessInput();config.orderForm.submit();}}};;

AE.namespace('AE.run');if(!AE.run.changeShipping){AE.run.changeShipping=function(){this.config={pnlWrapId:'',selShippingClass:'',selShippingOpenClass:'',selUnavailClass:'',pnlShippingClass:'',btnCancelClass:'',btnOkClass:''};};AE.run.changeShipping.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this;var config=_self.config;var pnlWrap=get(config.pnlWrapId);var selShippings=YUD.getElementsByClassName(config.selShippingClass,'*',pnlWrap);for(var i=0;i<selShippings.length;i++){var selShipping=selShippings[i];var pnlShipping=YUD.getElementsByClassName(config.pnlShippingClass,'*',selShipping.parentNode)[0];var btnCancel=YUD.getElementsByClassName(config.btnCancelClass,'*',selShipping.parentNode)[0];var btnOk=YUD.getElementsByClassName(config.btnOkClass,'*',selShipping.parentNode)[0];_self.bindAction({sel:selShipping,pnl:pnlShipping,btnCancel:btnCancel,btnOk:btnOk,_self:_self});}},bindAction:function(args){var _self=args._self;var config=_self.config;var sel=args.sel;var pnl=args.pnl;var btnCancel=args.btnCancel;var btnOk=args.btnOk;if(YUD.hasClass(sel,config.selUnavailClass)){return;}
var dlgShipping=new AE.widget.clickShow();var excursion=['right',19];if(navigator.appName=='Microsoft Internet Explorer'&&navigator.appVersion.match(/9./i)=='9.'){var tempTargetWidth=parseFloat(YUD.getStyle(sel,'width'))+parseFloat(YUD.getStyle(sel,'padding-right'))+parseFloat(YUD.getStyle(sel,'padding-left'));var tempContentWidth=parseFloat(YUD.getStyle(pnl,'width'));excursion=[tempTargetWidth-tempContentWidth,19];}
dlgShipping.init({targetId:sel,contentId:pnl,needMask:true,showOrHidden:false,excursion:excursion,onShow:function(){YUD.addClass(sel,config.selShippingOpenClass);var productId=YUD.getAncestorByClassName(sel,'item-product').getAttribute('productid');},unHidden:function(){YUD.removeClass(sel,config.selShippingOpenClass);}});YUE.on(btnCancel,'click',function(){dlgShipping.hiddenDirectly(null,true);});YUE.on(btnOk,'click',function(){var shippingEditForm=get('shipping-edit-form');shippingEditForm.appendChild(pnl);YUD.removeClass(sel,config.selShippingOpenClass);YUD.setStyle(pnl,'display','none');var radios=YUD.getElementsBy(function(el){return el.getAttribute('type')=='radio';},'input',shippingEditForm);var shopcartIdEle=YUD.getElementsBy(function(el){return el.getAttribute('name')=='shopcartId';},'input',shippingEditForm);var shopcartId=shopcartIdEle[0].value;var oldRadioName=radios[0].getAttribute('name');var finalRadioName=(radios[0].getAttribute('name')).split('-')[0];var radiosLen=radios.length;var shippingEditFormAction=shippingEditForm.getAttribute('action')+'#anchor-'+shopcartId;for(var i=0;i<radiosLen;i++){radios[i].setAttribute('name',finalRadioName);}
shippingEditForm.setAttribute('action',shippingEditFormAction);if(get('btn-edit-enter')){shippingEditForm.submit();}else{var addressBox=get('address-edit-box');var insertWrapper=document.createElement('div');addressBox.parentNode.insertBefore(insertWrapper,addressBox);YUD.setStyle(addressBox,'display','none');shippingEditForm.appendChild(addressBox);insertWrapper.innerHTML=addressBox.innerHTML;YUD.setStyle(shippingEditForm,'display','none');shippingEditForm.submit();}});}};};

AE.namespace('AE.run');if(!AE.run.editQuantity){AE.run.editQuantity=function(){this.config={pnlWrapId:'',txtQuantityClass:'',disableInputClass:'',lblUnitClass:'',dlgEditQuantity:'',dlgEditQuantityAddId:'',dlgEditQuantityMinusId:'',txtQuantityId:'',inventoryClass:'',sourceInventoryId:'',destInventoryValueId:'',inventoryErrorClass:'',lblUnitId:'',btnOkId:'',btnOkDisabledClass:'',btnCancelId:'',productClass:'',optionClass:'',hidShopcartId:'',hidProductId:'',hidShopcartIdClass:'',maskId:''};this.temp={canClose:false,sourceInventoryValue:0};};AE.run.editQuantity.prototype={init:function(customConfig){this.config=YL.merge(this.config,customConfig||{});var _self=this;var config=_self.config;var temp=_self.temp;var pnlWrap=get(config.pnlWrapId);var triggers=YUD.getElementsByClassName(config.txtQuantityClass,'input',pnlWrap,function(){if(!YUD.hasClass(this,config.disableInputClass)){YUE.on(this,'mousedown',_self.callDialog,{_self:_self});}});var btnCancel=get(config.btnCancelId);YUE.on(btnCancel,'click',_self.hideDialog,{_self:_self});var btnOk=get(config.btnOkId);YUE.on(btnOk,'click',_self.submitEdit,{_self:_self});var txtQuantityEl=get(config.txtQuantityId);YUE.on(txtQuantityEl,'keydown',function(event){if(event.shiftKey||!((event.keyCode>=46&&event.keyCode<=57)||(event.keyCode>=96&&event.keyCode<=105)||(event.keyCode==8)||(event.keyCode==109)||(event.keyCode>=37&&event.keyCode<=40))){if(AE.bom.isIE){event.returnValue=false;}
else{event.preventDefault();}}});YUE.on(txtQuantityEl,'input',_self._onQuantityChange,{_self:_self});YUE.on(txtQuantityEl,'propertychange',_self._onQuantityChange,{_self:_self});YUE.on(txtQuantityEl,'keyup',function(event){if(event.keyCode===8){_self._onQuantityChange.call(txtQuantityEl,null,{_self:_self});}});YUE.on(config.dlgEditQuantityAddId,'click',function(ev,args){var value=txtQuantityEl.value;if(value===''){txtQuantityEl.value=1;value=0;}
var _self=args._self;txtQuantityEl.value=Math.floor(parseInt(value,10))+1;_self._onQuantityChange.call(txtQuantityEl,null,{_self:_self});},{_self:_self});YUE.on(config.dlgEditQuantityMinusId,'click',function(ev,args){var value=txtQuantityEl.value;if(value===''){txtQuantityEl.value=0;value=0;}
var _self=args._self;if(Math.floor(parseInt(value,10))===0){return;}
txtQuantityEl.value=Math.floor(parseInt(value,10))-1;_self._onQuantityChange.call(txtQuantityEl,null,{_self:_self});},{_self:_self});},_onQuantityChange:function(ev,args){var _self=args._self;var config=_self.config;var quantity=parseInt(this.value,10);var inventory=_self.temp.sourceInventoryValue;if(inventory===9999){return;}
var pnlWrap=get(config.pnlWrapId);var inventoryEls=YUD.getElementsByClassName(config.inventoryClass,'*',config.pnlWrap);var submitEl=get(config.btnOkId);if(quantity>inventory||quantity<=0||this.value===''){YUD.addClass(inventoryEls,config.inventoryErrorClass);submitEl.disabled=true;YUD.addClass(submitEl,config.btnOkDisabledClass);}else{YUD.removeClass(inventoryEls,config.inventoryErrorClass);submitEl.disabled=false;YUD.removeClass(submitEl,config.btnOkDisabledClass);}},callDialog:function(ev,args){var _self=args._self;var config=_self.config;var temp=_self.temp;temp.canClose=false;var trigger=this;var dialog=get(config.dlgEditQuantity);get(config.hidProductId).value=productId;var productNode=_self.getLatestParentByClassName(trigger,config.productClass);var productId=YUD.getElementsByClassName('ae-product-id','input',productNode)[0].value;get(config.hidProductId).value=productId;var optionNode=_self.getLatestParentByClassName(trigger,config.optionClass);var shopcartId=YUD.getElementsByClassName(config.hidShopcartIdClass,'input',optionNode)[0].value;get(config.hidShopcartId).value=shopcartId;var sourceInventoryValue=YUD.getElementsByClassName(config.sourceInventoryId,'input',optionNode)[0].value;_self.temp.sourceInventoryValue=sourceInventoryValue;get(config.destInventoryValueId).innerHTML=sourceInventoryValue;var inventoryEl=YUD.getElementsByClassName(config.inventoryClass,'div',get(config.pnlWrapId));if(sourceInventoryValue==9999){YUD.setStyle(inventoryEl,'display','none');}else{YUD.setStyle(inventoryEl,'display','block');}
var quantity=YUD.getElementsByClassName(config.txtQuantityClass,'input',optionNode)[0].value;var txtQuantity=get(config.txtQuantityId);txtQuantity.value=quantity;setTimeout(function(){txtQuantity.focus();txtQuantity.select();},200);var unit=YUD.getElementsByClassName(config.lblUnitClass,'*',optionNode)[0].innerHTML;var lblUnit=get(config.lblUnitId);lblUnit.innerHTML=unit;YUE.on(document.body,'click',_self.hideDialogByClickBody,{_self:_self});var position=_self.getCumulativeOffset(trigger);var left=parseInt(position.left-get(config.pnlWrapId).offsetLeft-24);var top=parseInt(position.top-get(config.pnlWrapId).offsetTop-7);if(AE.bom.isIE){left+=1;top+=1;}
dialog.style.left=left+'px';dialog.style.top=top+'px';dialog.style.display='block';_self._onQuantityChange(null,{_self:_self});},hideDialogByClickBody:function(ev,args){var _self=args._self;var config=_self.config;var temp=_self.temp;var dialog=get(config.dlgEditQuantity);YUE.on(dialog,'mouseover',function(){temp.canClose=false;});YUE.on(dialog,'mousemove',function(){temp.canClose=false;});YUE.on(dialog,'mouseout',function(){temp.canClose=true;});if(temp.canClose){_self.hideDialog(ev,{_self:_self});}},hideDialog:function(ev,args){var _self=args._self;var config=_self.config;var temp=_self.temp;var dialog=get(config.dlgEditQuantity);dialog.style.display='none';},submitEdit:function(ev,args){var _self=args._self;var config=_self.config;var trigger=args.trigger;var shopcartId=get('hid-shopcart-id-quantity').value;var editQuantityForm=get(config.dlgEditQuantity);var editQuantityFormAction=editQuantityForm.getAttribute('action')+'#anchor-'+shopcartId;editQuantityForm.setAttribute('action',editQuantityFormAction);if(get('btn-edit-enter')){editQuantityForm.submit();}else{var addressBox=get('address-edit-box');var insertWrapper=document.createElement('div');addressBox.parentNode.insertBefore(insertWrapper,addressBox);YUD.setStyle(addressBox,'display','none');editQuantityForm.appendChild(addressBox);insertWrapper.innerHTML=addressBox.innerHTML;editQuantityForm.appendChild(addressBox);editQuantityForm.submit();}},getCumulativeOffset:function(element){var offset={left:0,top:0};do{offset.left+=element.offsetLeft||0;offset.top+=element.offsetTop||0;element=element.offsetParent;}while(element);return offset;},getLatestParentByClassName:function(element,className){var parent=element.parentNode;if(!parent.className||!YUD.hasClass(parent,className)){return this.getLatestParentByClassName(parent,className);}
return parent;}};};

YUE.onDOMReady(function(){var washingtonErrorBox=get('wishington-error-box');if(!window.PLACEORDER){return;}
var placeOrderForm=get('place-order-form');var captchaImage=get('captcha-image');if(captchaImage){var captchaFulsh=function(ev){tempSrc=captchaImage.src,tempSrc=tempSrc.indexOf('&t=')>0?tempSrc.substring(0,tempSrc.indexOf('&t=')):tempSrc;captchaImage.src=tempSrc+'&t='+Math.random();};YUE.on(captchaImage,'click',captchaFulsh);YUE.on('flush-catpcha-image','click',captchaFulsh);}
var captchaInput=get('captcha-input');var checkCaptcha=function(ev){var errorMessage=get('captcha-input-message');if(errorMessage){var reg=/^[0-9a-zA-Z]{4}$/i;if(reg.test(captchaInput.value)){errorMessage.innerHTML='';YUD.removeClass(captchaInput,'err-item');YUD.removeClass(errorMessage,'error-box-a');YUD.addClass(errorMessage,'hide');return true;}else{errorMessage.innerHTML='Please enter letters/numbers.';if(YUD.hasClass(errorMessage,'hide')){YUD.removeClass(errorMessage,'hide');}
YUD.addClass(errorMessage,'error-box-a');YUD.addClass(captchaInput,'err-item');return false;}}}
if(captchaInput){YUE.on(captchaInput,'blur',checkCaptcha);}
var orderMask=get('orders-mask');var orderFalseMask=get('order-false-mask');var addressForm=new AE.order.addressForm();addressForm.init();if(window.PLACEORDER.isFirst){addressForm.getInfo(true);}
var couponManage=new AE.order.CouponManage();couponManage.init();var messageTextareas=YUD.getElementsByClassName('message-text','textarea','orders-main');for(var i=0,len=messageTextareas.length;i<len;i++){messageTextareas[i].value='You can leave a message for the seller.';}
YUE.on(messageTextareas,'focus',function(ev){if(this.value=='You can leave a message for the seller.'){this.value='';}
YUD.removeClass(this,'no-hit');});YUE.on(messageTextareas,'blur',function(ev){var reg=/<(\/\s*)?((\w+:)?\w+)(\w+(\s*=\s*((["'])(\\["'tbnr]|[^\7])*?\7|\w+)|.{0})|\s)*?(\/\s*)?>/i;var isEnglish=/^[\x00-\x7F]*$/i;this.value=YL.trim(this.value);var messageBox=YUD.getElementsByClassName('message-text-tip','p',YUD.getAncestorByClassName(this,'p-message'))[0];if(this.value.length>0){if(this.value.length>1500||reg.test(this.value)||!isEnglish.test(this.value)){messageBox.innerHTML='Max. 1,500 English characters or Arabic numerals only. No HTML codes allowed.';YUD.addClass(messageBox,'message-box');YUD.addClass(messageBox,'warn-box2');YUD.addClass(messageBox,'error-box-b');YUD.removeClass(messageBox,'hide');return false;}else{YUD.removeClass(messageBox,'message-box');YUD.removeClass(messageBox,'warn-box2');YUD.removeClass(messageBox,'error-box-b');}}else{YUD.removeClass(messageBox,'message-box');YUD.removeClass(messageBox,'warn-box2');YUD.removeClass(messageBox,'error-box-b');this.value='You can leave a message for the seller.';}
YUD.addClass(this,'no-hit');});var placeOrderSubmit=get('place-order-btn');YUE.on(placeOrderSubmit,'click',function(ev){var e=YUE.getEvent(ev);YUE.stopEvent(e);if(captchaInput){checkCaptcha();}
var flage=true;if(window.PLACEORDER.isFirst){var provinceInput=get('province');if(provinceInput&&provinceInput.value=='Washington'){YUD.removeClass(washingtonErrorBox,'hide');window.scroll(0,YUD.getY(washingtonErrorBox[i])-200);flage=false;}else{YUD.addClass(washingtonErrorBox,'hide');}}else{var provinceTexts=YUD.getElementsByClassName('province-text','*','order-address-list');if(provinceTexts&&provinceTexts[0]){var province=YL.trim(provinceTexts[0].innerHTML);if(province=='Washington'){YUD.removeClass(washingtonErrorBox,'hide');window.scroll(0,YUD.getY(washingtonErrorBox[i])-200);flage=false;}else{YUD.addClass(washingtonErrorBox,'hide');}}}
var errorMessages=YUD.getElementsByClassName('message-box','*',placeOrderForm);if(window.PLACEORDER.isFirst){addressForm.validateAddress();}
for(var i=0,len=errorMessages.length;i<len;i++){if(YUD.hasClass(errorMessages[i],'error-box-a')||YUD.hasClass(errorMessages[i],'error-box-b')){if(!YUD.hasClass(errorMessages[i],'hide')&&!YUD.hasClass(errorMessages[i],'order-error-message')){window.scroll(0,YUD.getY(errorMessages[i])-200);flage=false;break;}}}
if(flage){for(var i=0,len=messageTextareas.length;i<len;i++){if(messageTextareas[i].value=='You can leave a message for the seller.'){messageTextareas[i].value='';}}
var cookieId=YUD.getCookie('ali_apache_id')||'',memberId=AE.app.cookieInfo?AE.app.cookieInfo.memberSeq:'',userId='',isMember=false;if(memberId!=''){isMember=true;userId=memberId;}else{userId=cookieId;}
var productsIdArr=[];var productsIdInputs=YUD.getElementsByClassName('ae-product-id','*','page');for(var i=0,len=productsIdInputs.length;i<len;i++){productsIdArr.push(productsIdInputs[i].value);}
var params={ae_project_id:'21200',ae_page_type:'confirm_order',ae_button_type:'place_order',ae_object_type:'product',ae_object_value:productsIdArr.toString(),ae_ismember:isMember,ae_user_id:userId};if(typeof dmtrack!='undefined'){dmtrack.clickstat('http://stat.alibaba.com/ae/aliexpress_button_click.html',params);}
get('place-order-action').value=window.PLACEORDER.orderAction;get('place-order-method').name=window.PLACEORDER.orderMethod;var pnlShipping=YUD.getElementsByClassName('pnl-shipping','div',placeOrderForm);var pnlShippingLen=pnlShipping.length;for(var i=0;i<pnlShippingLen;i++){pnlShipping[i].parentNode.removeChild(pnlShipping[i]);}
placeOrderForm.getAttribute('action',placeOrderForm.getAttribute('action')+'anchor-code');placeOrderForm.submit();}});var addressListBox=get('all-address-list');if(addressListBox==null){return;}
var provinceTexts=YUD.getElementsByClassName('province-text','*','order-address-list');if(provinceTexts&&provinceTexts[0]){var province=YL.trim(provinceTexts[0].innerHTML);if(province=='Washington'){YUD.removeClass(washingtonErrorBox,'hide');}}
var editAddress=get('edit-address');var addressList=addressListBox.getElementsByTagName('li');var addressTab=get('lnk-address-tab');var lnkEdits=YUD.getElementsByClassName('lnk-edit','a',addressListBox);var buyNameSidebar=get('buyer-name-sidebar');YUE.on(addressTab,'click',function(ev){if(YUD.hasClass(this,'hide-list')){YUD.removeClass(this,'hide-list');for(var i=0,len=addressList.length;i<len;i++){if(i!==0){YUD.addClass(addressList[i],'hide');}}}else{YUD.addClass(this,'hide-list');for(var i=0,len=addressList.length;i<len;i++){YUD.removeClass(addressList[i],'hide');}}});YUE.on(addressList,'mouseover',function(ev,addressList){var _self=this;for(var i=0,len=addressList.length;i<len;i++){YUD.removeClass(addressList[i],'order-address-hover');}
if(YUD.hasClass(_self,'order-address-selected')){return;}
YUD.addClass(this,'order-address-hover');},addressList);var editBtnList=YUD.getElementsByClassName('lnk-edit','a',addressListBox);YUE.on(addressListBox,'click',function(ev){var e=YUE.getEvent(ev);var target=YUE.getTarget(e);if(YUD.hasClass(target,'lnk-edit')){var addressInfoBox=YUD.getAncestorByClassName(target,'single-address');var addressItemId=YUD.getElementsByClassName('address-item-id','input',addressInfoBox)[0];get('edit-address-id').value=addressItemId?addressItemId.value:'';get('edit-address-statue').value='update';get('edit-address-title').innerHTML='Please revise the shipping address. Don\'t forget to save!';addressForm.getInfo(addressInfoBox);YUD.removeClass(buyNameSidebar,'hide');YUD.addClass(addressInfoBox,'order-address-selected');for(var i=0,len=addressList.length;i<len;i++){if(i!==0){YUD.addClass(addressList[i],'hide');YUD.removeClass(addressList[i],'order-address-selected');}}
YUD.removeClass(addressTab,'hide-list');YUD.setStyle(addressListBox,'display','none');YUD.setStyle(editAddress,'display','block');window.scroll(0,YUD.getY(editAddress)-100);YUD.removeClass(orderMask,'hide');YUD.removeClass(orderFalseMask,'hide');}else if(YUD.hasClass(target,'order-address-name')||YUD.hasClass(target,'rdo-address')||YUD.hasClass(target,'contact-name-text')){var addressInfoBox=YUD.getAncestorByClassName(target,'single-address');var contryCurrent=YUD.getElementsByClassName('country-region-value','input',addressInfoBox)[0];var radio=YUD.getElementsByClassName('rdo-address','input',addressInfoBox)[0];radio.checked=true;get('place-order-action').value=window.PLACEORDER.addressManagerAction;get('place-order-method').setAttribute('name',window.PLACEORDER.addressManagerMethod);get('place-order-change-address').value='true';placeOrderForm.submit();}});var newAddressBtn=get('lnk-add-new-address');YUE.on(newAddressBtn,'click',function(){addressForm.getInfo();get('edit-address-statue').value='save';get('edit-address-title').innerHTML='Please enter a new shipping address. Don\'t forget to save!';YUD.setStyle(addressListBox,'display','none');YUD.setStyle(editAddress,'display','block');window.scroll(0,YUD.getY(editAddress)-100);YUD.addClass(buyNameSidebar,'hide');YUD.removeClass(orderMask,'hide');YUD.removeClass(orderFalseMask,'hide');});var useCouponBtns=YUD.getElementsByClassName('use-coupon-btn','a','orders-main');YUE.on(useCouponBtns,'click',function(){var cookieId=YUD.getCookie('ali_apache_id')||'',memberId=AE.app.cookieInfo?AE.app.cookieInfo.memberSeq:'',userId='',isMember=false;if(memberId!=''){isMember=true;userId=memberId;}else{userId=cookieId;}
var productsIdArr=[];var productsIdInputs=YUD.getElementsByClassName('ae-product-id','*','page');for(var i=0,len=productsIdInputs.length;i<len;i++){productsIdArr.push(productsIdInputs[i].value);}
var params={ae_project_id:'21200',ae_page_type:'confirm_order',ae_button_type:'use_coupon',ae_object_type:'product',ae_object_value:productsIdArr.toString(),ae_ismember:isMember,ae_user_id:userId};if(typeof dmtrack!='undefined'){dmtrack.clickstat('http://stat.alibaba.com/ae/aliexpress_button_click.html',params);}});try{(new AE.run.editQuantity()).init({pnlWrapId:'page',txtQuantityClass:'product-quantity-input',disableInputClass:'product-unavialable',lblUnitClass:'lbl-unit',dlgEditQuantity:'dlg-edit-quantity',dlgEditQuantityAddId:'quantity-add',dlgEditQuantityMinusId:'quantity-minus',txtQuantityId:'txt-editable-quantity',inventoryClass:'inventory-wrapper',sourceInventoryId:'hid-inventory',destInventoryValueId:'inventory-value',inventoryErrorClass:'inventory-error',lblUnitClass:'txt-unit-quantity',lblUnitId:'dlg-unit-quantity',btnOkId:'btn-ok-quantity',btnOkDisabledClass:'btn-ok-quantity-disabled',btnCancelId:'btn-cancel-quantity',productClass:'item-details-list',optionClass:'p-price',hidShopcartId:'hid-shopcart-id-quantity',hidProductId:'hid-product-id-quantity',hidShopcartIdClass:'hid-shopcart-id',maskId:'mask-iframe'});}catch(e){}
try{(new AE.run.changeShipping()).init({pnlWrapId:'orders-main',selShippingClass:'product-shipping-select',selShippingOpenClass:'product-shipping-select-open',selUnavailClass:'product-unavialable',pnlShippingClass:'pnl-shipping',btnCancelClass:'btn-cancel',btnOkClass:'btn-ok'});}catch(e){}
if(get('inf-bp')&&AE.run.BPBanner){(new AE.run.BPBanner()).init({wrapId:'inf-bp'});}});YUE.onDOMReady(function(){var logoWrap=YUD.getElementsByClassName('ali-logo','div','header-inner');if(logoWrap.length>0){var logoLink=logoWrap[0].getElementsByTagName('a');logoLink[0].href='http://www.aliexpress.com';}
var helpWrap=YUD.getElementsByClassName('help','li','header-inner');if(helpWrap.length>0){var helpLink=helpWrap[0].getElementsByTagName('a');helpLink[0].href='http://www.aliexpress.com/help/contactus.htm';}});;

function getPrice(str){return str.replace(/.*US\s*\$/g,'').replace(',','');}
function convertPrice(str){if(/[^0-9\.]/.test(str)){return'';}
str=str.replace(/^(\d*)$/,'$1.');str=(str+'00').replace(/(\d*\.\d\d)\d*/,'$1');str=str.replace('.',',');var re=/(\d)(\d{3},)/;while(re.test(str)){str=str.replace(re,'$1,$2');}
str=str.replace(/,(\d\d)$/,'.$1');return str.replace(/^\./,'0.');}
AE.namespace('AE.order.CouponManage');AE.namespace('AE.order.CouponAjax');AE.order.CouponAjax=(function(){var head=document.getElementsByTagName('head')[0];var script=null;window.COUPON_JSONP_TEXT=null;return{getJSONP:function(url,callback,obj){script=document.createElement('script');script.type='text/javascript';script.async='async';var fn=function(){if(typeof obj!='undefined'){callback.call(obj);}else{callback();}
window.COUPON_JSONP_TEXT=null;head.removeChild(script);};if(script.addEventListener){script.addEventListener('load',fn,false);}else if(script.attachEvent){script.attachEvent('onreadystatechange',function(){var target=window.event.srcElement;if(target.readyState=='loaded'){fn();}});}else{script['onload']=fn;}
script.setAttribute('src',url);head.appendChild(script);}};})();AE.namespace('AE.order.couponDAO');AE.order.couponDAO=(function(){var coupons=[];var usedCoupons=[];var couponCodes=[];var delCouponCodes=[];var hasAjax=false;return{resetCoupons:function(callback,obj){coupons=[];usedCoupons=[];couponCodes=[];delCouponCodes=[];var url=window.PLACEORDER.couponServer+'/coupon/ajax/ajax_get_coupon_for_orders.htm'+'?t='+Math.random();AE.order.CouponAjax.getJSONP(url,function(r){if(window.COUPON_JSONP_TEXT){if(window.COUPON_JSONP_TEXT.isLoginOut&&String(window.COUPON_JSONP_TEXT.isLoginOut)==='true'){window.location.href="https://login.aliexpress.com/?return_url="+encodeURIComponent(window.location.href);return false;}else{coupons=window.COUPON_JSONP_TEXT.availableCouponJsonArray;}}else{coupons=[];}
callback.call(obj);});return true;},getCoupons:function(price){if(typeof price=='undefined'){price=0;}
var canCoupons=[];for(var i=0,len=coupons.length;i<len;i++){if(Number(price)>=Number(coupons[i].orderAmountLimit)){canCoupons.push(coupons[i]);}}
return canCoupons;},useCoupon:function(id){var couponValue;for(var i=0,len=coupons.length;i<len;i++){if(id==coupons[i].couponId){usedCoupons.push(coupons[i]);couponValue=coupons[i].couponDenomination;coupons.splice(i,1);break;}}
return couponValue;},changeCoupon:function(id){var statue=false;var index=0;for(var i=0,len=usedCoupons.length;i<len;i++){if(id==usedCoupons[i].couponId){index=i;statue=true;break;}}
coupons.unshift(usedCoupons[index]);usedCoupons.splice(index,1);return statue;},useCouponCode:function(couponCode){for(var i=0,len=couponCodes.length;i<len;i++){if(couponCode.promCode==couponCodes[i].promCode){return false;}}
couponCodes.push(couponCode);return true;},delCouponCode:function(promCode){var index=0;for(var i=0,len=couponCodes.length;i<len;i++){if(promCode==couponCodes[i].promCode){index=i;}}
delCouponCodes.push(couponCodes[index]);couponCodes.splice(index,1);return true;},reductionCodes:function(promCode){for(var i=0,len=delCouponCodes.length;i<len;i++){if(promCode==delCouponCodes[i].promCode){couponCodes.push(delCouponCodes[i]);delCouponCodes.splice(i,1);break;}}
return true;},clearCouponCodes:function(promCode){for(var i=0,len=delCouponCodes.length;i<len;i++){if(promCode==delCouponCodes[i].promCode){delCouponCodes.splice(i,1);break;}}
return true;}};})();AE.order.CouponManage=function(){this.config={targetBox:get('orders-main'),useBtnClass:'use-coupon-btn',useBoxClass:'use-coupon-box',changeBtnClass:'change-coupon-btn',changeBoxClass:'change-coupon-box',dialogBox:get('coupon-wrapper'),couponList:get('coupon-list'),closeBtn:get('close-coupon'),cancelBtn:get('cancel-coupon'),continueBtn:get('containue-coupon'),hackMask:get('order-full-mask'),couponCodeInput:get('use-coupon-code-text')};this.cache={useBtns:[],changeBtns:[],firstLoad:true,targetIdInput:null,slideBox:null,couponId:'',couponCode:'',targetCouponBox:null,orderPrice:null,changeStatue:false};};AE.order.CouponManage.prototype={init:function(conf){var self=this;var cache=this.cache;this.config=YL.merge(this.config,conf||{});var config=this.config;if(config.targetBox==null||config.dialogBox==null){return;}
cache.useBtns=YUD.getElementsByClassName(config.useBtnClass,'a',config.targetBox);cache.changeBtns=YUD.getElementsByClassName(config.changeBtnClass,'a',config.targetBox);cache.slideBox=new AE.app.Slidebox();self.bindEvent();},showDialog:function(){var self=this;var cache=this.cache;var config=this.config;var orderPriceInput=YUD.getElementsByClassName('son-order-price','input',self.cache.targetCouponBox);if(orderPriceInput&&orderPriceInput[0]){cache.orderPrice=orderPriceInput[0].value;}else{cache.orderPrice='0';}
self.resetDialog();var listHtml=self.createCouponList();if(listHtml===''){config.couponList.innerHTML='<li>no coupon</li>';YUD.setStyle(get('coupon-list-wrapper'),'display','none');get('use-coupon-code-radio').checked=true;}else{config.couponList.innerHTML=listHtml;if(!cache.firstLoad){cache.slideBox.gotoFirstPage();}
YUD.setStyle(get('coupon-list-wrapper'),'display','block');get('use-coupon-radio').checked=true;}
YUD.setStyle(this.config.dialogBox,'display','block');YUD.setStyle(this.config.hackMask,'display','block');var styleTop=(document.documentElement.clientHeight-this.config.dialogBox.offsetHeight)/2;if(AE.bom.isIE6||AE.bom.isIE7){styleTop=styleTop+YUD.getDocumentScrollTop();}
YUD.setStyle(this.config.dialogBox,'top',styleTop+'px');YUD.setStyle(this.config.dialogBox,'left',parseInt((document.body.clientWidth-this.config.dialogBox.offsetWidth)/2,10)+'px');},hideDialog:function(self){var orderTable=YUD.getAncestorByClassName(self.cache.targetCouponBox,'order-table');self.correctPrice(orderTable);YUD.setStyle(this.config.dialogBox,'display','none');YUD.setStyle(this.config.hackMask,'display','none');},createCouponList:function(){var self=this;var cache=this.cache;var config=this.config;var couponData=AE.order.couponDAO.getCoupons(cache.orderPrice);var htmlStr='';var len=couponData.length;if(len>0){for(var i=0;i<len;i++){var html='<li>';var selected,paymethodLimit;if(i===0){selected='select';cache.couponId=couponData[0].couponId;}else{selected='';}
if(couponData[i].paymethodLimit==='MasterCard'){paymethodLimit='coupon-mc';}else{paymethodLimit='';}
if(couponData[i].couponCurrency==='MasterCard'){couponCurrency='coupon-mc';}else{couponCurrency='';}
var denHTML;var limitHTML;var denArr=couponData[i].couponDenomination.toString().split('.');if(denArr&&denArr[0]){if(denArr[1]&&denArr[1]!='00'){denHTML='<span class="coupon-item-price">'+'$'+denArr[0]+'.'+'</span>'+'<span class="coupon-item-decimals">'+denArr[1]+'</span>';}else{denHTML='<span class="coupon-item-price">'+'$'+denArr[0]+'</span>';}}else{denHTML='<span class="coupon-item-price">'+'$'+couponData[i].couponDenomination+'</span>';}
var limitArr=couponData[i].orderAmountLimit.toString().split('.');if(limitArr&&limitArr[0]){if(limitArr[1]&&limitArr[1]!='00'){limitHTML='<span class="coupon-item-price">'+'$'+limitArr[0]+'.'+'</span>'+'<span class="coupon-item-decimals">'+limitArr[1]+'</span>';}else{limitHTML='<span class="coupon-item-price">'+'$'+limitArr[0]+'</span>';}}else{limitHTML='<span class="coupon-item-price">'+'$'+couponData[i].orderAmountLimit+'</span>';}
html+='<div class="coupon-item '+selected+'" alt="'+couponData[i].couponId+'">'+'<div class="coupon-item-info clearfix">'+'<div class="denomination-box">'+
denHTML+'</div>'+'<div class="coupon-item-off">off</div>'+'<div class="amouunt-limit-box">'+
limitHTML+'</div>'+'</div>'+'<div class="coupon-item-valid-time">'+'Valid for '+couponData[i].couponValidTime+'</div>'+'<div class="coupon-item-currency '+paymethodLimit+'">'+'</div>'+'</div>';html+='</li>';htmlStr+=html;}}
return htmlStr;},firstLoad:function(){var self=this;var cache=this.cache;var config=this.config;self.showDialog.call(self);cache.firstLoad=false;cache.slideBox.init({slideboxId:'coupon-list-box',containerClassName:'coupon-list-container',prevClassName:'lnk-prev',nextClassName:'lnk-next',prevDisabledClassName:'lnk-prev-disabled',nextDisabledClassName:'lnk-next-disabled',slideCount:3,time:200});},useCoupon:function(ev,self){self.cache.targetCouponBox=YUD.getAncestorByClassName(this,'order-price');get('use-coupon-code-text').value='';if(self.cache.firstLoad){AE.order.couponDAO.resetCoupons(self.firstLoad,self);}else{self.showDialog.call(self);}},changeCoupon:function(ev,self){self.cache.targetCouponBox=YUD.getAncestorByClassName(this,'order-price');var couponIdInput=YUD.getElementsByClassName('coupon-id-input','*',self.cache.targetCouponBox)[0];var couponCodeInput=YUD.getElementsByClassName('coupon-code-input','*',self.cache.targetCouponBox)[0];self.cache.changeStatue=true;if(couponIdInput.value!==''){var statue=AE.order.couponDAO.changeCoupon(couponIdInput.value);if(statue){self.showDialog.call(self);}}else{self.cache.couponCode=couponCodeInput.value||'';get('use-coupon-code-radio').checked=true;self.config.couponCodeInput.value=self.cache.couponCode;if(self.cache.couponCode!==''){AE.order.couponDAO.delCouponCode(self.config.couponCodeInput.value);}
self.showDialog.call(self);}},couponSelect:function(ev,self){var config=self.config;var cache=self.cache;var e=YUE.getEvent(ev);var target=YUE.getTarget(e);var couponItem=null;if(YUD.hasClass(target,'coupon-item')){couponItem=target;}else{couponItem=YUD.getAncestorByClassName(target,'coupon-item');}
if(couponItem){get('use-coupon-radio').checked=true;var coupons=YUD.getElementsByClassName('coupon-item','*',config.couponList);for(var i=0,len=coupons.length;i<len;i++){YUD.removeClass(coupons[i],'select');}
var selectCoupon;if(YUD.hasClass(couponItem,'coupon-item')){selectCoupon=couponItem;}else{selectCoupon=YUD.getAncestorByClassName(couponItem,'coupon-item');}
YUD.addClass(selectCoupon,'select');cache.couponId=selectCoupon.getAttribute('alt');}},couponContinue:function(ev,self){var useCouponBox=YUD.getElementsByClassName('use-coupon-box','*',self.cache.targetCouponBox)[0];var changeCouponBox=YUD.getElementsByClassName('change-coupon-box','*',self.cache.targetCouponBox)[0];var couponValueText=YUD.getElementsByClassName('coupon-price','*',self.cache.targetCouponBox)[0];var couponIdInput=YUD.getElementsByClassName('coupon-id-input','*',self.cache.targetCouponBox)[0];var couponCodeInput=YUD.getElementsByClassName('coupon-code-input','*',self.cache.targetCouponBox)[0];var couponErrorMessage=YUD.getElementsByClassName('used-coupon-warn','p',self.cache.targetCouponBox)[0];YUD.addClass(couponErrorMessage,'hide');var orderTable=YUD.getAncestorByClassName(couponValueText,'order-table');var couponDenomination;if(typeof couponValueText!='undefined'){if(get('use-coupon-radio').checked){couponDenomination=AE.order.couponDAO.useCoupon(self.cache.couponId);if(couponDenomination!='undefined'){couponIdInput.value=self.cache.couponId;couponCodeInput.value='';couponValueText.innerHTML='- US $'+Number(couponDenomination).toFixed(2);YUD.addClass(useCouponBox,'hide');YUD.removeClass(changeCouponBox,'hide');self.hideDialog(self);}}else if(get('use-coupon-code-radio').checked){var couponCodeValue=get('use-coupon-code-text').value.toLowerCase();var orderPrice=self.cache.orderPrice;if(/\w+/.test(couponCodeValue)){var url=window.PLACEORDER.couponServer+'/coupon/ajax/ajax_check_code_for_order.htm?prom_code='+couponCodeValue+'&order_amount='+orderPrice+'&t='+Math.random();AE.order.CouponAjax.getJSONP(url,function(){var couponObj=window.COUPON_JSONP_TEXT;if(couponObj.isLoginOut&&String(couponObj.isLoginOut)==='true'){window.location.href="https://login.aliexpress.com/?return_url="+encodeURIComponent(window.location.href);return;}
if(AE.order.couponDAO.useCouponCode(couponObj)){var errorMsg=parseInt(couponObj.errMsg,10);if(errorMsg===0){couponIdInput.value='';couponCodeInput.value=couponObj.promCode;couponValueText.innerHTML='- US $'+Number(couponObj.couponDenomination).toFixed(2);YUD.addClass(useCouponBox,'hide');YUD.removeClass(changeCouponBox,'hide');self.hideDialog(self);}else if(errorMsg==1){self.showCodeError('Coupon Code you entered does not exist.');AE.order.couponDAO.delCouponCode(couponObj.promCode);}else if(errorMsg==2){self.showCodeError('The Coupon selected has expired.');AE.order.couponDAO.delCouponCode(couponObj.promCode);}else if(errorMsg==3){self.showCodeError('This Coupon Code can only be used for orders larger than US $'+couponObj.amountLimit+'.');AE.order.couponDAO.delCouponCode(couponObj.promCode);}else{AE.order.couponDAO.delCouponCode(couponObj.promCode);}}else{self.showCodeError('The same Coupon Code can only be used once.');}});}else{self.showCodeError('Coupon code should be characters within the scope of 0-9 & a-z.');}}else{if(self.cache.changeStatue){if(self.cache.couponCode!==''){AE.order.couponDAO.clearCouponCodes(self.cache.couponCode);}}
couponIdInput.value='';couponCodeInput.value='';self.cache.changeStatue=false;self.cache.couponCode='';self.cache.couponId='';couponValueText.innerHTML='- US $'+0;YUD.removeClass(useCouponBox,'hide');YUD.addClass(changeCouponBox,'hide');self.hideDialog(self);}}},correctPrice:function(orderTable){var wholePriceText=YUD.getElementsByClassName('whole-price','*',orderTable)[0];var sonOrderPrices=YUD.getElementsByClassName('son-order-price','*',orderTable);var couponPrices=YUD.getElementsByClassName('coupon-price','*',orderTable);var allPriceErrorBox=get('place-order-num-error');var orderPrice=0;var orderCouponPrice=0;for(var i=0,len=couponPrices.length;i<len;i++){orderPrice+=Number(sonOrderPrices[i].value);var couponprice=getPrice(couponPrices[i].innerHTML);if(couponprice>0){orderCouponPrice+=Number(couponprice);}}
wholePriceText.innerHTML='US $'+convertPrice((orderPrice-orderCouponPrice).toFixed(2));var wholePricesTexts=YUD.getElementsByClassName('whole-price');var allPrice=0;for(var i=0,len=wholePricesTexts.length;i<len;i++){allPrice+=Number(getPrice(wholePricesTexts[i].innerHTML));}
allPrice=allPrice.toFixed(2);if(allPrice>10000){allPriceErrorBox.innerHTML='Sorry, orders of more than US $10,000 are not allowed. We suggest you split the order into smaller segments.';YUD.removeClass(allPriceErrorBox,'hide');YUD.addClass(allPriceErrorBox,'error-box-b');}else if(allPrice<=0){allPriceErrorBox.innerHTML='Sorry, orders of US $0 are not allowed. ';YUD.removeClass(allPriceErrorBox,'hide');YUD.addClass(allPriceErrorBox,'error-box-b');}else{allPriceErrorBox.innerHTML='';YUD.removeClass(allPriceErrorBox,'error-box-b');YUD.addClass(allPriceErrorBox,'hide');}
get('all-totalfee').innerHTML='US $'+convertPrice(allPrice);},showCodeError:function(str){get('coupon-code-error').innerHTML=str;YUD.setStyle(get('coupon-code-error'),'display','inline-block');},resetDialog:function(){YUD.setStyle(get('coupon-code-error'),'display','none');},cancelCoupon:function(ev,self){if(self.cache.changeStatue){if(self.cache.couponId!==''){AE.order.couponDAO.useCoupon(self.cache.couponId);}
if(self.cache.couponCode!==''){AE.order.couponDAO.reductionCodes(self.cache.couponCode);}}
self.cache.changeStatue=false;self.cache.couponCode='';self.cache.couponId='';self.hideDialog(self);},bindEvent:function(){var self=this;var cache=this.cache;var config=this.config;YUE.on(cache.useBtns,'click',self.useCoupon,self);YUE.on(cache.changeBtns,'click',self.changeCoupon,self);YUE.on(config.couponList,'click',self.couponSelect,self);YUE.on(config.continueBtn,'click',self.couponContinue,self);YUE.on(config.closeBtn,'click',self.cancelCoupon,self);YUE.on(config.cancelBtn,'click',self.cancelCoupon,self);YUE.on(config.couponCodeInput,'focus',function(ev,self){get('use-coupon-code-radio').checked=true;},self);}};;

pageTiming=function(){this.param=null;this.config={rate:0.01,filterRegular:'googlebot|bingbot|yahoo|baidu',excludedBrowserRegular:'MSIE 5|MSIE 6|MSIE 7',receiverUrl:'stat.gmonitor.aliimg.com/stat.htm',defaultResponseStartTime:150};this.context={isSupportHtml5Timing:false,responseStartTimestamp:0,documentCompleteTimestamp:0,fullyLoadedTimestamp:0};};pageTiming.prototype={init:function(config){this.config=config||this.config;var _self=this;if(!_self._validate()||!_self._filter()||!_self._lottery(_self.config.rate)){return;}
this.param=PAGE_TIMING;this.context.isSupportHtml5Timing=_self._markResponseStart();if(/MSIE\s6|MSIE\s7|MSIE\s8/i.test(navigator.userAgent)){document.write('<script id="__page_timing_document_complete" defer src="javascript:void(0);"></script>');var script=document.getElementById("__page_timing_document_complete");script.onreadystatechange=function(){if(this.readyState==='complete'){_self._markDocumentComplete();}}}else if(document.addEventListener){document.addEventListener('DOMContentLoaded',function(){_self._markDocumentComplete();},false);}else if(document.attachEvent){document.attachEvent('onDOMContentLoaded',function(){_self._markDocumentComplete();});}
if(document.addEventListener){window.addEventListener('load',function(){_self._markFullyLoaded();if(_self._getPageType()==='detail'&&/(www.aliexpress.com\/wholesale\?SearchText=.*)|(www.aliexpress.com\/wholesale\/wholesale\-.*)/i.test(document.referrer)){_self._send('list-to-detail');}else{_self._send();}},false);}else if(document.attachEvent){window.attachEvent('onload',function(){_self._markFullyLoaded();if(_self._getPageType()==='detail'&&/(www.aliexpress.com\/wholesale\?SearchText=.*)|(www.aliexpress.com\/wholesale\/wholesale\-.*)/i.test(document.referrer)){_self._send('list-to-detail');}else{_self._send();}});}},_markResponseStart:function(){if(!window.performance||!window.performance.timing){return false;}
var rst=window.performance.timing.responseStart;if(!rst){return false;}
this.context.responseStartTimestamp=rst;return true;},_markDocumentComplete:function(){this.context.documentCompleteTimestamp=new Date().getTime();return true;},_markFullyLoaded:function(){this.context.fullyLoadedTimestamp=new Date().getTime();return true;},_send:function(pageType){var data={srt:this._getStartRenderTiming(),fst:this._getFirstPageTiming(),dct:this._getDocumentCompleteTiming(),flt:this._getFullyLoadedTiming(),flv:this._getFlashVersion(),url:this._getPageUrl(),pt:pageType||this._getPageType()};var iframeWrapper=document.createElement('div');var iframeId='page-timing-'+new Date().getTime();iframeWrapper.innerHTML='<iframe width="0" height="0" id="'+iframeId
+'"name="'+iframeId
+'" frameBorder="0" style="top: -100%; position: absolute;"></iframe>';document.body.appendChild(iframeWrapper);var formEl=document.createElement('form');formEl.style.display='none';formEl.target=iframeId;formEl.method='POST';formEl.action=('https:'===document.location.protocol?'https://':'http://')+(this.config.receiverUrl||errorPostAction);for(var key in data){var tempEl=document.createElement('input');tempEl.type='hidden';tempEl.name=key;tempEl.value=data[key];formEl.appendChild(tempEl);}
var submitButtonEl=document.createElement('input');submitButtonEl.type='submit';submitButtonEl.value='';formEl.appendChild(submitButtonEl);document.body.appendChild(formEl);formEl.submit();},_validate:function(){if(!window['PAGE_TIMING']){return false;}
return true;},_filter:function(){var ua=navigator.userAgent.toLowerCase();if(new RegExp(this.config.filterRegular).test(ua)){return false;}
if(new RegExp(this.config.excludedBrowserRegular).test(ua)){return false;}
return true;},_lottery:function(rate){if(Math.random()>parseFloat(rate)){return false;}
return true;},_getResponseStartTiming:function(){if(this.context.isSupportHtml5Timing){return this.context.responseStartTimestamp;}
return this.param['startRender']-this.config.defaultResponseStartTime;},_getStartRenderTiming:function(){if(!this.context.isSupportHtml5Timing){return'';}
var time=this.param['startRender'];if(time>0){var timing=time-this.context.responseStartTimestamp;return timing;}
return'';},_getFirstPageTiming:function(){var time=this.param['firstScreen'];if(time>0){var timing=time-this._getResponseStartTiming();return timing;}
return'';},_getDocumentCompleteTiming:function(){var time=this.context.documentCompleteTimestamp;if(time>0){var timing=time-this._getResponseStartTiming();return timing;}
return'';},_getFullyLoadedTiming:function(){var time=this.context.fullyLoadedTimestamp;if(time>0){var timing=time-this._getResponseStartTiming();return timing;}
return'';},_getPageType:function(){if(this.param.pageType){return this.param.pageType;}
return'';},_getFlashVersion:function(){var ver,SF='ShockwaveFlash';if(navigator.plugins&&navigator.mimeTypes.length){ver=(navigator.plugins['Shockwave Flash']||0).description;}else if(window.ActiveXObject){try{ver=new ActiveXObject(SF+'.'+SF)['GetVariable']('$version');}catch(ex){}}
if(!ver){return'';}
var version=ver.match(/(\d)+/g).splice(0,3);if(version){version[2]='rc'+version[2];return version.join('.');}
return'';},_getPageUrl:function(){return window.location.href;}};(new pageTiming()).init();;
