(function(g,h,f,d){h.Global.ns("Mall",h);var c={LOAD_VC:'<div class="loadbox" ><span class="load_32x32"></span></div>',LIST_MODE:"listMode",VIEW_HISTORY:{key:"ProductViewHistory",domain:".dx.com",path:"/",expires:15,limit:6}};f.extend(h.Mall,{Config:c});var b={__version:"111217",slide:function(m,p,o){var n=f(m);if(p=="hover"){n.each(function(){var r=f(this).children(":eq(0)"),q=r.next();n.hover(function(){q.slideDown(o,function(){r.removeClass("hovered")})},function(){q.slideUp(o,function(){r.addClass("hovered")})})})}else{n.each(function(){f(this).children(":eq(0)").unbind(p).bind(p,function(){var r=f(this),q=r.next();if(q.css("display")=="none"){q.slideDown(o,function(){r.removeClass("active")})}else{q.slideUp(o,function(){r.addClass("active")})}})})}},proStyleSwitch:function(){var m=function(n){f.cookie(h.Mall.Config.LIST_MODE,n,{expires:7,path:"/"})};f("#showNor").click(function(){f(this).addClass("hovered");f("#showSpe").removeClass("hovered");f("#proList").removeClass("pro_spe").addClass("pro_nor");m("block")});f("#showSpe").click(function(){f(this).addClass("hovered");f("#showNor").removeClass("hovered");f("#proList").removeClass("pro_nor").addClass("pro_spe");m("line")})}};f.extend(h.Mall,{CommonEvent:b});var e={__version:"111217",urlParam:function(n,m){var o=new RegExp("(^|&)"+m+"=([^&]*)(&|$)","i");var p=n.match(o);if(p!=null){return unescape(p[2])}return 0}};f.extend(h.Mall,{CommonMethod:e});var l=(function(){var m="111129";return{__version:m,init:function(o){h.Mall.CommonEvent.slide(".cBox","click",200);f(".cBox ul li").click(function(){f(this).parent().find(".cur").removeClass("cur");f(this).children().addClass("cur")});var p=function(r){var q=true;r.each(function(){var t=f(this),s=f.trim(t.val());s=accounting.unformat(s,o.radix);if(s.length!=0&&!f.isNumeric(s)){t.addClass("input-validate-error").focus();q=false;return false}else{t.removeClass("input-validate-error")}});return q},n=function(){if(!p(f(".input_price"))){return false}var u=f("#inpLowPrice").val();var w=f("#inpHighPrice").val();u=accounting.unformat(u,o.radix);w=accounting.unformat(w,o.radix);var x=g.location.protocol+"//"+g.location.host,q=x;var s=o.redirectUrl.split("?");q+=s[0];if(s.length>1){var y=s[1],v=y.split("&amp;"),r=false,t=false;f.each(v,function(A,z){if(z.indexOf("startPrice=")==0){v[A]="startPrice="+u;r=true}if(z.indexOf("endPrice=")==0){v[A]="endPrice="+w;t=true}});q+="?"+v.join("&");if(!r){q+="&startPrice="+u}if(!t){q+="&endPrice="+w}}else{q+="?startPrice="+u+"&endPrice="+w}g.location.replace(q)};f(".input_price").keydown(function(t){var s=f(this);var r=[8,9,32,37,38,39,40,46,188];var q=[44,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105,110,190];if(t.keyCode==13){if(s.next(".input_price").length==0){s.next(".shop_btn").click()}else{s.next(".input_price").focus()}}else{if(((!t.shiftKey&&!t.ctrlKey&&!t.altKey)&&(jQuery.inArray(t.keyCode,q)>=0))||(jQuery.inArray(t.keyCode,r)>=0)){}else{return false}}});f("#priGo").click(n);f("#priSubmit").click(function(){if(!p(f(".input_price"))){return false}var r=f("#inpLowPrice").val(),q=f("#inpHighPrice").val();r=accounting.unformat(r,o.radix);q=accounting.unformat(q,o.radix);f("#inpLowPrice").val(r);f("#inpHighPrice").val(q)})}}})();f.extend(h.Mall,{Search:l});var k=(function(){var n="111220";function m(){var q=f(".pageCount"),p=f(".pageNumber"),u=f(".put_page"),r=f(".go_page"),o=parseInt(f.trim(f(".pageCount").text()),10)||0,s=parseInt(f.trim(f(".pageNumber").text()),10)||0;if(o<=1){u.attr("readonly","readonly");r.attr("disabled","disabled");return}var t=function(w){var v=f.trim(w.val());if(h.Global.Validation.digits(v)&&v!=="0"){w.removeClass("input-validate-error");return parseInt(v,10)}else{w.addClass("input-validate-error").focus()}return false};u.keydown(function(x){var w=[8,9,37,38,39,40,46];var v=[44,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105];if(x.keyCode==13){f(this).next().click()}else{if(((!x.shiftKey&&!x.ctrlKey&&!x.altKey)&&(jQuery.inArray(x.keyCode,v)>=0))||(jQuery.inArray(x.keyCode,w)>=0)){}else{return false}}}).keyup(function(){t(f(this))});r.click(function(){var w=f(this).prev(),v=t(w);if(!v){return false}if(v==s){w.val("")}else{if(o&&v>o){if(o==s){return false}v=o;w.val(o)}f(this).closest("form").submit()}return false})}return{__version:n,init:function(){h.Mall.CommonEvent.proStyleSwitch();h.Global.UI.dropdown(".sortby",{fx:{type:"none"},onChanged:function(o){g.location.href=o.attr("url")}});m()}}})();f.extend(h.Mall,{Pagination:k});var i=function(q){var n=f.cookie(h.Mall.Config.VIEW_HISTORY.key),m=n?n.split(","):[],p=[q];for(var o=0;o<m.length;o++){if(q==m[o]){continue}if(p.length>=h.Mall.Config.VIEW_HISTORY.limit){break}p.push(m[o])}f.cookie(h.Mall.Config.VIEW_HISTORY.key,p.join(","),{domain:h.Mall.Config.VIEW_HISTORY.domain,expires:h.Mall.Config.VIEW_HISTORY.expires,path:h.Mall.Config.VIEW_HISTORY.path})};f.extend(h.Mall,{addViewHistory:i});var j=function(n){function q(t){var s=f("#viewedItemsPanel"),r=f(h.Mall.Config.LOAD_VC);if(!t.url){return}r.css({padding:"85px 0"});s.append(r);f.ajax({url:t.url,data:{limit:h.Mall.Config.VIEW_HISTORY.limit,titleSize:0},type:"GET",global:false,cache:false,dataType:"json",success:function(w){if(typeof w==="object"&&w.success){var v=f("#viewedItem").html(),u="";if(w.products.length>0){f.each(w.products,function(x,y){var z=v.replace(/_proLink_/g,y.rewriteUrl);z=z.replace("_imgSrc_",y.imageUrl);z=z.replace("_imgAlt_",y.title);z=z.replace("_name_",y.title);z=z.replace(/_title_/g,h.Global.Utils.cutString(y.title,t.titleSize,"..."));z=z.replace("_price_",y.price);u+=z});s.html(u);f("#clearHistory").click(function(x){x.preventDefault();m(h.Mall.Config.VIEW_HISTORY.key);f(this).hide()}).show()}else{s.empty().after('<p class="noContent">You have no recently viewed items or searches!</p>')}}else{}},error:function(){}})}function m(s){var r=f("#viewedItemsPanel");f.cookie(s,null,{domain:h.Mall.Config.VIEW_HISTORY.domain,path:h.Mall.Config.VIEW_HISTORY.path});r.empty().after('<p class="mar_t20 success">Cleared view history successfully</p>')}function p(t){var s=f("#recommendPanel"),r=f(h.Mall.Config.LOAD_VC);if(!t.url){return}r.css({padding:"85px 0"});s.append(r);f.ajax({url:t.url,data:{limit:t.limit,titleSize:0},type:"GET",global:false,cache:false,dataType:"json",success:function(w){if(typeof w==="object"&&w.success){var v=f("#recommendItem").html(),u="";f.each(w.products,function(x,y){var z=v.replace(/_proLink_/g,y.rewriteUrl);z=z.replace("_imgSrc_",y.imageUrl);z=z.replace("_imgAlt_",y.shortHeadline);z=z.replace(/_title_/g,y.headLine);z=z.replace("_name_",y.shortHeadline);z=z.replace("_price_",y.price);u+=z});s.html(u)}else{}},error:function(){}})}var o=function(){if(n.vp){q(n.vp)}if(n.rp){p(n.rp)}};o()};f.extend(h.Mall,{getVRPros:j});var a=function(){f("img.lazy").lazyload({threshold:500})};f.extend(h.Mall,{lazyLoadPic:a});f(function(){f("body").on("click","a.add-wish",function(B){var D=f(this),E=f(this).offset(),C=D.attr("sku"),o=h.Global.UI.Screen.getDimensions(),A={top:E.top+D.height()+5,left:E.left},v=432,x=h.Global.ns("Account.Wish",h);if(C===""||!x.addWish){return}if(E.left+v>o.docWidth){A.left=E.left+D.width()-v}var y=f("a.add-wish").data("rt"),q=f("a.add-wish").data("p"),w=f("a.add-wish").data("m"),n=f("a.add-wish").data("r"),z=f("a.add-wish").data("k"),G=f("a.add-wish").data("t"),H=f("a.add-wish").data("s"),F=f("a.add-wish").data("u");if(!y){y="0"}if(!q){q="0"}x.addWish(C,{left:A.left,top:A.top},{rt:y,p:q,m:w,r:n,k:z,t:G,s:H,u:F})})});(function(){var n=function(o,p){o=f.extend({cat_name:"",cat_parent:""},o);h.BFD.init("list",{BFD_ITEM_INFO:o,bfd_show_hb:p})},m=function(p){p=f.extend({title:"",moreLink:d,BI_RP:{rpUrl:"",cate:""},BFD_ITEM_INFO:{}},p);var o=f("#category_rp_tmpl"),t={};var r=function(v){var u=h.Global.UI.tmpl(o,v);o.parent().html(u)};t.title=p.title;t.moreLink=p.moreLink;if(h.BFD.isGetRPByBFD()){var s=p.BFD_ITEM_INFO,q=function(w,v){var u=function(y){for(var x=0;x<y.length;x++){if(v){urlParser=h.Global.Utils.urlParser(y[x].rewriteUrl);urlParser.setParam("req_id",p.req_id);y[x].rewriteUrl=urlParser.get("href")}}t.items=y;r(t)};h.BFD.getRecProducts(w,u)};n(s,q)}else{if(p.BI_RP.rpUrl){f.ajax({url:p.BI_RP.rpUrl,data:{cate:p.BI_RP.cate},dataType:"json"}).done(function(u){if(u.success){t.items=u.products;r(t)}})}}};f.extend(h.Mall,{initCategoryRP:m})}())}(window,Pattaya,jQuery));
(function(d,c,e){c.Global.ns("Mall",c);var b=function(h,g){var i=new RegExp("(^|&)"+g+"=([^&]*)(&|$)","i");var j=h.match(i);if(j!=null){return unescape(j[2])}return""};var f=function(){var n=d.location.search.substr(1);var i=b(n,"Utm_rid");if(i==0||i==""){return}var h=b(n,"Utm_sid");var o=b(n,"Utm_aid");var g=b(n,"Utm_source");var p=b(n,"Utm_medium");var k=b(n,"Utm_campaign");var j=b(n,"Utm_term");var l=b(n,"Utm_content");var m=0;if(e.cookie("Utm_rid")){m=e.cookie("Utm_rid")}if(m!=i){e.cookie("Utm_rid",i,{expires:45,path:"/",domain:"dx.com"})}};var a=function(){f()};e.extend(c.Mall,{affiliate:a})})(window,Pattaya,jQuery);
